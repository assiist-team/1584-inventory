import{j as e}from"./index-DRwKqTma.js";import{r as j}from"./vendor-Gm9i_4Ku.js";import{a as y,D as b}from"./ui-DKDhksGx.js";function S({onSubmit:n,onCancel:l,isLoading:m=!1,initialData:t}){var p,f;const a=!!(t!=null&&t.name),[s,x]=j.useState({name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||"",clientName:(t==null?void 0:t.clientName)||"",budget:(t==null?void 0:t.budget)||void 0,designFee:(t==null?void 0:t.designFee)||void 0}),[i,d]=j.useState({}),c=(r,g)=>{const N=typeof g=="number"&&g===0?void 0:g;x(h=>({...h,[r]:N})),i[r]&&d(h=>({...h,[r]:""}))},o=()=>{const r={};return s.name.trim()||(r.name="Project name is required"),s.clientName.trim()||(r.clientName="Client name is required"),s.budget!==void 0&&(isNaN(s.budget)||s.budget<0)&&(r.budget="Budget must be a positive number"),s.designFee!==void 0&&(isNaN(s.designFee)||s.designFee<0)&&(r.designFee="Design fee must be a positive number"),d(r),Object.keys(r).length===0},u=async r=>{if(r.preventDefault(),!!o())try{await n(s)}catch(g){console.error("Error submitting form:",g)}};return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:a?"Edit":"Create"}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:e.jsx(y,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Project Name *"}),e.jsx("input",{type:"text",id:"name",value:s.name,onChange:r=>c("name",r.target.value),className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm ${i.name?"border-red-300":""}`,placeholder:"Enter project name"}),i.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"clientName",className:"block text-sm font-medium text-gray-700",children:"Client Name *"}),e.jsx("input",{type:"text",id:"clientName",value:s.clientName,onChange:r=>c("clientName",r.target.value),className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm ${i.clientName?"border-red-300":""}`,placeholder:"Enter client name"}),i.clientName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.clientName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{id:"description",value:s.description,onChange:r=>c("description",r.target.value),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:"Enter project description"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"budget",className:"block text-sm font-medium text-gray-700",children:"Budget (Optional)"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(b,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"number",id:"budget",value:((p=s.budget)==null?void 0:p.toString())||"",onChange:r=>c("budget",parseFloat(r.target.value)||0),className:`block w-full pl-10 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm ${i.budget?"border-red-300":""}`,placeholder:"0.00",min:"0",step:"0.01"})]}),i.budget&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.budget})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"designFee",className:"block text-sm font-medium text-gray-700",children:"Design Fee (Optional)"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(b,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"number",id:"designFee",value:((f=s.designFee)==null?void 0:f.toString())||"",onChange:r=>c("designFee",parseFloat(r.target.value)||0),className:`block w-full pl-10 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm ${i.designFee?"border-red-300":""}`,placeholder:"0.00",min:"0",step:"0.01"})]}),i.designFee&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.designFee})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",disabled:m,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:m?a?"Updating...":"Creating...":a?"Update Project":"Create Project"})]})]})]})})})}function $({budget:n,designFee:l,transactions:m}){const t=()=>!n&&n!==0?0:m.filter(o=>o.transaction_type==="Purchase").reduce((o,u)=>o+parseFloat(u.amount||"0"),0)+(l||0);if(n==null)return null;const a=t(),s=n>0?a/n*100:0,x=()=>s>=100?"bg-red-500":s>=80?"bg-yellow-500":"bg-green-500",i=()=>s>=100?"text-red-600":s>=80?"text-yellow-600":"text-green-600";return e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Budget Progress"})}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["$",a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["of $",n.toLocaleString("en-US")," budget"]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:e.jsx("div",{className:`h-3 rounded-full transition-all duration-300 ${x()}`,style:{width:`${Math.min(s,100)}%`}})}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Progress"}),e.jsxs("span",{className:`font-semibold ${i()}`,children:[s.toFixed(1),"%"]})]}),e.jsx("div",{className:"mt-3 text-sm",children:s>=100?e.jsxs("div",{className:"flex items-center text-red-600",children:[e.jsx("span",{className:"mr-2",children:"⚠️"}),"Budget exceeded by $",(a-n).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}):s>=80?e.jsxs("div",{className:"flex items-center text-yellow-600",children:[e.jsx("span",{className:"mr-2",children:"⚠️"}),(100-s).toFixed(1),"% of budget remaining"]}):e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx("span",{className:"mr-2",children:"✅"}),"$",(n-a).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," remaining"]})}),(m.length>0||l)&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{children:"Purchases:"}),e.jsxs("span",{children:["$",m.filter(d=>d.transaction_type==="Purchase").reduce((d,c)=>d+parseFloat(c.amount||"0"),0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),l&&l>0&&e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{children:"Design Fee:"}),e.jsxs("span",{children:["$",l.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between font-semibold pt-1 border-t border-gray-300",children:[e.jsx("span",{children:"Total Spent:"}),e.jsxs("span",{children:["$",a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})})]})]})}function C({budget:n,designFee:l,transactions:m}){const t=()=>!n&&n!==0?0:m.filter(o=>o.transaction_type==="Purchase").reduce((o,u)=>o+parseFloat(u.amount||"0"),0)+(l||0);if(n==null)return e.jsx("div",{className:"text-center py-2",children:e.jsx("div",{className:"text-xs text-gray-500",children:"No budget set"})});const a=t(),s=n>0?a/n*100:0,x=()=>s>=100?"bg-red-500":s>=80?"bg-yellow-500":"bg-green-500",i=()=>s>=100?"text-red-600":s>=80?"text-yellow-600":"text-green-600";return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Budget"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["$",a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("div",{className:`text-xs ${i()}`,children:[s.toFixed(0),"%"]})]})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${x()}`,style:{width:`${Math.min(s,100)}%`}})})}),e.jsxs("div",{className:"mt-1 flex justify-between items-center text-xs",children:[e.jsxs("span",{className:"text-gray-500",children:["$",n.toLocaleString("en-US")]}),e.jsx("div",{className:"flex items-center",children:s>=100?e.jsx("span",{className:"text-red-600",children:"⚠️ Over budget"}):s>=80?e.jsxs("span",{className:"text-yellow-600",children:["⚠️ ",(100-s).toFixed(0),"% left"]}):e.jsxs("span",{className:"text-green-600",children:["✅ $",(n-a).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," left"]})})]})]})}export{$ as B,C,S as P};
//# sourceMappingURL=BudgetProgress-0-nw1J_b.js.map
