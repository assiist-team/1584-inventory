{"version":3,"file":"TransactionDetail.js","sources":["../../src/pages/TransactionDetail.tsx"],"sourcesContent":["import { ArrowLeft, Edit, Trash2, Calendar, CreditCard, FileText, Image as ImageIcon, Package, ExternalLink } from 'lucide-react'\nimport { useState } from 'react'\nimport ImageGallery from '@/components/ui/ImageGallery'\nimport { Link, useParams, useNavigate } from 'react-router-dom'\nimport { useEffect } from 'react'\nimport { Transaction, Project, Item } from '@/types'\nimport { transactionService, projectService, itemService } from '@/services/inventoryService'\nimport { formatDate, formatCurrency } from '@/utils/dateUtils'\nimport { useToast } from '@/components/ui/ToastContext'\n\n// Remove any unwanted icons from transaction type badges\nconst removeUnwantedIcons = () => {\n  const badges = document.querySelectorAll('.no-icon')\n  badges.forEach(badge => {\n    // Remove any child elements that aren't text nodes\n    const children = Array.from(badge.childNodes)\n    children.forEach(child => {\n      if (child.nodeType !== Node.TEXT_NODE) {\n        if (child.parentNode) {\n          child.parentNode.removeChild(child)\n        }\n      }\n    })\n  })\n}\n\n\nexport default function TransactionDetail() {\n  const { id: projectId, transactionId } = useParams<{ id: string; transactionId: string }>()\n  const navigate = useNavigate()\n  const [transaction, setTransaction] = useState<Transaction | null>(null)\n  const [project, setProject] = useState<Project | null>(null)\n  const [transactionItems, setTransactionItems] = useState<Item[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [isLoadingItems, setIsLoadingItems] = useState(true)\n  const [showGallery, setShowGallery] = useState(false)\n  const [galleryInitialIndex, setGalleryInitialIndex] = useState(0)\n  const { showError } = useToast()\n\n\n  useEffect(() => {\n    const loadTransaction = async () => {\n      if (!projectId || !transactionId) return\n\n      try {\n        // Fetch transaction, project data, and transaction items\n        const [transactionData, projectData, itemIds] = await Promise.all([\n          transactionService.getTransaction(projectId, transactionId),\n          projectService.getProject(projectId),\n          itemService.getTransactionItems(projectId, transactionId)\n        ])\n\n        const convertedTransaction: Transaction = {\n          ...transactionData,\n          transaction_images: Array.isArray(transactionData?.transaction_images) ? transactionData.transaction_images : []\n        } as Transaction\n\n        console.log('TransactionDetail - loaded transactionData:', transactionData)\n        console.log('TransactionDetail - convertedTransaction:', convertedTransaction)\n        console.log('TransactionDetail - item IDs:', itemIds)\n        setTransaction(convertedTransaction)\n        setProject(projectData)\n\n        // Fetch the actual item details\n        if (itemIds.length > 0) {\n          const itemsPromises = itemIds.map(itemId => itemService.getItem(projectId, itemId))\n          const items = await Promise.all(itemsPromises)\n          const validItems = items.filter(item => item !== null) as Item[]\n          console.log('TransactionDetail - fetched items:', validItems.length)\n          setTransactionItems(validItems)\n        } else {\n          setTransactionItems([])\n        }\n\n      } catch (error) {\n        console.error('Error loading transaction:', error)\n        setTransactionItems([])\n      } finally {\n        setIsLoading(false)\n        setIsLoadingItems(false)\n      }\n    }\n\n    loadTransaction()\n  }, [projectId, transactionId])\n\n  // Set up real-time subscription for transaction updates\n  useEffect(() => {\n    if (!projectId || !transactionId) return\n\n    // Temporarily disable real-time subscription to debug\n    // const unsubscribe = transactionService.subscribeToTransaction(\n    //   projectId,\n    //   transactionId,\n    //   (updatedTransaction) => {\n    //     if (updatedTransaction) {\n    //       console.log('TransactionDetail - real-time updatedTransaction:', updatedTransaction)\n    //       console.log('TransactionDetail - real-time updatedTransaction.transaction_images:', updatedTransaction.transaction_images)\n    //       console.log('TransactionDetail - real-time updatedTransaction.transaction_images length:', updatedTransaction.transaction_images?.length)\n\n    //       const convertedTransaction: Transaction = {\n    //         ...updatedTransaction,\n    //         transaction_images: Array.isArray(updatedTransaction.transaction_images) ? updatedTransaction.transaction_images : []\n    //       } as Transaction\n\n    //       console.log('TransactionDetail - real-time convertedTransaction:', convertedTransaction)\n    //       setTransaction(convertedTransaction)\n    //     } else {\n    //       setTransaction(null)\n    //     }\n    //   }\n    // )\n\n    // return () => {\n    //   unsubscribe()\n    // }\n  }, [projectId, transactionId])\n\n\n  // Clean up any unwanted icons from transaction type badges\n  useEffect(() => {\n    if (transaction) {\n      removeUnwantedIcons()\n      // Also run after a short delay to catch any dynamically added icons\n      const timer = setTimeout(removeUnwantedIcons, 100)\n      const timer2 = setTimeout(removeUnwantedIcons, 500)\n      return () => {\n        clearTimeout(timer)\n        clearTimeout(timer2)\n      }\n    }\n  }, [transaction])\n\n  const handleDelete = async () => {\n    if (!projectId || !transactionId || !transaction) return\n\n    if (window.confirm('Are you sure you want to delete this transaction? This action cannot be undone.')) {\n      try {\n        await transactionService.deleteTransaction(projectId, transactionId)\n        navigate(`/project/${projectId}?tab=transactions`)\n      } catch (error) {\n        console.error('Error deleting transaction:', error)\n        showError('Failed to delete transaction. Please try again.')\n      }\n    }\n  }\n\n  const handleImageClick = (index: number) => {\n    setGalleryInitialIndex(index)\n    setShowGallery(true)\n  }\n\n  const handleGalleryClose = () => {\n    setShowGallery(false)\n  }\n\n  // Convert transaction images to ItemImage format for the gallery\n  const itemImages = transaction?.transaction_images?.map((img, index) => ({\n    url: img.url,\n    alt: img.fileName,\n    fileName: img.fileName,\n    uploadedAt: img.uploadedAt,\n    size: img.size,\n    mimeType: img.mimeType,\n    isPrimary: index === 0 // First image is primary\n  })) || []\n\n  if (isLoading) {\n    return (\n      <div className=\"flex justify-center items-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto\"></div>\n          <p className=\"mt-2 text-sm text-gray-600\">Loading transaction...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (!transaction) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"mx-auto h-12 w-12 text-gray-400\">ðŸ“„</div>\n        <h3 className=\"mt-2 text-sm font-medium text-gray-900\">Transaction not found</h3>\n        <p className=\"mt-1 text-sm text-gray-500\">The transaction you're looking for doesn't exist.</p>\n        <div className=\"mt-6\">\n          <Link\n            to={`/project/${projectId}?tab=transactions`}\n            className=\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Back\n          </Link>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"space-y-4\">\n        {/* Back button row */}\n        <div className=\"flex items-center justify-between\">\n          <Link\n            to={`/project/${projectId}?tab=transactions`}\n            className=\"inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-1\" />\n            Back\n          </Link>\n          <div className=\"flex space-x-3\">\n            <Link\n              to={`/project/${projectId}/transaction/${transactionId}/edit`}\n              className=\"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n            >\n              <Edit className=\"h-4 w-4 mr-2\" />\n              Edit\n            </Link>\n            <button\n              onClick={handleDelete}\n              className=\"inline-flex items-center px-4 py-2 border border-red-300 shadow-sm text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\"\n            >\n              <Trash2 className=\"h-4 w-4 mr-2\" />\n              Delete\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Transaction Details */}\n      <div className=\"bg-white shadow rounded-lg overflow-hidden\">\n        <div className=\"px-6 py-6 border-b border-gray-200\">\n          <h1 className=\"text-2xl font-bold text-gray-900 leading-tight\">\n            {transaction.source}\n          </h1>\n        </div>\n\n        <div className=\"px-6 py-4\">\n          <dl className=\"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2\">\n            <div>\n              <dt className=\"text-sm font-medium text-gray-500\">\n                Amount\n              </dt>\n              <dd className=\"mt-1 text-sm text-gray-900 font-medium\">{formatCurrency(transaction.amount)}</dd>\n            </div>\n\n            <div>\n              <dt className=\"text-sm font-medium text-gray-500 flex items-center\">\n                <CreditCard className=\"h-4 w-4 mr-1\" />\n                Payment Method\n              </dt>\n              <dd className=\"mt-1 text-sm text-gray-900\">{transaction.payment_method}</dd>\n            </div>\n\n            <div>\n              <dt className=\"text-sm font-medium text-gray-500 flex items-center\">\n                <Calendar className=\"h-4 w-4 mr-1\" />\n                Transaction Date\n              </dt>\n              <dd className=\"mt-1 text-sm text-gray-900\">\n                {transaction.transaction_date ? formatDate(transaction.transaction_date) : 'No date'}\n              </dd>\n            </div>\n\n            <div>\n              <dt className=\"text-sm font-medium text-gray-500\">Transaction Type</dt>\n              <dd className=\"mt-1\">\n                <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium no-icon ${\n                  transaction.transaction_type === 'Purchase'\n                    ? 'bg-green-100 text-green-800'\n                    : transaction.transaction_type === 'Return'\n                    ? 'bg-blue-100 text-blue-800'\n                    : 'bg-gray-100 text-gray-800'\n                }`}>\n                  {transaction.transaction_type}\n                </span>\n              </dd>\n            </div>\n\n            {transaction.receipt_emailed && (\n              <div>\n                <dt className=\"text-sm font-medium text-gray-500\">\n                  Receipt Emailed\n                </dt>\n                <dd className=\"mt-1\">\n                  <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\">\n                    Yes\n                  </span>\n                </dd>\n              </div>\n            )}\n\n            {transaction.notes && (\n              <div className=\"sm:col-span-2\">\n                <dt className=\"text-sm font-medium text-gray-500 flex items-center\">\n                  <FileText className=\"h-4 w-4 mr-1\" />\n                  Notes\n                </dt>\n                <dd className=\"mt-1 text-sm text-gray-900 whitespace-pre-wrap\">{transaction.notes}</dd>\n              </div>\n            )}\n          </dl>\n        </div>\n\n        {/* Transaction Images */}\n        {transaction.transaction_images && transaction.transaction_images.length > 0 && (\n          <div className=\"px-6 py-6 border-t border-gray-200\">\n            <h3 className=\"text-lg font-medium text-gray-900 mb-4 flex items-center\">\n              <ImageIcon className=\"h-5 w-5 mr-2\" />\n              Transaction Images\n            </h3>\n            <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3 sm:gap-4 md:gap-6\" style={{width: 'fit-content'}}>\n              {transaction.transaction_images.map((image, index) => (\n                <div\n                  key={index}\n                  className=\"w-24 h-24 sm:w-20 sm:h-20 relative group cursor-pointer rounded-lg overflow-hidden border-2 border-gray-200 hover:border-primary-300 transition-colors\"\n                  onClick={() => handleImageClick(index)}\n                >\n                  <img\n                    src={image.url}\n                    alt={image.fileName}\n                    className=\"w-full h-full object-cover transition-transform group-hover:scale-105\"\n                  />\n\n                  {/* Image index */}\n                  {transaction.transaction_images && transaction.transaction_images.length > 1 && (\n                    <div className=\"absolute bottom-1 right-1 bg-black bg-opacity-70 text-white text-xs px-1 py-0.5 rounded\">\n                      {index + 1}\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n\n            {/* Image count */}\n            <p className=\"text-xs text-gray-500 mt-2\">\n              {transaction.transaction_images.length} image{transaction.transaction_images.length !== 1 ? 's' : ''}\n            </p>\n          </div>\n        )}\n\n        {/* Transaction Items */}\n        {isLoadingItems ? (\n          <div className=\"px-6 py-6 border-t border-gray-200\">\n            <div className=\"flex justify-center items-center h-16\">\n              <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600\"></div>\n              <span className=\"ml-2 text-sm text-gray-600\">Loading items...</span>\n            </div>\n          </div>\n        ) : transactionItems.length > 0 ? (\n          <div className=\"px-6 py-6 border-t border-gray-200\">\n            <h3 className=\"text-lg font-medium text-gray-900 mb-4 flex items-center\">\n              <Package className=\"h-5 w-5 mr-2\" />\n              Items in this Transaction ({transactionItems.length})\n            </h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n              {transactionItems.map((item) => (\n                <Link\n                  key={item.item_id}\n                  to={`/project/${projectId}/item/${item.item_id}`}\n                  className=\"block p-4 border border-gray-200 rounded-lg hover:border-primary-300 hover:shadow-sm transition-all duration-200 group\"\n                >\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-sm font-medium text-gray-900 truncate group-hover:text-primary-600\">\n                        {item.description}\n                      </p>\n                      <p className=\"text-sm text-gray-500 mt-1\">\n                        {formatCurrency(item.price)}\n                      </p>\n                      {item.sku && (\n                        <p className=\"text-xs text-gray-400 mt-1\">\n                          SKU: {item.sku}\n                        </p>\n                      )}\n                      {item.disposition && (\n                        <span className={`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium mt-2 ${\n                          item.disposition === 'keep'\n                            ? 'bg-green-100 text-green-800'\n                            : item.disposition === 'return'\n                            ? 'bg-red-100 text-red-800'\n                            : 'bg-gray-100 text-gray-800'\n                        }`}>\n                          {item.disposition}\n                        </span>\n                      )}\n                    </div>\n                    <ExternalLink className=\"h-4 w-4 text-gray-400 group-hover:text-primary-500 flex-shrink-0 ml-2\" />\n                  </div>\n                </Link>\n              ))}\n            </div>\n          </div>\n        ) : (\n          <div className=\"px-6 py-6 border-t border-gray-200\">\n            <div className=\"text-center py-8\">\n              <Package className=\"mx-auto h-8 w-8 text-gray-400\" />\n              <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No items linked</h3>\n              <p className=\"mt-1 text-sm text-gray-500\">\n                Items created separately can be linked to this transaction when adding them to inventory.\n              </p>\n            </div>\n          </div>\n        )}\n\n        {/* Metadata */}\n        <div className=\"px-6 py-4 bg-gray-50 border-t border-gray-200\">\n          <dl className=\"grid grid-cols-1 gap-x-4 gap-y-4 sm:grid-cols-3\">\n            <div>\n              <dt className=\"text-xs font-medium text-gray-500 uppercase tracking-wide\">Project</dt>\n              <dd className=\"mt-1 text-sm text-gray-900\">{project?.name || transaction.project_name}</dd>\n            </div>\n            <div>\n              <dt className=\"text-xs font-medium text-gray-500 uppercase tracking-wide\">Created</dt>\n              <dd className=\"mt-1 text-sm text-gray-900\">\n                {formatDate(transaction.created_at)}\n              </dd>\n            </div>\n          </dl>\n        </div>\n      </div>\n\n      {/* Image gallery modal */}\n      {showGallery && (\n        <ImageGallery\n          images={itemImages}\n          initialIndex={galleryInitialIndex}\n          onClose={handleGalleryClose}\n        />\n      )}\n    </div>\n  )\n}\n"],"names":["removeUnwantedIcons","badge","child","TransactionDetail","projectId","transactionId","useParams","navigate","useNavigate","transaction","setTransaction","useState","project","setProject","transactionItems","setTransactionItems","isLoading","setIsLoading","isLoadingItems","setIsLoadingItems","showGallery","setShowGallery","galleryInitialIndex","setGalleryInitialIndex","showError","useToast","useEffect","transactionData","projectData","itemIds","transactionService","projectService","itemService","convertedTransaction","itemsPromises","itemId","validItems","item","error","timer","timer2","handleDelete","handleImageClick","index","handleGalleryClose","itemImages","_a","img","jsxs","jsx","Link","ArrowLeft","Edit","Trash2","formatCurrency","CreditCard","Calendar","formatDate","FileText","ImageIcon","image","Package","ExternalLink","ImageGallery"],"mappings":"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"}