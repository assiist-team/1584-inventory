{"version":3,"file":"ProjectDetail.js","sources":["../../src/pages/InventoryList.tsx","../../src/pages/TransactionsList.tsx","../../src/pages/ProjectDetail.tsx"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { Plus, Search, Bookmark, Printer, RotateCcw, Trash2, Camera } from 'lucide-react'\nimport { Link } from 'react-router-dom'\nimport { itemService } from '@/services/inventoryService'\nimport { ImageUploadService } from '@/services/imageService'\nimport { ItemImage } from '@/types'\nimport { useToast } from '@/components/ui/ToastContext'\n\ninterface InventoryItem {\n  item_id: string\n  description: string\n  source: string\n  sku: string\n  price: string\n  \"1584_resale_price\"?: string\n  resale_price?: string\n  market_value?: string\n  payment_method: string\n  notes?: string\n  qr_key: string\n  bookmark: boolean\n  disposition: string\n  date_created: string\n  last_updated: string\n  transaction_id: string\n  project_id: string\n}\n\ninterface InventoryListProps {\n  projectId: string\n  projectName: string\n}\n\nexport default function InventoryList({ projectId, projectName }: InventoryListProps) {\n  const [searchQuery, setSearchQuery] = useState('')\n  const [selectedItems, setSelectedItems] = useState<Set<string>>(new Set())\n  const [items, setItems] = useState<InventoryItem[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [uploadingImages, setUploadingImages] = useState<Set<string>>(new Set())\n  const { showSuccess, showError } = useToast()\n\n  // Fetch real inventory data from Firestore\n  useEffect(() => {\n    const fetchItems = async () => {\n      try {\n        setLoading(true)\n        setError(null)\n        console.log('Fetching items for project:', projectId)\n        const realItems = await itemService.getItems(projectId)\n        console.log('Fetched items:', realItems.length, realItems)\n        setItems(realItems)\n      } catch (error) {\n        console.error('Failed to fetch items:', error)\n        setError('Failed to load inventory items. Please try again.')\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchItems()\n\n    // Subscribe to real-time updates\n    const unsubscribe = itemService.subscribeToItems(projectId, (updatedItems) => {\n      console.log('Real-time items update:', updatedItems.length, updatedItems)\n      setItems(updatedItems)\n    })\n\n    // Cleanup subscription on unmount\n    return () => {\n      unsubscribe()\n    }\n  }, [projectId])\n\n  // Reset uploading state on unmount to prevent hanging state\n  useEffect(() => {\n    return () => {\n      setUploadingImages(new Set())\n    }\n  }, [])\n\n  const handleSelectAll = (checked: boolean) => {\n    if (checked) {\n      setSelectedItems(new Set(items.map(item => item.item_id)))\n    } else {\n      setSelectedItems(new Set())\n    }\n  }\n\n  const handleSelectItem = (itemId: string, checked: boolean) => {\n    const newSelected = new Set(selectedItems)\n    if (checked) {\n      newSelected.add(itemId)\n    } else {\n      newSelected.delete(itemId)\n    }\n    setSelectedItems(newSelected)\n  }\n\n  const toggleBookmark = async (itemId: string) => {\n    try {\n      const item = items.find(item => item.item_id === itemId)\n      if (!item) return\n\n      const newBookmarkState = !item.bookmark\n\n      // Update in Firestore\n      await itemService.updateItem(projectId, itemId, { bookmark: newBookmarkState })\n\n      // Update local state optimistically\n      setItems(items.map(item =>\n        item.item_id === itemId\n          ? { ...item, bookmark: newBookmarkState }\n          : item\n      ))\n    } catch (error) {\n      console.error('Failed to update bookmark:', error)\n      setError('Failed to update bookmark. Please try again.')\n    }\n  }\n\n  const toggleDisposition = async (itemId: string) => {\n    try {\n      const item = items.find(item => item.item_id === itemId)\n      if (!item) return\n\n      const newDisposition = item.disposition === 'return' ? 'keep' : 'return'\n\n      // Update in Firestore\n      await itemService.updateItem(projectId, itemId, { disposition: newDisposition })\n\n      // Update local state optimistically\n      setItems(items.map(item =>\n        item.item_id === itemId\n          ? { ...item, disposition: newDisposition }\n          : item\n      ))\n    } catch (error) {\n      console.error('Failed to update disposition:', error)\n      setError('Failed to update item disposition. Please try again.')\n    }\n  }\n\n  const handleDeleteItem = async (itemId: string) => {\n    if (!confirm('Are you sure you want to delete this item? This action cannot be undone.')) {\n      return\n    }\n\n    try {\n      await itemService.deleteItem(projectId, itemId)\n      setSelectedItems(prev => {\n        const newSet = new Set(prev)\n        newSet.delete(itemId)\n        return newSet\n      })\n      setError(null)\n    } catch (error) {\n      console.error('Failed to delete item:', error)\n      setError('Failed to delete item. Please try again.')\n    }\n  }\n\n  const handleAddImage = async (itemId: string) => {\n    try {\n      setUploadingImages(prev => new Set(prev).add(itemId))\n\n      const files = await ImageUploadService.selectFromGallery()\n\n      if (files.length > 0) {\n        // Process all selected files sequentially\n        for (let i = 0; i < files.length; i++) {\n          const file = files[i]\n          await processImageUpload(itemId, file, files)\n        }\n      }\n    } catch (error: any) {\n      console.error('Error adding image:', error)\n\n      // Handle cancel/timeout gracefully - don't show error for user cancellation\n      if (error.message?.includes('timeout') || error.message?.includes('canceled')) {\n        console.log('User canceled image selection or selection timed out')\n        return\n      }\n\n      // Show error for actual failures\n      showError('Failed to add image. Please try again.')\n    } finally {\n      setUploadingImages(prev => {\n        const newSet = new Set(prev)\n        newSet.delete(itemId)\n        return newSet\n      })\n    }\n  }\n\n  const processImageUpload = async (itemId: string, file: File, allFiles?: File[]) => {\n    const uploadResult = await ImageUploadService.uploadItemImage(\n      file,\n      projectName,\n      itemId\n    )\n\n    const newImage: ItemImage = {\n      url: uploadResult.url,\n      alt: file.name,\n      isPrimary: true, // First image is always primary when added from list\n      uploadedAt: new Date(),\n      fileName: file.name,\n      size: file.size,\n      mimeType: file.type\n    }\n\n    // Update the item with the new image\n    await itemService.addItemImage(projectId, itemId, newImage)\n    // The real-time listener will handle the UI update\n\n    // Show success notification on the last file\n    if (allFiles && allFiles.indexOf(file) === allFiles.length - 1) {\n      const message = allFiles.length > 1 ? `${allFiles.length} images uploaded successfully!` : 'Image uploaded successfully!'\n      showSuccess(message)\n    }\n  }\n\n  const handleBulkDelete = async () => {\n    if (selectedItems.size === 0) return\n\n    const confirmMessage = `Are you sure you want to delete ${selectedItems.size} item(s)? This action cannot be undone.`\n\n    if (!confirm(confirmMessage)) {\n      return\n    }\n\n    try {\n      const deletePromises = Array.from(selectedItems).map(itemId =>\n        itemService.deleteItem(projectId, itemId)\n      )\n\n      await Promise.all(deletePromises)\n      setSelectedItems(new Set())\n      setError(null)\n    } catch (error) {\n      console.error('Failed to delete items:', error)\n      setError('Failed to delete some items. Please try again.')\n    }\n  }\n\n  const filteredItems = items.filter(item =>\n    item.description.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    item.source.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    item.sku.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    item.payment_method.toLowerCase().includes(searchQuery.toLowerCase())\n  )\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n        <h2 className=\"text-xl font-semibold text-gray-900\">Project Inventory</h2>\n        <Link\n          to={`/project/${projectId}/item/add`}\n          className=\"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 transition-colors duration-200 w-full sm:w-auto\"\n        >\n          <Plus className=\"h-4 w-4 mr-2\" />\n          Add Item\n        </Link>\n      </div>\n\n      {/* Search and Controls */}\n      <div className=\"space-y-4\">\n        {/* Search Bar */}\n        <div className=\"relative\">\n          <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n            <Search className=\"h-5 w-5 text-gray-400\" />\n          </div>\n          <input\n            type=\"text\"\n            className=\"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-base\"\n            placeholder=\"Search items...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n          />\n        </div>\n\n        {/* Action Controls */}\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3\">\n          <div className=\"flex items-center space-x-3\">\n            <button\n              className=\"flex-1 sm:flex-none inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 transition-colors duration-200\"\n              disabled={selectedItems.size === 0}\n            >\n              <Printer className=\"h-4 w-4 mr-2\" />\n              Generate QR\n            </button>\n\n            <button\n              onClick={handleBulkDelete}\n              className=\"flex-1 sm:flex-none inline-flex items-center justify-center px-4 py-2 border border-red-300 text-sm font-medium rounded-md text-red-700 bg-red-50 hover:bg-red-100 disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200\"\n              disabled={selectedItems.size === 0}\n            >\n              <Trash2 className=\"h-4 w-4 mr-2\" />\n              Delete\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Select All */}\n      <div className=\"flex items-center justify-between\">\n        <label className=\"flex items-center cursor-pointer\">\n          <input\n            type=\"checkbox\"\n            className=\"rounded border-gray-300 text-primary-600 focus:ring-primary-500 h-4 w-4\"\n            onChange={(e) => handleSelectAll(e.target.checked)}\n            checked={selectedItems.size === items.length && items.length > 0}\n          />\n          <span className=\"ml-3 text-sm font-medium text-gray-700\">Select all</span>\n        </label>\n        {selectedItems.size > 0 && (\n          <span className=\"text-sm text-gray-500\">\n            {selectedItems.size} of {items.length} selected\n          </span>\n        )}\n      </div>\n\n      {/* Loading State */}\n      {loading && (\n        <div className=\"text-center py-12 px-4\">\n          <div className=\"mx-auto h-16 w-16 text-gray-400 animate-spin mb-4\">\n            <svg fill=\"none\" viewBox=\"0 0 24 24\">\n              <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n              <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n            </svg>\n          </div>\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Loading inventory...</h3>\n          <p className=\"text-sm text-gray-500\">Fetching your project items.</p>\n        </div>\n      )}\n\n      {/* Error State */}\n      {error && (\n        <div className=\"text-center py-12 px-4\">\n          <div className=\"mx-auto h-16 w-16 text-red-400 mb-4\">⚠️</div>\n          <h3 className=\"text-lg font-medium text-red-900 mb-2\">Error loading inventory</h3>\n          <p className=\"text-sm text-red-500 mb-6 max-w-sm mx-auto\">{error}</p>\n          <button\n            onClick={() => window.location.reload()}\n            className=\"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-red-600 hover:bg-red-700 transition-colors duration-200 w-full sm:w-auto max-w-xs\"\n          >\n            <RotateCcw className=\"h-5 w-5 mr-2\" />\n            Retry\n          </button>\n        </div>\n      )}\n\n      {/* Items List */}\n      {!loading && !error && filteredItems.length === 0 ? (\n        <div className=\"text-center py-12 px-4\">\n          <div className=\"mx-auto h-16 w-16 text-gray-400 mb-4\">📦</div>\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n            No items found\n          </h3>\n          <p className=\"text-sm text-gray-500 mb-6\">\n            {searchQuery ? 'Try adjusting your search terms.' : 'Add your first item to this project inventory.'}\n          </p>\n          {!searchQuery && (\n            <Link\n              to={`/project/${projectId}/item/add`}\n              className=\"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 transition-colors duration-200 w-full sm:w-auto max-w-xs\"\n            >\n              <Plus className=\"h-5 w-5 mr-2\" />\n              Add Item\n            </Link>\n          )}\n        </div>\n      ) : (\n        !loading && !error && (\n          <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\n            <ul className=\"divide-y divide-gray-200\">\n              {filteredItems.map((item) => (\n                <li key={item.item_id} className=\"relative\">\n                  <div className=\"block transition-colors duration-200 hover:bg-gray-50 active:bg-gray-100\">\n                    <div className=\"px-4 py-4 sm:px-6\">\n                      {/* Top row: Controls */}\n                      <div className=\"flex items-center justify-between mb-3\">\n                        <div className=\"flex items-center\">\n                          <input\n                            type=\"checkbox\"\n                            className=\"rounded border-gray-300 text-primary-600 focus:ring-primary-500 h-4 w-4 flex-shrink-0\"\n                            checked={selectedItems.has(item.item_id)}\n                            onChange={(e) => handleSelectItem(item.item_id, e.target.checked)}\n                          />\n                        </div>\n\n                        {/* Action buttons */}\n                        <div className=\"flex items-center space-x-2\">\n                          <button\n                            onClick={(e) => {\n                              e.preventDefault()\n                              e.stopPropagation()\n                              toggleBookmark(item.item_id)\n                            }}\n                            className={`p-2 rounded-full transition-colors ${\n                              item.bookmark\n                                ? 'text-red-600 bg-red-50'\n                                : 'text-gray-400 hover:text-gray-600 hover:bg-gray-200'\n                            }`}\n                          >\n                            <Bookmark className=\"h-4 w-4\" fill={item.bookmark ? 'currentColor' : 'none'} />\n                          </button>\n                          <button\n                            onClick={(e) => {\n                              e.preventDefault()\n                              e.stopPropagation()\n                              toggleDisposition(item.item_id)\n                            }}\n                            className={`p-2 rounded-full transition-colors ${\n                              item.disposition === 'return'\n                                ? 'text-red-600 bg-red-50'\n                                : 'text-gray-400 hover:text-gray-600 hover:bg-gray-200'\n                            }`}\n                          >\n                            <RotateCcw className=\"h-4 w-4\" />\n                          </button>\n                          <button\n                            onClick={(e) => {\n                              e.preventDefault()\n                              e.stopPropagation()\n                              handleAddImage(item.item_id)\n                            }}\n                            disabled={uploadingImages.has(item.item_id)}\n                            className=\"p-2 rounded-full text-primary-600 hover:text-primary-700 hover:bg-primary-50 transition-colors disabled:opacity-50\"\n                            title=\"Add image (camera or gallery)\"\n                          >\n                            <Camera className=\"h-4 w-4\" />\n                          </button>\n                          <button\n                            onClick={(e) => {\n                              e.preventDefault()\n                              e.stopPropagation()\n                              handleDeleteItem(item.item_id)\n                            }}\n                            className=\"p-2 rounded-full text-red-600 hover:text-red-700 hover:bg-red-200 transition-colors\"\n                          >\n                            <Trash2 className=\"h-4 w-4\" />\n                          </button>\n                        </div>\n                      </div>\n\n                      {/* Bottom row: Content - Clickable */}\n                      <Link\n                        to={`/item/${item.item_id}?project=${projectId}`}\n                        className=\"block\"\n                      >\n                        <div className=\"space-y-2\">\n                          {/* Item description - no truncation */}\n                          <h3 className=\"text-base font-medium text-gray-900\">\n                            {item.description}\n                          </h3>\n\n                          {/* Price, Source, SKU on same row */}\n                          <div className=\"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-gray-500\">\n                            {item.price && (\n                              <span className=\"font-medium text-gray-700\">${item.price}</span>\n                            )}\n                            {item.source && (\n                              <>\n                                {(item.price) && <span className=\"hidden sm:inline\">•</span>}\n                                <span className=\"font-medium text-gray-700\">{item.source}</span>\n                              </>\n                            )}\n                            {item.sku && (\n                              <>\n                                {(item.price || item.source) && <span className=\"hidden sm:inline\">•</span>}\n                                <span className=\"font-medium text-gray-700\">{item.sku}</span>\n                              </>\n                            )}\n                          </div>\n\n                          {/* Notes - visible on mobile as last row */}\n                          <div className=\"sm:hidden\">\n                            {item.notes && (\n                              <p className=\"text-sm text-gray-600 line-clamp-2\">\n                                {item.notes}\n                              </p>\n                            )}\n                          </div>\n\n                          {/* Additional info on larger screens */}\n                          <div className=\"hidden sm:flex items-center text-sm text-gray-600\">\n                            {item.notes && (\n                              <p className=\"truncate max-w-xs\">{item.notes}</p>\n                            )}\n                          </div>\n\n                        </div>\n                      </Link>\n                    </div>\n                  </div>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )\n      )}\n    </div>\n  )\n}\n","import { Plus } from 'lucide-react'\nimport { Link, useParams } from 'react-router-dom'\nimport { useState, useEffect } from 'react'\nimport { Transaction } from '@/types'\nimport { transactionService } from '@/services/inventoryService'\nimport { formatDate, formatCurrency } from '@/utils/dateUtils'\n\n// Remove any unwanted icons from transaction type badges\nconst removeUnwantedIcons = () => {\n  const badges = document.querySelectorAll('.no-icon')\n  badges.forEach(badge => {\n    // Remove any child elements that aren't text nodes\n    const children = Array.from(badge.childNodes)\n    children.forEach(child => {\n      if (child.nodeType !== Node.TEXT_NODE) {\n        badge.removeChild(child)\n      }\n    })\n  })\n}\n\ninterface TransactionsListProps {\n  projectId?: string\n}\n\nexport default function TransactionsList({ projectId: propProjectId }: TransactionsListProps) {\n  const { id: routeProjectId } = useParams<{ id: string }>()\n  // Use prop if provided, otherwise fall back to route param\n  const projectId = propProjectId || routeProjectId\n  const [transactions, setTransactions] = useState<Transaction[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n\n  useEffect(() => {\n    const loadTransactions = async () => {\n      if (!projectId) {\n        setIsLoading(false)\n        return\n      }\n\n      try {\n        const data = await transactionService.getTransactions(projectId)\n        setTransactions(data)\n      } catch (error) {\n        console.error('Error loading transactions:', error)\n        setTransactions([])\n      } finally {\n        setIsLoading(false)\n      }\n    }\n\n    loadTransactions()\n  }, [projectId])\n\n  // Subscribe to real-time updates\n  useEffect(() => {\n    if (!projectId) return\n\n    const unsubscribe = transactionService.subscribeToTransactions(projectId, (updatedTransactions) => {\n      setTransactions(updatedTransactions)\n    })\n\n    return unsubscribe\n  }, [projectId])\n\n  // Clean up any unwanted icons from transaction type badges\n  useEffect(() => {\n    removeUnwantedIcons()\n    // Also run after a short delay to catch any dynamically added icons\n    const timer = setTimeout(removeUnwantedIcons, 100)\n    const timer2 = setTimeout(removeUnwantedIcons, 500)\n    return () => {\n      clearTimeout(timer)\n      clearTimeout(timer2)\n    }\n  }, [transactions])\n\n  if (isLoading) {\n    return (\n      <div className=\"flex justify-center items-center h-32\">\n        <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600\"></div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n        <h2 className=\"text-xl font-semibold text-gray-900\">Transactions</h2>\n        <Link\n          to={`/project/${projectId}/transaction/add`}\n          className=\"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 transition-colors duration-200 w-full sm:w-auto\"\n        >\n          <Plus className=\"h-4 w-4 mr-2\" />\n          Add Transaction\n        </Link>\n      </div>\n\n      {/* Transactions List */}\n      {transactions.length === 0 ? (\n        <div className=\"text-center py-12 px-4\">\n          <div className=\"mx-auto h-16 w-16 text-gray-400 mb-4\">🧾</div>\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n            No transactions yet\n          </h3>\n          <p className=\"text-sm text-gray-500 mb-6 max-w-sm mx-auto\">\n            Add your first transaction to track purchases and returns.\n          </p>\n          <Link\n            to={`/project/${projectId}/transaction/add`}\n            className=\"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 transition-colors duration-200 w-full sm:w-auto max-w-xs\"\n          >\n            <Plus className=\"h-5 w-5 mr-2\" />\n            Add Transaction\n          </Link>\n        </div>\n      ) : (\n        <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\n          <ul className=\"divide-y divide-gray-200\">\n            {transactions.map((transaction) => (\n              <li key={transaction.transaction_id} className=\"relative\">\n                <Link\n                  to={`/project/${projectId}/transaction/${transaction.transaction_id}`}\n                  className=\"block transition-colors duration-200 hover:bg-gray-50 active:bg-gray-100\"\n                >\n                  <div className=\"px-4 py-4 sm:px-6\">\n                    {/* Top row: Header with source and type */}\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <div className=\"flex items-center flex-wrap gap-2\">\n                        <h3 className=\"text-base font-medium text-gray-900\">\n                          {transaction.source}\n                        </h3>\n                        <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium no-icon ${\n                          transaction.transaction_type === 'Purchase'\n                            ? 'bg-green-100 text-green-800'\n                            : transaction.transaction_type === 'Return'\n                            ? 'bg-blue-100 text-blue-800'\n                            : 'bg-gray-100 text-gray-800'\n                        }`}>\n                          {transaction.transaction_type}\n                        </span>\n                      </div>\n                    </div>\n\n                    {/* Bottom row: Details */}\n                    <div className=\"space-y-2\">\n                      {/* Details row - Price, payment method, date */}\n                      <div className=\"flex items-center flex-wrap gap-x-4 gap-y-1 text-sm text-gray-500\">\n                        <span className=\"font-medium text-gray-700\">{formatCurrency(transaction.amount)}</span>\n                        <span className=\"hidden sm:inline\">•</span>\n                        <span className=\"font-medium text-gray-700 capitalize\">{transaction.payment_method}</span>\n                        <span className=\"hidden sm:inline\">•</span>\n                        <span className=\"font-medium text-gray-700\">{formatDate(transaction.transaction_date)}</span>\n                      </div>\n\n                      {/* Notes */}\n                      {transaction.notes && (\n                        <p className=\"text-sm text-gray-600 line-clamp-2\">\n                          {transaction.notes}\n                        </p>\n                      )}\n                    </div>\n\n                  </div>\n                </Link>\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </div>\n  )\n}\n","import { ArrowLeft, Package, FileText, Edit, Trash2 } from 'lucide-react'\nimport { Link, useParams, useNavigate, useSearchParams } from 'react-router-dom'\nimport { useState, useEffect } from 'react'\nimport { Project, Transaction } from '@/types'\nimport { projectService, transactionService } from '@/services/inventoryService'\nimport InventoryList from './InventoryList'\nimport TransactionsList from './TransactionsList'\nimport ProjectForm from '@/components/ProjectForm'\nimport BudgetProgress from '@/components/ui/BudgetProgress'\nimport { useToast } from '@/components/ui/ToastContext'\n\nexport default function ProjectDetail() {\n  const { id } = useParams<{ id: string }>()\n  const navigate = useNavigate()\n  const [searchParams, setSearchParams] = useSearchParams()\n  const [project, setProject] = useState<Project | null>(null)\n  const [transactions, setTransactions] = useState<Transaction[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [isEditing, setIsEditing] = useState(false)\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false)\n  const [isDeleting, setIsDeleting] = useState(false)\n  const { showError } = useToast()\n\n  // Get active tab from URL parameters, default to 'inventory'\n  const activeTab = searchParams.get('tab') || 'inventory'\n\n  // Update URL when tab changes\n  const handleTabChange = (tabId: string) => {\n    const newSearchParams = new URLSearchParams(searchParams)\n    newSearchParams.set('tab', tabId)\n    setSearchParams(newSearchParams)\n  }\n\n  const loadProjectAndTransactions = async () => {\n    if (!id) {\n      console.warn('No project ID provided, redirecting to projects')\n      navigate('/projects')\n      return\n    }\n\n    setIsLoading(true)\n\n    try {\n      console.log('Loading project data for ID:', id)\n      // Load project data\n      const projectData = await projectService.getProject(id)\n      if (projectData) {\n        console.log('Project loaded successfully:', projectData.name)\n        setProject(projectData)\n\n        // Load transactions for budget calculation\n        const transactionsData = await transactionService.getTransactions(id)\n        console.log('Transactions loaded:', transactionsData.length)\n        setTransactions(transactionsData)\n      } else {\n        console.warn('Project not found:', id)\n        // Project not found\n        navigate('/projects')\n      }\n    } catch (error) {\n      console.error('Error loading project:', error)\n      setError('Failed to load project. Please try again.')\n      setIsLoading(false)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    loadProjectAndTransactions()\n  }, [id, navigate])\n\n  // Retry function for failed loads\n  const retryLoadProject = () => {\n    setError(null)\n    loadProjectAndTransactions()\n  }\n\n  // Subscribe to real-time transaction updates\n  useEffect(() => {\n    if (!id) return\n\n    const unsubscribe = transactionService.subscribeToTransactions(id, (updatedTransactions) => {\n      setTransactions(updatedTransactions)\n    })\n\n    return unsubscribe\n  }, [id])\n\n  const handleEditProject = async (projectData: any) => {\n    if (!project || !id) return\n\n    try {\n      await projectService.updateProject(id, projectData)\n      // Reload project data\n      const updatedProject = await projectService.getProject(id)\n      setProject(updatedProject)\n      setIsEditing(false)\n    } catch (error) {\n      console.error('Error updating project:', error)\n      throw error // Let the form handle the error\n    }\n  }\n\n  const handleStartEdit = () => {\n    setIsEditing(true)\n  }\n\n  const handleCancelEdit = () => {\n    setIsEditing(false)\n  }\n\n  const handleShowDeleteConfirm = () => {\n    setShowDeleteConfirm(true)\n  }\n\n  const handleCancelDelete = () => {\n    setShowDeleteConfirm(false)\n  }\n\n  const handleDeleteProject = async () => {\n    if (!id) return\n\n    setIsDeleting(true)\n    try {\n      await projectService.deleteProject(id)\n      // Redirect to projects list after successful deletion\n      navigate('/projects')\n    } catch (error) {\n      console.error('Error deleting project:', error)\n      setIsDeleting(false)\n      setShowDeleteConfirm(false)\n      // Show error message to user\n      showError('Failed to delete project. Please try again.')\n    }\n  }\n\n  const tabs = [\n    { id: 'inventory', name: 'Inventory', icon: Package },\n    { id: 'transactions', name: 'Transactions', icon: FileText }\n  ]\n\n  if (isLoading) {\n    return (\n      <div className=\"flex justify-center items-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto\"></div>\n          <p className=\"mt-2 text-sm text-gray-600\">Loading project...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"mx-auto h-12 w-12 text-red-400\">⚠️</div>\n        <h3 className=\"mt-2 text-sm font-medium text-gray-900\">Error Loading Project</h3>\n        <p className=\"mt-1 text-sm text-gray-500\">{error}</p>\n        <div className=\"mt-6 flex justify-center space-x-3\">\n          <button\n            onClick={retryLoadProject}\n            className=\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700\"\n          >\n            Try Again\n          </button>\n          <Link\n            to=\"/projects\"\n            className=\"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Back to Projects\n          </Link>\n        </div>\n      </div>\n    )\n  }\n\n  if (!project) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"mx-auto h-12 w-12 text-gray-400\">📁</div>\n        <h3 className=\"mt-2 text-sm font-medium text-gray-900\">Project not found</h3>\n        <p className=\"mt-1 text-sm text-gray-500\">The project you're looking for doesn't exist.</p>\n        <div className=\"mt-6\">\n          <Link\n            to=\"/projects\"\n            className=\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Back to Projects\n          </Link>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"space-y-4\">\n        {/* Back button row */}\n        <div className=\"flex items-center justify-between\">\n          <Link\n            to=\"/projects\"\n            className=\"inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-1\" />\n            Back\n          </Link>\n          <div className=\"flex items-center space-x-3\">\n            <button\n              onClick={handleStartEdit}\n              className=\"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n            >\n              <Edit className=\"h-4 w-4 mr-2\" />\n              Edit\n            </button>\n            <button\n              onClick={handleShowDeleteConfirm}\n              className=\"inline-flex items-center px-3 py-2 border border-red-300 shadow-sm text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\"\n            >\n              <Trash2 className=\"h-4 w-4 mr-2\" />\n              Delete\n            </button>\n          </div>\n        </div>\n\n        {/* Project information */}\n        <div className=\"bg-white rounded-lg shadow p-6\">\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">{project.name}</h1>\n          {project.clientName && (\n            <p className=\"text-lg text-gray-600 mb-4\">{project.clientName}</p>\n          )}\n\n          {/* Budget Information */}\n          {(project.budget || project.designFee || (project.budgetCategories && Object.values(project.budgetCategories).some(v => v > 0))) && (\n            <div className=\"space-y-3\">\n              <div className=\"flex flex-wrap items-center gap-4\">\n                {project.budget && (\n                  <div className=\"flex items-center text-sm text-gray-600\">\n                    <span>Budget: {project.budget.toLocaleString('en-US', { style: 'currency', currency: 'USD' })}</span>\n                  </div>\n                )}\n                {project.designFee && (\n                  <div className=\"flex items-center text-sm text-gray-600\">\n                    <span>Design Fee: {project.designFee.toLocaleString('en-US', { style: 'currency', currency: 'USD' })}</span>\n                  </div>\n                )}\n              </div>\n\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Budget Progress */}\n      {project && (\n        <BudgetProgress\n          budget={project.budget}\n          designFee={project.designFee}\n          budgetCategories={project.budgetCategories}\n          transactions={transactions}\n        />\n      )}\n\n      {/* Tabs */}\n      <div className=\"bg-white shadow rounded-lg\">\n        <div className=\"border-b border-gray-200\">\n          <nav className=\"-mb-px flex space-x-8 px-6\">\n            {tabs.map((tab) => {\n              const Icon = tab.icon\n              return (\n                <button\n                  key={tab.id}\n                  onClick={() => handleTabChange(tab.id)}\n                  className={`py-4 px-1 border-b-2 font-medium text-sm flex items-center ${\n                    activeTab === tab.id\n                      ? 'border-primary-500 text-primary-600'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                  }`}\n                >\n                  <Icon className=\"h-4 w-4 mr-2\" />\n                  {tab.name}\n                </button>\n              )\n            })}\n          </nav>\n        </div>\n\n        {/* Tab Content */}\n        <div className=\"px-6 py-6\">\n          {activeTab === 'inventory' && (\n            <InventoryList projectId={project.id} projectName={project.name} />\n          )}\n          {activeTab === 'transactions' && (\n            <TransactionsList projectId={project.id} />\n          )}\n        </div>\n      </div>\n\n        {/* Project Edit Form */}\n        {isEditing && project && (\n          <ProjectForm\n            initialData={{\n              name: project.name,\n              description: project.description,\n              clientName: project.clientName,\n              budget: project.budget,\n              designFee: project.designFee,\n              budgetCategories: project.budgetCategories,\n            }}\n            onSubmit={handleEditProject}\n            onCancel={handleCancelEdit}\n          />\n        )}\n\n      {/* Delete Confirmation Dialog */}\n      {showDeleteConfirm && (\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\n          <div className=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\">\n            <div className=\"mt-3\">\n              {/* Header */}\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-medium text-gray-900\">\n                  Delete\n                </h3>\n                <button\n                  onClick={handleCancelDelete}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n\n              {/* Content */}\n              <div className=\"mt-2\">\n                <p className=\"text-sm text-gray-500 mb-4\">\n                  Are you sure you want to delete the project <strong>\"{project?.name}\"</strong>?\n                  This action cannot be undone and will permanently delete the project and all associated data.\n                </p>\n\n                {/* Warning about items and transactions */}\n                {project && project.metadata?.totalItems && project.metadata.totalItems > 0 && (\n                  <div className=\"bg-yellow-50 border border-yellow-200 rounded-md p-3 mb-4\">\n                    <div className=\"flex\">\n                      <div className=\"ml-3\">\n                        <h4 className=\"text-sm font-medium text-yellow-800\">\n                          Warning\n                        </h4>\n                        <div className=\"mt-1 text-sm text-yellow-700\">\n                          <p>This project contains {project.metadata.totalItems} item(s). Deleting the project will permanently remove all associated data.</p>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* Buttons */}\n                <div className=\"flex justify-end space-x-3\">\n                  <button\n                    onClick={handleCancelDelete}\n                    disabled={isDeleting}\n                    className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    onClick={handleDeleteProject}\n                    disabled={isDeleting}\n                    className=\"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50\"\n                  >\n                    {isDeleting ? 'Deleting...' : 'Delete'}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":["InventoryList","projectId","projectName","searchQuery","setSearchQuery","useState","selectedItems","setSelectedItems","items","setItems","loading","setLoading","error","setError","uploadingImages","setUploadingImages","showSuccess","showError","useToast","useEffect","realItems","itemService","unsubscribe","updatedItems","handleSelectAll","checked","item","handleSelectItem","itemId","newSelected","toggleBookmark","newBookmarkState","toggleDisposition","newDisposition","handleDeleteItem","prev","newSet","handleAddImage","files","ImageUploadService","i","file","processImageUpload","allFiles","newImage","message","handleBulkDelete","confirmMessage","deletePromises","filteredItems","jsxs","jsx","Link","Plus","Search","e","Printer","Trash2","RotateCcw","Bookmark","Camera","Fragment","removeUnwantedIcons","badge","child","TransactionsList","propProjectId","routeProjectId","useParams","transactions","setTransactions","isLoading","setIsLoading","data","transactionService","updatedTransactions","timer","timer2","transaction","formatCurrency","formatDate","ProjectDetail","id","navigate","useNavigate","searchParams","setSearchParams","useSearchParams","project","setProject","isEditing","setIsEditing","showDeleteConfirm","setShowDeleteConfirm","isDeleting","setIsDeleting","activeTab","handleTabChange","tabId","newSearchParams","loadProjectAndTransactions","projectData","projectService","transactionsData","retryLoadProject","handleEditProject","updatedProject","handleStartEdit","handleCancelEdit","handleShowDeleteConfirm","handleCancelDelete","handleDeleteProject","tabs","Package","FileText","ArrowLeft","Edit","v","BudgetProgress","tab","Icon","ProjectForm","_a"],"mappings":"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"}