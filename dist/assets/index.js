const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Projects.js","assets/vendor.js","assets/router.js","assets/inventoryService.js","assets/firebase.js","assets/BudgetProgress.js","assets/ui.js","assets/ItemDetail.js","assets/dateUtils.js","assets/imageService.js","assets/ImagePreview.js","assets/ProjectDetail.js","assets/AddItem.js","assets/transactionSources.js","assets/Select.js","assets/EditItem.js","assets/AddTransaction.js","assets/ImageUpload.js","assets/EditTransaction.js","assets/TransactionDetail.js","assets/Settings.js"])))=>i.map(i=>d[i]);
var mt=t=>{throw TypeError(t)};var Be=(t,e,n)=>e.has(t)||mt("Cannot "+n);var c=(t,e,n)=>(Be(t,e,"read from private field"),n?n.call(t):e.get(t)),w=(t,e,n)=>e.has(t)?mt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),p=(t,e,n,s)=>(Be(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),C=(t,e,n)=>(Be(t,e,"access private method"),n);var De=(t,e,n,s)=>({set _(r){p(t,e,r,n)},get _(){return c(t,e,s)}});import{r as v,a as Mn,b as Ln}from"./vendor.js";import{L as gt,O as qn,R as Un,a as M,B as $n}from"./router.js";import{r as Ne,_ as Me,C as Le,a as Qe,E as Wt,o as Qn,F as Yt,L as zn,g as Jt,i as Kn,b as Gn,v as Vn,c as yt,d as Hn,e as Bn,f as Wn,h as Yn,j as Jn,k as Xn,l as Zn,G as es,m as Re,s as Ze,T as ts,n as ns,p as ss,q as Xt,t as Zt,u as en,w as rs,x as is,y as as,z as os,A as wt,B as tn}from"./firebase.js";import{c as se,S as cs,L as us,a as ls,I as ds,A as hs,X as fs,C as ps,b as ms}from"./ui.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var nn={exports:{}},ze={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gs=v,ys=Symbol.for("react.element"),ws=Symbol.for("react.fragment"),vs=Object.prototype.hasOwnProperty,bs=gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xs={key:!0,ref:!0,__self:!0,__source:!0};function sn(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)vs.call(e,s)&&!xs.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:ys,type:t,key:i,ref:o,props:r,_owner:bs.current}}ze.Fragment=ws;ze.jsx=sn;ze.jsxs=sn;nn.exports=ze;var u=nn.exports,et={},vt=Mn;et.createRoot=vt.createRoot,et.hydrateRoot=vt.hydrateRoot;var Ke=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Is={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},W,at,Ut,As=(Ut=class{constructor(){w(this,W,Is);w(this,at,!1)}setTimeoutProvider(t){p(this,W,t)}setTimeout(t,e){return c(this,W).setTimeout(t,e)}clearTimeout(t){c(this,W).clearTimeout(t)}setInterval(t,e){return c(this,W).setInterval(t,e)}clearInterval(t){c(this,W).clearInterval(t)}},W=new WeakMap,at=new WeakMap,Ut),tt=new As;function Ts(t){setTimeout(t,0)}var Ge=typeof window>"u"||"Deno"in globalThis;function L(){}function Ss(t,e){return typeof t=="function"?t(e):t}function Es(t){return typeof t=="number"&&t>=0&&t!==1/0}function Ps(t,e){return Math.max(t+(e||0)-Date.now(),0)}function nt(t,e){return typeof t=="function"?t(e):t}function Cs(t,e){return typeof t=="function"?t(e):t}function bt(t,e){const{type:n="all",exact:s,fetchStatus:r,predicate:i,queryKey:o,stale:a}=t;if(o){if(s){if(e.queryHash!==ot(o,e.options))return!1}else if(!Ee(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||r&&r!==e.state.fetchStatus||i&&!i(e))}function xt(t,e){const{exact:n,status:s,predicate:r,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Se(e.options.mutationKey)!==Se(i))return!1}else if(!Ee(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||r&&!r(e))}function ot(t,e){return((e==null?void 0:e.queryKeyHashFn)||Se)(t)}function Se(t){return JSON.stringify(t,(e,n)=>st(n)?Object.keys(n).sort().reduce((s,r)=>(s[r]=n[r],s),{}):n)}function Ee(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Ee(t[n],e[n])):!1}var js=Object.prototype.hasOwnProperty;function rn(t,e){if(t===e)return t;const n=It(t)&&It(e);if(!n&&!(st(t)&&st(e)))return e;const r=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let h=0;h<o;h++){const y=n?h:i[h],d=t[y],m=e[y];if(d===m){a[y]=d,(n?h<r:js.call(t,y))&&l++;continue}if(d===null||m===null||typeof d!="object"||typeof m!="object"){a[y]=m;continue}const b=rn(d,m);a[y]=b,b===d&&l++}return r===o&&l===r?t:a}function It(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function st(t){if(!At(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!At(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function At(t){return Object.prototype.toString.call(t)==="[object Object]"}function Os(t){return new Promise(e=>{tt.setTimeout(e,t)})}function Rs(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?rn(t,e):e}function Fs(t,e,n=0){const s=[...t,e];return n&&s.length>n?s.slice(1):s}function Ds(t,e,n=0){const s=[e,...t];return n&&s.length>n?s.slice(0,-1):s}var ct=Symbol();function an(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ct?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var ie,Y,pe,$t,_s=($t=class extends Ke{constructor(){super();w(this,ie);w(this,Y);w(this,pe);p(this,pe,e=>{if(!Ge&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){c(this,Y)||this.setEventListener(c(this,pe))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,Y))==null||e.call(this),p(this,Y,void 0))}setEventListener(e){var n;p(this,pe,e),(n=c(this,Y))==null||n.call(this),p(this,Y,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){c(this,ie)!==e&&(p(this,ie,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof c(this,ie)=="boolean"?c(this,ie):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ie=new WeakMap,Y=new WeakMap,pe=new WeakMap,$t),on=new _s;function ks(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});n.status="pending",n.catch(()=>{});function s(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{s({status:"fulfilled",value:r}),t(r)},n.reject=r=>{s({status:"rejected",reason:r}),e(r)},n}var Ns=Ts;function Ms(){let t=[],e=0,n=a=>{a()},s=a=>{a()},r=Ns;const i=a=>{e?t.push(a):r(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&r(()=>{s(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{s=a},setScheduler:a=>{r=a}}}var R=Ms(),me,J,ge,Qt,Ls=(Qt=class extends Ke{constructor(){super();w(this,me,!0);w(this,J);w(this,ge);p(this,ge,e=>{if(!Ge&&window.addEventListener){const n=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){c(this,J)||this.setEventListener(c(this,ge))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,J))==null||e.call(this),p(this,J,void 0))}setEventListener(e){var n;p(this,ge,e),(n=c(this,J))==null||n.call(this),p(this,J,e(this.setOnline.bind(this)))}setOnline(e){c(this,me)!==e&&(p(this,me,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return c(this,me)}},me=new WeakMap,J=new WeakMap,ge=new WeakMap,Qt),qe=new Ls;function qs(t){return Math.min(1e3*2**t,3e4)}function cn(t){return(t??"online")==="online"?qe.isOnline():!0}var rt=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function un(t){let e=!1,n=0,s;const r=ks(),i=()=>r.status!=="pending",o=f=>{var I;if(!i()){const S=new rt(f);m(S),(I=t.onCancel)==null||I.call(t,S)}},a=()=>{e=!0},l=()=>{e=!1},h=()=>on.isFocused()&&(t.networkMode==="always"||qe.isOnline())&&t.canRun(),y=()=>cn(t.networkMode)&&t.canRun(),d=f=>{i()||(s==null||s(),r.resolve(f))},m=f=>{i()||(s==null||s(),r.reject(f))},b=()=>new Promise(f=>{var I;s=S=>{(i()||h())&&f(S)},(I=t.onPause)==null||I.call(t)}).then(()=>{var f;s=void 0,i()||(f=t.onContinue)==null||f.call(t)}),x=()=>{if(i())return;let f;const I=n===0?t.initialPromise:void 0;try{f=I??t.fn()}catch(S){f=Promise.reject(S)}Promise.resolve(f).then(d).catch(S=>{var N;if(i())return;const F=t.retry??(Ge?0:3),T=t.retryDelay??qs,g=typeof T=="function"?T(n,S):T,j=F===!0||typeof F=="number"&&n<F||typeof F=="function"&&F(n,S);if(e||!j){m(S);return}n++,(N=t.onFail)==null||N.call(t,n,S),Os(g).then(()=>h()?void 0:b()).then(()=>{e?m(S):x()})})};return{promise:r,status:()=>r.status,cancel:o,continue:()=>(s==null||s(),r),cancelRetry:a,continueRetry:l,canStart:y,start:()=>(y()?x():b().then(x),r)}}var ae,zt,ln=(zt=class{constructor(){w(this,ae)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Es(this.gcTime)&&p(this,ae,tt.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ge?1/0:5*60*1e3))}clearGcTimeout(){c(this,ae)&&(tt.clearTimeout(c(this,ae)),p(this,ae,void 0))}},ae=new WeakMap,zt),oe,ye,k,ce,P,Ce,ue,q,G,Kt,Us=(Kt=class extends ln{constructor(e){super();w(this,q);w(this,oe);w(this,ye);w(this,k);w(this,ce);w(this,P);w(this,Ce);w(this,ue);p(this,ue,!1),p(this,Ce,e.defaultOptions),this.setOptions(e.options),this.observers=[],p(this,ce,e.client),p(this,k,c(this,ce).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,p(this,oe,Tt(this.options)),this.state=e.state??c(this,oe),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=c(this,P))==null?void 0:e.promise}setOptions(e){if(this.options={...c(this,Ce),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Tt(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),p(this,oe,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&c(this,k).remove(this)}setData(e,n){const s=Rs(this.state.data,e,this.options);return C(this,q,G).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(e,n){C(this,q,G).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var s,r;const n=(s=c(this,P))==null?void 0:s.promise;return(r=c(this,P))==null||r.cancel(e),n?n.then(L).catch(L):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(c(this,oe))}isActive(){return this.observers.some(e=>Cs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ct||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>nt(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Ps(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=c(this,P))==null||n.continue()}onOnline(){var n;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=c(this,P))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),c(this,k).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(c(this,P)&&(c(this,ue)?c(this,P).cancel({revert:!0}):c(this,P).cancelRetry()),this.scheduleGc()),c(this,k).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||C(this,q,G).call(this,{type:"invalidate"})}async fetch(e,n){var l,h,y,d,m,b,x,f,I,S,F,T;if(this.state.fetchStatus!=="idle"&&((l=c(this,P))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(c(this,P))return c(this,P).continueRetry(),c(this,P).promise}if(e&&this.setOptions(e),!this.options.queryFn){const g=this.observers.find(j=>j.options.queryFn);g&&this.setOptions(g.options)}const s=new AbortController,r=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(p(this,ue,!0),s.signal)})},i=()=>{const g=an(this.options,n),N=(()=>{const te={client:c(this,ce),queryKey:this.queryKey,meta:this.meta};return r(te),te})();return p(this,ue,!1),this.options.persister?this.options.persister(g,N,this):g(N)},a=(()=>{const g={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:c(this,ce),state:this.state,fetchFn:i};return r(g),g})();(h=this.options.behavior)==null||h.onFetch(a,this),p(this,ye,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((y=a.fetchOptions)==null?void 0:y.meta))&&C(this,q,G).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta}),p(this,P,un({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:g=>{g instanceof rt&&g.revert&&this.setState({...c(this,ye),fetchStatus:"idle"}),s.abort()},onFail:(g,j)=>{C(this,q,G).call(this,{type:"failed",failureCount:g,error:j})},onPause:()=>{C(this,q,G).call(this,{type:"pause"})},onContinue:()=>{C(this,q,G).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const g=await c(this,P).start();if(g===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(g),(b=(m=c(this,k).config).onSuccess)==null||b.call(m,g,this),(f=(x=c(this,k).config).onSettled)==null||f.call(x,g,this.state.error,this),g}catch(g){if(g instanceof rt){if(g.silent)return c(this,P).promise;if(g.revert){if(this.state.data===void 0)throw g;return this.state.data}}throw C(this,q,G).call(this,{type:"error",error:g}),(S=(I=c(this,k).config).onError)==null||S.call(I,g,this),(T=(F=c(this,k).config).onSettled)==null||T.call(F,this.state.data,g,this),g}finally{this.scheduleGc()}}},oe=new WeakMap,ye=new WeakMap,k=new WeakMap,ce=new WeakMap,P=new WeakMap,Ce=new WeakMap,ue=new WeakMap,q=new WeakSet,G=function(e){const n=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...$s(s.data,this.options),fetchMeta:e.meta??null};case"success":const r={...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return p(this,ye,e.manual?r:void 0),r;case"error":const i=e.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=n(this.state),R.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),c(this,k).notify({query:this,type:"updated",action:e})})},Kt);function $s(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:cn(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Tt(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,s=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function St(t){return{onFetch:(e,n)=>{var y,d,m,b,x;const s=e.options,r=(m=(d=(y=e.fetchOptions)==null?void 0:y.meta)==null?void 0:d.fetchMore)==null?void 0:m.direction,i=((b=e.state.data)==null?void 0:b.pages)||[],o=((x=e.state.data)==null?void 0:x.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const h=async()=>{let f=!1;const I=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(e.signal.aborted?f=!0:e.signal.addEventListener("abort",()=>{f=!0}),e.signal)})},S=an(e.options,e.fetchOptions),F=async(T,g,j)=>{if(f)return Promise.reject();if(g==null&&T.pages.length)return Promise.resolve(T);const te=(()=>{const ne={client:e.client,queryKey:e.queryKey,pageParam:g,direction:j?"backward":"forward",meta:e.options.meta};return I(ne),ne})(),Fe=await S(te),{maxPages:Ae}=e.options,E=j?Ds:Fs;return{pages:E(T.pages,Fe,Ae),pageParams:E(T.pageParams,g,Ae)}};if(r&&i.length){const T=r==="backward",g=T?Qs:Et,j={pages:i,pageParams:o},N=g(s,j);a=await F(j,N,T)}else{const T=t??i.length;do{const g=l===0?o[0]??s.initialPageParam:Et(s,a);if(l>0&&g==null)break;a=await F(a,g),l++}while(l<T)}return a};e.options.persister?e.fetchFn=()=>{var f,I;return(I=(f=e.options).persister)==null?void 0:I.call(f,h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=h}}}function Et(t,{pages:e,pageParams:n}){const s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,n[s],n):void 0}function Qs(t,{pages:e,pageParams:n}){var s;return e.length>0?(s=t.getPreviousPageParam)==null?void 0:s.call(t,e[0],e,n[0],n):void 0}var je,Q,O,le,z,B,Gt,zs=(Gt=class extends ln{constructor(e){super();w(this,z);w(this,je);w(this,Q);w(this,O);w(this,le);p(this,je,e.client),this.mutationId=e.mutationId,p(this,O,e.mutationCache),p(this,Q,[]),this.state=e.state||Ks(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){c(this,Q).includes(e)||(c(this,Q).push(e),this.clearGcTimeout(),c(this,O).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){p(this,Q,c(this,Q).filter(n=>n!==e)),this.scheduleGc(),c(this,O).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){c(this,Q).length||(this.state.status==="pending"?this.scheduleGc():c(this,O).remove(this))}continue(){var e;return((e=c(this,le))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,h,y,d,m,b,x,f,I,S,F,T,g,j,N,te,Fe,Ae;const n=()=>{C(this,z,B).call(this,{type:"continue"})},s={client:c(this,je),meta:this.options.meta,mutationKey:this.options.mutationKey};p(this,le,un({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(E,ne)=>{C(this,z,B).call(this,{type:"failed",failureCount:E,error:ne})},onPause:()=>{C(this,z,B).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>c(this,O).canRun(this)}));const r=this.state.status==="pending",i=!c(this,le).canStart();try{if(r)n();else{C(this,z,B).call(this,{type:"pending",variables:e,isPaused:i}),await((a=(o=c(this,O).config).onMutate)==null?void 0:a.call(o,e,this,s));const ne=await((h=(l=this.options).onMutate)==null?void 0:h.call(l,e,s));ne!==this.state.context&&C(this,z,B).call(this,{type:"pending",context:ne,variables:e,isPaused:i})}const E=await c(this,le).start();return await((d=(y=c(this,O).config).onSuccess)==null?void 0:d.call(y,E,e,this.state.context,this,s)),await((b=(m=this.options).onSuccess)==null?void 0:b.call(m,E,e,this.state.context,s)),await((f=(x=c(this,O).config).onSettled)==null?void 0:f.call(x,E,null,this.state.variables,this.state.context,this,s)),await((S=(I=this.options).onSettled)==null?void 0:S.call(I,E,null,e,this.state.context,s)),C(this,z,B).call(this,{type:"success",data:E}),E}catch(E){try{throw await((T=(F=c(this,O).config).onError)==null?void 0:T.call(F,E,e,this.state.context,this,s)),await((j=(g=this.options).onError)==null?void 0:j.call(g,E,e,this.state.context,s)),await((te=(N=c(this,O).config).onSettled)==null?void 0:te.call(N,void 0,E,this.state.variables,this.state.context,this,s)),await((Ae=(Fe=this.options).onSettled)==null?void 0:Ae.call(Fe,void 0,E,e,this.state.context,s)),E}finally{C(this,z,B).call(this,{type:"error",error:E})}}finally{c(this,O).runNext(this)}}},je=new WeakMap,Q=new WeakMap,O=new WeakMap,le=new WeakMap,z=new WeakSet,B=function(e){const n=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),R.batch(()=>{c(this,Q).forEach(s=>{s.onMutationUpdate(e)}),c(this,O).notify({mutation:this,type:"updated",action:e})})},Gt);function Ks(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var V,U,Oe,Vt,Gs=(Vt=class extends Ke{constructor(e={}){super();w(this,V);w(this,U);w(this,Oe);this.config=e,p(this,V,new Set),p(this,U,new Map),p(this,Oe,0)}build(e,n,s){const r=new zs({client:e,mutationCache:this,mutationId:++De(this,Oe)._,options:e.defaultMutationOptions(n),state:s});return this.add(r),r}add(e){c(this,V).add(e);const n=_e(e);if(typeof n=="string"){const s=c(this,U).get(n);s?s.push(e):c(this,U).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(c(this,V).delete(e)){const n=_e(e);if(typeof n=="string"){const s=c(this,U).get(n);if(s)if(s.length>1){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}else s[0]===e&&c(this,U).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=_e(e);if(typeof n=="string"){const s=c(this,U).get(n),r=s==null?void 0:s.find(i=>i.state.status==="pending");return!r||r===e}else return!0}runNext(e){var s;const n=_e(e);if(typeof n=="string"){const r=(s=c(this,U).get(n))==null?void 0:s.find(i=>i!==e&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){R.batch(()=>{c(this,V).forEach(e=>{this.notify({type:"removed",mutation:e})}),c(this,V).clear(),c(this,U).clear()})}getAll(){return Array.from(c(this,V))}find(e){const n={exact:!0,...e};return this.getAll().find(s=>xt(n,s))}findAll(e={}){return this.getAll().filter(n=>xt(e,n))}notify(e){R.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return R.batch(()=>Promise.all(e.map(n=>n.continue().catch(L))))}},V=new WeakMap,U=new WeakMap,Oe=new WeakMap,Vt);function _e(t){var e;return(e=t.options.scope)==null?void 0:e.id}var K,Ht,Vs=(Ht=class extends Ke{constructor(e={}){super();w(this,K);this.config=e,p(this,K,new Map)}build(e,n,s){const r=n.queryKey,i=n.queryHash??ot(r,n);let o=this.get(i);return o||(o=new Us({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(n),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){c(this,K).has(e.queryHash)||(c(this,K).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=c(this,K).get(e.queryHash);n&&(e.destroy(),n===e&&c(this,K).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){R.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return c(this,K).get(e)}getAll(){return[...c(this,K).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(s=>bt(n,s))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(s=>bt(e,s)):n}notify(e){R.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){R.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){R.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},K=new WeakMap,Ht),A,X,Z,we,ve,ee,be,xe,Bt,Hs=(Bt=class{constructor(t={}){w(this,A);w(this,X);w(this,Z);w(this,we);w(this,ve);w(this,ee);w(this,be);w(this,xe);p(this,A,t.queryCache||new Vs),p(this,X,t.mutationCache||new Gs),p(this,Z,t.defaultOptions||{}),p(this,we,new Map),p(this,ve,new Map),p(this,ee,0)}mount(){De(this,ee)._++,c(this,ee)===1&&(p(this,be,on.subscribe(async t=>{t&&(await this.resumePausedMutations(),c(this,A).onFocus())})),p(this,xe,qe.subscribe(async t=>{t&&(await this.resumePausedMutations(),c(this,A).onOnline())})))}unmount(){var t,e;De(this,ee)._--,c(this,ee)===0&&((t=c(this,be))==null||t.call(this),p(this,be,void 0),(e=c(this,xe))==null||e.call(this),p(this,xe,void 0))}isFetching(t){return c(this,A).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return c(this,X).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=c(this,A).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=c(this,A).build(this,e),s=n.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(nt(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(t){return c(this,A).findAll(t).map(({queryKey:e,state:n})=>{const s=n.data;return[e,s]})}setQueryData(t,e,n){const s=this.defaultQueryOptions({queryKey:t}),r=c(this,A).get(s.queryHash),i=r==null?void 0:r.state.data,o=Ss(e,i);if(o!==void 0)return c(this,A).build(this,s).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return R.batch(()=>c(this,A).findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=c(this,A).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=c(this,A);R.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=c(this,A);return R.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},s=R.batch(()=>c(this,A).findAll(t).map(r=>r.cancel(n)));return Promise.all(s).then(L).catch(L)}invalidateQueries(t,e={}){return R.batch(()=>(c(this,A).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},s=R.batch(()=>c(this,A).findAll(t).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,n);return n.throwOnError||(i=i.catch(L)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(L)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=c(this,A).build(this,e);return n.isStaleByTime(nt(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(L).catch(L)}fetchInfiniteQuery(t){return t.behavior=St(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(L).catch(L)}ensureInfiniteQueryData(t){return t.behavior=St(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return qe.isOnline()?c(this,X).resumePausedMutations():Promise.resolve()}getQueryCache(){return c(this,A)}getMutationCache(){return c(this,X)}getDefaultOptions(){return c(this,Z)}setDefaultOptions(t){p(this,Z,t)}setQueryDefaults(t,e){c(this,we).set(Se(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...c(this,we).values()],n={};return e.forEach(s=>{Ee(t,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(t,e){c(this,ve).set(Se(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...c(this,ve).values()],n={};return e.forEach(s=>{Ee(t,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...c(this,Z).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=ot(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ct&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...c(this,Z).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){c(this,A).clear(),c(this,X).clear()}},A=new WeakMap,X=new WeakMap,Z=new WeakMap,we=new WeakMap,ve=new WeakMap,ee=new WeakMap,be=new WeakMap,xe=new WeakMap,Bt),Bs=v.createContext(void 0),Ws=({client:t,children:e})=>(v.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),u.jsx(Bs.Provider,{value:t,children:e}));const Ys="modulepreload",Js=function(t){return"/"+t},Pt={},H=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=Js(l),l in Pt)return;Pt[l]=!0;const h=l.endsWith(".css"),y=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${y}`))return;const d=document.createElement("link");if(d.rel=h?"stylesheet":Ys,h||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),h)return new Promise((m,b)=>{d.addEventListener("load",m),d.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},dn="@firebase/installations",ut="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn=1e4,fn=`w:${ut}`,pn="FIS_v2",Xs="https://firebaseinstallations.googleapis.com/v1",Zs=60*60*1e3,er="installations",tr="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},de=new Wt(er,tr,nr);function mn(t){return t instanceof Yt&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn({projectId:t}){return`${Xs}/projects/${t}/installations`}function yn(t){return{token:t.token,requestStatus:2,expiresIn:rr(t.expiresIn),creationTime:Date.now()}}async function wn(t,e){const s=(await e.json()).error;return de.create("request-failed",{requestName:t,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function vn({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function sr(t,{refreshToken:e}){const n=vn(t);return n.append("Authorization",ir(e)),n}async function bn(t){const e=await t();return e.status>=500&&e.status<600?t():e}function rr(t){return Number(t.replace("s","000"))}function ir(t){return`${pn} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ar({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const s=gn(t),r=vn(t),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&r.append("x-firebase-client",h)}const o={fid:n,authVersion:pn,appId:t.appId,sdkVersion:fn},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await bn(()=>fetch(s,a));if(l.ok){const h=await l.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:yn(h.authToken)}}else throw await wn("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr=/^[cdef][\w-]{21}$/,it="";function ur(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=lr(t);return cr.test(n)?n:it}catch{return it}}function lr(t){return or(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new Map;function An(t,e){const n=Ve(t);Tn(n,e),dr(n,e)}function Tn(t,e){const n=In.get(t);if(n)for(const s of n)s(e)}function dr(t,e){const n=hr();n&&n.postMessage({key:t,fid:e}),fr()}let re=null;function hr(){return!re&&"BroadcastChannel"in self&&(re=new BroadcastChannel("[Firebase] FID Change"),re.onmessage=t=>{Tn(t.data.key,t.data.fid)}),re}function fr(){In.size===0&&re&&(re.close(),re=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr="firebase-installations-database",mr=1,he="firebase-installations-store";let We=null;function lt(){return We||(We=Qn(pr,mr,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(he)}}})),We}async function Ue(t,e){const n=Ve(t),r=(await lt()).transaction(he,"readwrite"),i=r.objectStore(he),o=await i.get(n);return await i.put(e,n),await r.done,(!o||o.fid!==e.fid)&&An(t,e.fid),e}async function Sn(t){const e=Ve(t),s=(await lt()).transaction(he,"readwrite");await s.objectStore(he).delete(e),await s.done}async function He(t,e){const n=Ve(t),r=(await lt()).transaction(he,"readwrite"),i=r.objectStore(he),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await r.done,a&&(!o||o.fid!==a.fid)&&An(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dt(t){let e;const n=await He(t.appConfig,s=>{const r=gr(s),i=yr(t,r);return e=i.registrationPromise,i.installationEntry});return n.fid===it?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function gr(t){const e=t||{fid:ur(),registrationStatus:0};return En(e)}function yr(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(de.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=wr(t,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:vr(t)}:{installationEntry:e}}async function wr(t,e){try{const n=await ar(t,e);return Ue(t.appConfig,n)}catch(n){throw mn(n)&&n.customData.serverCode===409?await Sn(t.appConfig):await Ue(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function vr(t){let e=await Ct(t.appConfig);for(;e.registrationStatus===1;)await xn(100),e=await Ct(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await dt(t);return s||n}return e}function Ct(t){return He(t,e=>{if(!e)throw de.create("installation-not-found");return En(e)})}function En(t){return br(t)?{fid:t.fid,registrationStatus:0}:t}function br(t){return t.registrationStatus===1&&t.registrationTime+hn<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xr({appConfig:t,heartbeatServiceProvider:e},n){const s=Ir(t,n),r=sr(t,n),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&r.append("x-firebase-client",h)}const o={installation:{sdkVersion:fn,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await bn(()=>fetch(s,a));if(l.ok){const h=await l.json();return yn(h)}else throw await wn("Generate Auth Token",l)}function Ir(t,{fid:e}){return`${gn(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ht(t,e=!1){let n;const s=await He(t.appConfig,i=>{if(!Pn(i))throw de.create("not-registered");const o=i.authToken;if(!e&&Sr(o))return i;if(o.requestStatus===1)return n=Ar(t,e),i;{if(!navigator.onLine)throw de.create("app-offline");const a=Pr(i);return n=Tr(t,a),a}});return n?await n:s.authToken}async function Ar(t,e){let n=await jt(t.appConfig);for(;n.authToken.requestStatus===1;)await xn(100),n=await jt(t.appConfig);const s=n.authToken;return s.requestStatus===0?ht(t,e):s}function jt(t){return He(t,e=>{if(!Pn(e))throw de.create("not-registered");const n=e.authToken;return Cr(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Tr(t,e){try{const n=await xr(t,e),s=Object.assign(Object.assign({},e),{authToken:n});return await Ue(t.appConfig,s),n}catch(n){if(mn(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Sn(t.appConfig);else{const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Ue(t.appConfig,s)}throw n}}function Pn(t){return t!==void 0&&t.registrationStatus===2}function Sr(t){return t.requestStatus===2&&!Er(t)}function Er(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Zs}function Pr(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Cr(t){return t.requestStatus===1&&t.requestTime+hn<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jr(t){const e=t,{installationEntry:n,registrationPromise:s}=await dt(e);return s?s.catch(console.error):ht(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Or(t,e=!1){const n=t;return await Rr(n),(await ht(n,e)).token}async function Rr(t){const{registrationPromise:e}=await dt(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t){if(!t||!t.options)throw Ye("App Configuration");if(!t.name)throw Ye("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Ye(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Ye(t){return de.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="installations",Dr="installations-internal",_r=t=>{const e=t.getProvider("app").getImmediate(),n=Fr(e),s=Qe(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},kr=t=>{const e=t.getProvider("app").getImmediate(),n=Qe(e,Cn).getImmediate();return{getId:()=>jr(n),getToken:r=>Or(n,r)}};function Nr(){Me(new Le(Cn,_r,"PUBLIC")),Me(new Le(Dr,kr,"PRIVATE"))}Nr();Ne(dn,ut);Ne(dn,ut,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e="analytics",Mr="firebase_id",Lr="origin",qr=60*1e3,Ur="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ft="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D=new zn("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},_=new Wt("analytics","Analytics",$r);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(t){if(!t.startsWith(ft)){const e=_.create("invalid-gtag-resource",{gtagURL:t});return D.warn(e.message),""}return t}function jn(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function zr(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function Kr(t,e){const n=zr("firebase-js-sdk-policy",{createScriptURL:Qr}),s=document.createElement("script"),r=`${ft}?l=${t}&id=${e}`;s.src=n?n==null?void 0:n.createScriptURL(r):r,s.async=!0,document.head.appendChild(s)}function Gr(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Vr(t,e,n,s,r,i){const o=s[r];try{if(o)await e[o];else{const l=(await jn(n)).find(h=>h.measurementId===r);l&&await e[l.appId]}}catch(a){D.error(a)}t("config",r,i)}async function Hr(t,e,n,s,r){try{let i=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=await jn(n);for(const l of o){const h=a.find(d=>d.measurementId===l),y=h&&e[h.appId];if(y)i.push(y);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",s,r||{})}catch(i){D.error(i)}}function Br(t,e,n,s){async function r(i,...o){try{if(i==="event"){const[a,l]=o;await Hr(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await Vr(t,e,n,s,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,h]=o;t("get",a,l,h)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){D.error(a)}}return r}function Wr(t,e,n,s,r){let i=function(...o){window[s].push(arguments)};return window[r]&&typeof window[r]=="function"&&(i=window[r]),window[r]=Br(i,t,e,n),{gtagCore:i,wrappedGtag:window[r]}}function Yr(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(ft)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=30,Xr=1e3;class Zr{constructor(e={},n=Xr){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const On=new Zr;function ei(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function ti(t){var e;const{appId:n,apiKey:s}=t,r={method:"GET",headers:ei(s)},i=Ur.replace("{app-id}",n),o=await fetch(i,r);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw _.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function ni(t,e=On,n){const{appId:s,apiKey:r,measurementId:i}=t.options;if(!s)throw _.create("no-app-id");if(!r){if(i)return{measurementId:i,appId:s};throw _.create("no-api-key")}const o=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new ii;return setTimeout(async()=>{a.abort()},qr),Rn({appId:s,apiKey:r,measurementId:i},o,a,e)}async function Rn(t,{throttleEndTimeMillis:e,backoffCount:n},s,r=On){var i;const{appId:o,measurementId:a}=t;try{await si(s,e)}catch(l){if(a)return D.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await ti(t);return r.deleteThrottleMetadata(o),l}catch(l){const h=l;if(!ri(h)){if(r.deleteThrottleMetadata(o),a)return D.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:o,measurementId:a};throw l}const y=Number((i=h==null?void 0:h.customData)===null||i===void 0?void 0:i.httpStatus)===503?yt(n,r.intervalMillis,Jr):yt(n,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+y,backoffCount:n+1};return r.setThrottleMetadata(o,d),D.debug(`Calling attemptFetch again in ${y} millis`),Rn(t,d,s,r)}}function si(t,e){return new Promise((n,s)=>{const r=Math.max(e-Date.now(),0),i=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(i),s(_.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function ri(t){if(!(t instanceof Yt)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class ii{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function ai(t,e,n,s,r){if(r&&r.global){t("event",n,s);return}else{const i=await e,o=Object.assign(Object.assign({},s),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oi(){if(Gn())try{await Vn()}catch(t){return D.warn(_.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return D.warn(_.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function ci(t,e,n,s,r,i,o){var a;const l=ni(t);l.then(b=>{n[b.measurementId]=b.appId,t.options.measurementId&&b.measurementId!==t.options.measurementId&&D.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${b.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(b=>D.error(b)),e.push(l);const h=oi().then(b=>{if(b)return s.getId()}),[y,d]=await Promise.all([l,h]);Yr(i)||Kr(i,y.measurementId),r("js",new Date);const m=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return m[Lr]="firebase",m.update=!0,d!=null&&(m[Mr]=d),r("config",y.measurementId,m),y.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.app=e}_delete(){return delete Te[this.app.options.appId],Promise.resolve()}}let Te={},Ot=[];const Rt={};let Je="dataLayer",li="gtag",Ft,Fn,Dt=!1;function di(){const t=[];if(Kn()&&t.push("This is a browser extension environment."),Wn()||t.push("Cookies are not available."),t.length>0){const e=t.map((s,r)=>`(${r+1}) ${s}`).join(" "),n=_.create("invalid-analytics-context",{errorInfo:e});D.warn(n.message)}}function hi(t,e,n){di();const s=t.options.appId;if(!s)throw _.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)D.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw _.create("no-api-key");if(Te[s]!=null)throw _.create("already-exists",{id:s});if(!Dt){Gr(Je);const{wrappedGtag:i,gtagCore:o}=Wr(Te,Ot,Rt,Je,li);Fn=i,Ft=o,Dt=!0}return Te[s]=ci(t,Ot,Rt,e,Ft,Je,n),new ui(t)}function fi(t=Hn()){t=Jt(t);const e=Qe(t,$e);return e.isInitialized()?e.getImmediate():pi(t)}function pi(t,e={}){const n=Qe(t,$e);if(n.isInitialized()){const r=n.getImmediate();if(Bn(e,n.getOptions()))return r;throw _.create("already-initialized")}return n.initialize({options:e})}function mi(t,e,n,s){t=Jt(t),ai(Fn,Te[t.app.options.appId],e,n,s).catch(r=>D.error(r))}const _t="@firebase/analytics",kt="0.10.8";function gi(){Me(new Le($e,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return hi(s,r,n)},"PUBLIC")),Me(new Le("analytics-internal",t,"PRIVATE")),Ne(_t,kt),Ne(_t,kt,"esm2017");function t(e){try{const n=e.getProvider($e).getImmediate();return{logEvent:(s,r,i)=>mi(n,s,r,i)}}catch(n){throw _.create("interop-component-reg-failed",{reason:n})}}}gi();var Pe=(t=>(t.OWNER="owner",t.ADMIN="admin",t.DESIGNER="designer",t.VIEWER="viewer",t))(Pe||{}),yi=(t=>(t.DESIGN_FEE="Design Fee",t.FURNISHINGS="Furnishings",t.PROPERTY_MANAGEMENT="Property Management",t.KITCHEN="Kitchen",t.INSTALL="Install",t.STORAGE_RECEIVING="Storage & Receiving",t.FUEL="Fuel",t))(yi||{});const wi={apiKey:"AIzaSyCk3y7jgkkKlNOOdyMr1X-M0-Npyxcae_U",authDomain:"inventory-management-090999.firebaseapp.com",projectId:"inventory-management-090999",storageBucket:"inventory-management-090999.firebasestorage.app",messagingSenderId:"438790134101",appId:"1:438790134101:web:3aaa1ff1f9b426cb5277dc",measurementId:"G-K1BSF601RY"},vi=async()=>{if(typeof window<"u")try{const t=[];for(let e=0;e<localStorage.length;e++){const n=localStorage.key(e);n&&n.includes("firebase")&&!n.includes("firebase:authUser:")&&!n.includes("firebaseLocalStorageDb")&&t.push(n)}t.length>0&&(t.forEach(e=>localStorage.removeItem(e)),console.log("Cleared non-auth Firebase cache entries:",t.length)),console.log("✅ Preserved Firebase Auth persistence data - users will stay logged in")}catch(t){console.warn("Error managing Firebase cache (auth persistence preserved):",t)}},Ie=Yn(wi),fe=Jn(Ie),$=Xn(Ie),Zi=Zn(Ie),Nt=()=>Ie!==null&&typeof Ie=="object",bi=async()=>{typeof window<"u"&&await vi()},xi=async()=>{var t;if(typeof window<"u")try{if(await new Promise(n=>setTimeout(n,200)),!Nt())throw new Error("Firebase app is not properly initialized");await ns($,ss),console.log("✅ Firebase Auth persistence set to LOCAL - users will stay logged in INDEFINITELY across browser sessions"),console.log("🔧 Current auth state:",{ready:Nt(),currentUser:$!=null&&$.currentUser?"authenticated":"not authenticated",persistence:"localStorage (indefinite)"});const e=(t=$.settings)==null?void 0:t.persistence;console.log("🔍 Auth persistence verification:",e)}catch(e){console.error("❌ Error setting Firebase Auth persistence:",e),console.warn("⚠️ Auth persistence may not work correctly - users might need to re-authenticate on page reload")}};typeof window<"u"&&fi(Ie);if(typeof window<"u")try{console.log("Firestore initialized with offline persistence enabled by default")}catch(t){console.warn("Error configuring Firestore offline persistence:",t)}const Ii=t=>{if(t instanceof ts)return t.toDate();if(t instanceof Date)return t;if(typeof t=="string"){const e=t.trim();if(/^\d{4}-\d{2}-\d{2}$/.test(e)){const[n,s,r]=e.split("-").map(Number);return new Date(n,s-1,r)}return new Date(t)}if(typeof t=="number")return new Date(t);if(!t)return new Date;try{return new Date(t)}catch(e){return console.warn("Failed to convert timestamp to date:",t,e),new Date}},ea=t=>{if(!t||typeof t!="object")return t;const e={...t},n=["createdAt","updatedAt","lastActivity","uploadedAt","generatedAt","lastScanned"],s=i=>{if(!i||typeof i!="object")return i;const o={...i};return Array.isArray(o)?o.map(a=>s(a)):(n.forEach(a=>{o[a]&&(o[a]=Ii(o[a]))}),Object.keys(o).forEach(a=>{o[a]&&typeof o[a]=="object"&&(Array.isArray(o[a])?o[a]=o[a].map(l=>s(l)):o[a]=s(o[a]))}),o)};return s(e)},Ai=async()=>new Promise((t,e)=>{const n=$.onAuthStateChanged(s=>{n(),t(s)});setTimeout(()=>{n(),e(new Error("Authentication state check timeout"))},5e3)}),ta=async()=>{try{console.log("Ensuring authentication for storage operations...");const t=await Ai();if(!t){console.warn("No authenticated user found for storage operations");return}try{if(!await t.getIdToken()){console.warn("User authenticated but no valid token, attempting refresh...");try{await t.reload(),await t.getIdToken()||console.warn("Token refresh failed, but proceeding with current auth state")}catch(n){console.warn("Token refresh error:",n)}}}catch(e){console.warn("Token verification error:",e)}console.log("Storage authentication check completed for user:",t.uid)}catch(t){console.error("Error during storage authentication check:",t)}},Dn=new es;Dn.setCustomParameters({prompt:"select_account"});const Ti=async()=>{try{const e=(await as($,Dn)).user;return await ke(e),e}catch(t){throw console.error("Google sign-in error:",t),t}},Si=async()=>{try{await is($)}catch(t){throw console.error("Sign-out error:",t),t}},ke=async t=>{var e;try{const n=Re(fe,"users",t.uid),s=await Xt(n),r={id:t.uid,email:t.email||"",displayName:t.displayName||((e=t.email)==null?void 0:e.split("@")[0])||"User",lastLogin:new Date};if(s.exists())await Ze(n,r,{merge:!0});else{let i=Pe.VIEWER;if(t.email){const a=await Ei(t.email);if(a)i=a.role,await Pi(a.invitationId),console.log("User invited with role:",i);else{const l=Zt(fe,"users");(await en(l)).empty&&(i=Pe.OWNER)}}const o={...r,role:i,createdAt:new Date,lastLogin:new Date};await Ze(n,o)}}catch(n){throw console.error("Error creating/updating user document:",n),n}},na=async(t,e,n)=>{try{const s=`${t.replace("@","_").replace(".","_")}_${Date.now()}`,r=Re(fe,"invitations",s);await Ze(r,{email:t,role:e,invitedBy:n,status:"pending",createdAt:new Date,expiresAt:new Date(Date.now()+7*24*60*60*1e3)}),console.log("Invitation created for:",t)}catch(s){throw console.error("Error creating invitation:",s),s}},Ei=async t=>{try{const e=Zt(fe,"invitations"),n=os(e,wt("email","==",t),wt("status","==","pending")),s=await en(n);if(!s.empty){const r=s.docs[0].data(),i=s.docs[0].id;return r.expiresAt.toDate()<new Date?(await tn(Re(fe,"invitations",i),{status:"expired"}),null):{role:r.role,invitationId:i}}return null}catch(e){return console.error("Error checking invitation:",e),null}},Pi=async t=>{try{await tn(Re(fe,"invitations",t),{status:"accepted",acceptedAt:new Date}),console.log("Invitation accepted:",t)}catch(e){throw console.error("Error accepting invitation:",e),e}},Ci=async t=>{try{const e=await Xt(Re(fe,"users",t));return e.exists()?e.data():null}catch(e){return console.error("Error fetching user data:",e),null}},ji=t=>rs($,t),Xe=async()=>{const t=$.currentUser;if(!t)return{firebaseUser:null,appUser:null};const e=await Ci(t.uid);return{firebaseUser:t,appUser:e}},_n=v.createContext(void 0);function Oi({children:t}){const[e,n]=v.useState(null),[s,r]=v.useState(null),[i,o]=v.useState(!0);v.useEffect(()=>{let d=!0,m=null;return(async()=>{try{await bi(),console.log("🔥 Firebase initialized (auth persistence preserved)"),await xi(),console.log("🔐 Auth persistence set to localStorage (indefinite)")}catch(f){console.error("❌ Failed to initialize Firebase/auth persistence:",f)}await new Promise(f=>setTimeout(f,300));const x=$.currentUser;if(console.log("🔍 Current Firebase user from localStorage:",{exists:!!x,email:(x==null?void 0:x.email)||"none",uid:(x==null?void 0:x.uid)||"none",source:"localStorage persistence"}),x){n(x);try{await ke(x);const{appUser:f}=await Xe();r(f),f!=null&&f.email&&console.log("✅ User restored from localStorage persistence:",f.email)}catch(f){console.error("❌ Error loading user from localStorage:",f),r(null),n(null)}}return m=ji(async f=>{if(console.log("🔄 AuthContext: Auth state changed:",{hasUser:!!f,email:(f==null?void 0:f.email)||"none",uid:(f==null?void 0:f.uid)||"none",isInitialLoad:d,source:d?"initial load":"auth change"}),d&&f&&x&&f.uid===x.uid){console.log("⏭️ Skipping duplicate initial auth state from localStorage"),o(!1),d=!1;return}if(n(f),f)try{await ke(f);const{appUser:I}=await Xe();r(I),I!=null&&I.email&&console.log("✅ Auth state change - user authenticated:",I.email)}catch(I){console.error("❌ Error loading authenticated user:",I),r(null)}else console.log("🚪 User signed out or auth cleared"),r(null);d&&(o(!1),d=!1)}),m})(),()=>{m&&m()}},[]);const y={firebaseUser:e,user:s,loading:i,signIn:async()=>{try{o(!0);const d=await Ti();await ke(d);const{appUser:m}=await Xe();r(m)}catch(d){throw console.error("Sign in error:",d),d}finally{o(!1)}},signOut:async()=>{try{o(!0),await Si()}catch(d){throw console.error("Sign out error:",d),d}finally{o(!1)}},isAuthenticated:!!e,hasRole:d=>(s==null?void 0:s.role)===d||(s==null?void 0:s.role)===Pe.OWNER||(s==null?void 0:s.role)===Pe.ADMIN};return u.jsx(_n.Provider,{value:y,children:t})}function pt(){const t=v.useContext(_n);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function kn({variant:t="primary",size:e="md",className:n,children:s,...r}){const i="inline-flex items-center justify-center font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",o={primary:"text-white bg-primary-600 hover:bg-primary-700 focus:ring-primary-500 border border-transparent",secondary:"text-gray-700 bg-white hover:bg-gray-50 focus:ring-primary-500 border border-gray-300",danger:"text-white bg-red-600 hover:bg-red-700 focus:ring-red-500 border border-transparent"},a={sm:"px-3 py-2 text-sm rounded-md",md:"px-4 py-2 text-sm rounded-md",lg:"px-6 py-3 text-base rounded-md"},l=se(i,o[t],a[e],n);return u.jsx("button",{className:l,...r,children:s})}function Ri(){const{user:t,signOut:e,loading:n}=pt();return u.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:u.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex h-16 justify-between items-center flex-wrap gap-2",children:[u.jsx("div",{className:"flex items-center",children:u.jsx(gt,{to:"/",className:"text-xl font-bold text-gray-900",children:"1584 Design Projects"})}),u.jsx("div",{className:"flex items-center",children:t&&u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(gt,{to:"/settings",className:"flex items-center text-sm text-gray-700 hover:text-gray-900",title:"Settings",children:u.jsx(cs,{className:"h-4 w-4"})}),u.jsx(kn,{variant:"secondary",size:"sm",onClick:e,disabled:n,className:"flex items-center",title:"Sign Out",children:u.jsx(us,{className:"h-4 w-4"})})]})})]})})})}function Fi({children:t}){return u.jsx("div",{className:"min-h-screen bg-gray-50",children:u.jsxs("div",{className:"flex flex-col",children:[u.jsx(Ri,{}),u.jsx("main",{className:"flex-1 py-6",children:u.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:t||u.jsx(qn,{})})})]})})}function Di({size:t="md",className:e}){const n={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return u.jsx("div",{className:se("flex items-center justify-center",e),children:u.jsx(ls,{className:se("animate-spin text-primary-600",n[t])})})}const _i={success:ps,error:fs,warning:hs,info:ds},ki={success:{container:"bg-green-50 border-green-200",icon:"text-green-400",text:"text-green-800",button:"text-green-400 hover:bg-green-100"},error:{container:"bg-red-50 border-red-200",icon:"text-red-400",text:"text-red-800",button:"text-red-400 hover:bg-red-100"},warning:{container:"bg-yellow-50 border-yellow-200",icon:"text-yellow-400",text:"text-yellow-800",button:"text-yellow-400 hover:bg-yellow-100"},info:{container:"bg-blue-50 border-blue-200",icon:"text-blue-400",text:"text-blue-800",button:"text-blue-400 hover:bg-blue-100"}};function Ni({toast:t,onClose:e}){const[n,s]=v.useState(!1),[r,i]=v.useState(!1),o=_i[t.type],a=ki[t.type];v.useEffect(()=>{s(!0);const h=t.duration||(t.type==="error"?6e3:4e3),y=setTimeout(()=>{l()},h);return()=>clearTimeout(y)},[t.duration,t.type]);const l=()=>{i(!0),setTimeout(()=>{e(t.id)},300)};return u.jsxs("div",{className:se("flex items-center justify-between p-4 mb-3 border rounded-lg shadow-sm transition-all duration-300 transform",a.container,n&&!r?"translate-x-0 opacity-100":"-translate-x-full opacity-0"),children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(o,{className:se("h-5 w-5 mr-3 flex-shrink-0",a.icon)}),u.jsx("p",{className:se("text-sm font-medium",a.text),children:t.message})]}),u.jsx("button",{onClick:l,className:se("ml-4 inline-flex rounded-md p-1.5 transition-colors duration-200",a.button),children:u.jsx(ms,{className:"h-4 w-4"})})]})}const Nn=v.createContext(void 0);function sa(){const t=v.useContext(Nn);if(t===void 0)throw new Error("useToast must be used within a ToastProvider");return t}function Mi({children:t}){const[e,n]=v.useState([]),s=()=>Math.random().toString(36).substr(2,9),r=v.useCallback((d,m,b)=>{const x=s(),f={id:x,message:d,type:m,duration:b};return n(I=>[...I,f]),setTimeout(()=>{h(x)},(b||(m==="error"?6e3:4e3))+300),x},[]),i=v.useCallback((d,m)=>r(d,"success",m),[r]),o=v.useCallback((d,m)=>r(d,"error",m),[r]),a=v.useCallback((d,m)=>r(d,"warning",m),[r]),l=v.useCallback((d,m)=>r(d,"info",m),[r]),h=v.useCallback(d=>{n(m=>m.filter(b=>b.id!==d))},[]),y={showToast:r,showSuccess:i,showError:o,showWarning:a,showInfo:l,removeToast:h};return u.jsxs(Nn.Provider,{value:y,children:[t,u.jsx("div",{className:"fixed top-4 right-4 z-50 min-w-96 max-w-sm",children:e.map(d=>u.jsx(Ni,{toast:d,onClose:h},d.id))})]})}function Mt({onSuccess:t}){const{signIn:e,loading:n}=pt(),[s,r]=v.useState(""),i=async()=>{try{r(""),await e(),t==null||t()}catch(o){console.error("Login error:",o),r("Failed to sign in. Please try again.")}};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"max-w-md w-full",children:[u.jsxs("div",{className:"-mt-8",children:[u.jsx("div",{className:"mx-auto h-56 w-56 flex items-center justify-center",children:u.jsx("img",{src:"/logo.png",alt:"1584 Design Projects Logo",className:"h-full w-full object-contain"})}),u.jsx("h2",{className:"text-center text-3xl font-extrabold text-gray-900",children:"1584 Design Projects"}),u.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to access your inventory and transaction management system"})]}),u.jsxs("div",{className:"mt-8 space-y-6",children:[s&&u.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:u.jsx("div",{className:"text-sm text-red-600",children:s})}),u.jsx("div",{children:u.jsxs(kn,{onClick:i,disabled:n,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",children:[u.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),u.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),u.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),u.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),n?"Signing in...":"Continue with Google"]})})]})]})})}function Li({children:t}){const{isAuthenticated:e,loading:n,user:s}=pt();return console.log("🛡️ ProtectedRoute:",{isAuthenticated:e,loading:n,hasUser:!!s,userEmail:(s==null?void 0:s.email)||"none"}),n?(console.log("⏳ ProtectedRoute: Still loading..."),u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})})):e?s!=null&&s.email?(console.log("✅ ProtectedRoute: Access granted"),u.jsx(u.Fragment,{children:t})):(console.log("🚫 ProtectedRoute: No user email, showing login"),u.jsx(Mt,{})):(console.log("🚫 ProtectedRoute: Not authenticated, showing login"),u.jsx(Mt,{}))}function qi(){return u.jsx(Oi,{children:u.jsx(Mi,{children:u.jsx(Li,{children:u.jsx(Fi,{children:u.jsx(v.Suspense,{fallback:u.jsx(Di,{}),children:u.jsxs(Un,{children:[u.jsx(M,{path:"/",element:u.jsx(Lt,{})}),u.jsx(M,{path:"/projects",element:u.jsx(Lt,{})}),u.jsx(M,{path:"/settings",element:u.jsx(Vi,{})}),u.jsx(M,{path:"/item/:id",element:u.jsx(qt,{})}),u.jsx(M,{path:"/project/:id",element:u.jsx(Ui,{})}),u.jsx(M,{path:"/project/:id/item/:itemId",element:u.jsx(qt,{})}),u.jsx(M,{path:"/project/:id/item/add",element:u.jsx($i,{})}),u.jsx(M,{path:"/project/:id/edit-item/:itemId",element:u.jsx(Qi,{})}),u.jsx(M,{path:"/project/:id/transaction/add",element:u.jsx(zi,{})}),u.jsx(M,{path:"/project/:id/transaction/:transactionId/edit",element:u.jsx(Ki,{})}),u.jsx(M,{path:"/project/:id/transaction/:transactionId",element:u.jsx(Gi,{})})]})})})})})})}const Lt=v.lazy(()=>H(()=>import("./Projects.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),qt=v.lazy(()=>H(()=>import("./ItemDetail.js"),__vite__mapDeps([7,1,2,8,3,4,9,10,6]))),Ui=v.lazy(()=>H(()=>import("./ProjectDetail.js"),__vite__mapDeps([11,2,1,3,4,9,6,8,5]))),$i=v.lazy(()=>H(()=>import("./AddItem.js"),__vite__mapDeps([12,2,1,3,4,9,13,14,6,10]))),Qi=v.lazy(()=>H(()=>import("./EditItem.js"),__vite__mapDeps([15,2,1,3,4,13,14,6]))),zi=v.lazy(()=>H(()=>import("./AddTransaction.js"),__vite__mapDeps([16,2,1,13,3,4,9,17,6,10]))),Ki=v.lazy(()=>H(()=>import("./EditTransaction.js"),__vite__mapDeps([18,2,1,13,3,4,9,17,6]))),Gi=v.lazy(()=>H(()=>import("./TransactionDetail.js"),__vite__mapDeps([19,1,10,6,2,3,4,9,8]))),Vi=v.lazy(()=>H(()=>import("./Settings.js"),__vite__mapDeps([20,1,14,6,4,2]))),Hi=new Hs({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1}}});et.createRoot(document.getElementById("root")).render(u.jsx(Ln.StrictMode,{children:u.jsx(Ws,{client:Hi,children:u.jsx($n,{children:u.jsx(qi,{})})})}));export{yi as B,Pe as U,sa as a,kn as b,ea as c,fe as d,ta as e,na as f,u as j,Zi as s,pt as u};
//# sourceMappingURL=index.js.map
