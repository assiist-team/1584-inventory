const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Projects.js","assets/vendor.js","assets/router.js","assets/inventoryService.js","assets/firebase.js","assets/BudgetProgress.js","assets/ui.js","assets/ItemDetail.js","assets/dateUtils.js","assets/imageService.js","assets/ImagePreview.js","assets/ImageGallery.js","assets/ProjectDetail.js","assets/AddItem.js","assets/transactionSources.js","assets/EditItem.js","assets/AddTransaction.js","assets/TransactionItemsList.js","assets/EditTransaction.js","assets/TransactionDetail.js","assets/Settings.js"])))=>i.map(i=>d[i]);
var pt=t=>{throw TypeError(t)};var He=(t,e,n)=>e.has(t)||pt("Cannot "+n);var c=(t,e,n)=>(He(t,e,"read from private field"),n?n.call(t):e.get(t)),g=(t,e,n)=>e.has(t)?pt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),f=(t,e,n,s)=>(He(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),C=(t,e,n)=>(He(t,e,"access private method"),n);var De=(t,e,n,s)=>({set _(r){f(t,e,r,n)},get _(){return c(t,e,s)}});import{r as w,a as Nn,b as Mn}from"./vendor.js";import{L as mt,O as Ln,R as qn,a as M,B as Un}from"./router.js";import{r as _e,_ as ke,C as Ne,a as Ue,E as Bt,o as $n,F as Wt,L as Qn,g as Yt,i as Kn,b as Gn,v as zn,c as yt,d as Vn,e as Hn,f as Bn,h as Wn,j as Yn,k as Jn,l as Xn,s as Zn,G as es,m as Oe,n as Je,T as ts,p as ns,q as ss,t as rs,u as Jt,w as Xt,x as Zt,y as is,z as gt,A as en,B as as}from"./firebase.js";import{c as ne,S as os,L as cs,a as us,I as ls,A as ds,X as hs,C as fs,b as ps}from"./ui.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var tn={exports:{}},$e={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ms=w,ys=Symbol.for("react.element"),gs=Symbol.for("react.fragment"),vs=Object.prototype.hasOwnProperty,ws=ms.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bs={key:!0,ref:!0,__self:!0,__source:!0};function nn(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)vs.call(e,s)&&!bs.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:ys,type:t,key:i,ref:o,props:r,_owner:ws.current}}$e.Fragment=gs;$e.jsx=nn;$e.jsxs=nn;tn.exports=$e;var u=tn.exports,Xe={},vt=Nn;Xe.createRoot=vt.createRoot,Xe.hydrateRoot=vt.hydrateRoot;var Qe=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},xs={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},B,it,qt,Is=(qt=class{constructor(){g(this,B,xs);g(this,it,!1)}setTimeoutProvider(t){f(this,B,t)}setTimeout(t,e){return c(this,B).setTimeout(t,e)}clearTimeout(t){c(this,B).clearTimeout(t)}setInterval(t,e){return c(this,B).setInterval(t,e)}clearInterval(t){c(this,B).clearInterval(t)}},B=new WeakMap,it=new WeakMap,qt),Ze=new Is;function Ts(t){setTimeout(t,0)}var Ke=typeof window>"u"||"Deno"in globalThis;function L(){}function As(t,e){return typeof t=="function"?t(e):t}function Ss(t){return typeof t=="number"&&t>=0&&t!==1/0}function Es(t,e){return Math.max(t+(e||0)-Date.now(),0)}function et(t,e){return typeof t=="function"?t(e):t}function js(t,e){return typeof t=="function"?t(e):t}function wt(t,e){const{type:n="all",exact:s,fetchStatus:r,predicate:i,queryKey:o,stale:a}=t;if(o){if(s){if(e.queryHash!==at(o,e.options))return!1}else if(!Se(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||r&&r!==e.state.fetchStatus||i&&!i(e))}function bt(t,e){const{exact:n,status:s,predicate:r,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Ae(e.options.mutationKey)!==Ae(i))return!1}else if(!Se(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||r&&!r(e))}function at(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ae)(t)}function Ae(t){return JSON.stringify(t,(e,n)=>tt(n)?Object.keys(n).sort().reduce((s,r)=>(s[r]=n[r],s),{}):n)}function Se(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Se(t[n],e[n])):!1}var Cs=Object.prototype.hasOwnProperty;function sn(t,e){if(t===e)return t;const n=xt(t)&&xt(e);if(!n&&!(tt(t)&&tt(e)))return e;const r=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let h=0;h<o;h++){const y=n?h:i[h],d=t[y],m=e[y];if(d===m){a[y]=d,(n?h<r:Cs.call(t,y))&&l++;continue}if(d===null||m===null||typeof d!="object"||typeof m!="object"){a[y]=m;continue}const v=sn(d,m);a[y]=v,v===d&&l++}return r===o&&l===r?t:a}function xt(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function tt(t){if(!It(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!It(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function It(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ps(t){return new Promise(e=>{Ze.setTimeout(e,t)})}function Os(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?sn(t,e):e}function Rs(t,e,n=0){const s=[...t,e];return n&&s.length>n?s.slice(1):s}function Ds(t,e,n=0){const s=[e,...t];return n&&s.length>n?s.slice(0,-1):s}var ot=Symbol();function rn(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ot?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var re,W,fe,Ut,Fs=(Ut=class extends Qe{constructor(){super();g(this,re);g(this,W);g(this,fe);f(this,fe,e=>{if(!Ke&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){c(this,W)||this.setEventListener(c(this,fe))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,W))==null||e.call(this),f(this,W,void 0))}setEventListener(e){var n;f(this,fe,e),(n=c(this,W))==null||n.call(this),f(this,W,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){c(this,re)!==e&&(f(this,re,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof c(this,re)=="boolean"?c(this,re):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},re=new WeakMap,W=new WeakMap,fe=new WeakMap,Ut),an=new Fs;function _s(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});n.status="pending",n.catch(()=>{});function s(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{s({status:"fulfilled",value:r}),t(r)},n.reject=r=>{s({status:"rejected",reason:r}),e(r)},n}var ks=Ts;function Ns(){let t=[],e=0,n=a=>{a()},s=a=>{a()},r=ks;const i=a=>{e?t.push(a):r(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&r(()=>{s(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{s=a},setScheduler:a=>{r=a}}}var R=Ns(),pe,Y,me,$t,Ms=($t=class extends Qe{constructor(){super();g(this,pe,!0);g(this,Y);g(this,me);f(this,me,e=>{if(!Ke&&window.addEventListener){const n=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){c(this,Y)||this.setEventListener(c(this,me))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,Y))==null||e.call(this),f(this,Y,void 0))}setEventListener(e){var n;f(this,me,e),(n=c(this,Y))==null||n.call(this),f(this,Y,e(this.setOnline.bind(this)))}setOnline(e){c(this,pe)!==e&&(f(this,pe,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return c(this,pe)}},pe=new WeakMap,Y=new WeakMap,me=new WeakMap,$t),Me=new Ms;function Ls(t){return Math.min(1e3*2**t,3e4)}function on(t){return(t??"online")==="online"?Me.isOnline():!0}var nt=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function cn(t){let e=!1,n=0,s;const r=_s(),i=()=>r.status!=="pending",o=b=>{var A;if(!i()){const S=new nt(b);m(S),(A=t.onCancel)==null||A.call(t,S)}},a=()=>{e=!0},l=()=>{e=!1},h=()=>an.isFocused()&&(t.networkMode==="always"||Me.isOnline())&&t.canRun(),y=()=>on(t.networkMode)&&t.canRun(),d=b=>{i()||(s==null||s(),r.resolve(b))},m=b=>{i()||(s==null||s(),r.reject(b))},v=()=>new Promise(b=>{var A;s=S=>{(i()||h())&&b(S)},(A=t.onPause)==null||A.call(t)}).then(()=>{var b;s=void 0,i()||(b=t.onContinue)==null||b.call(t)}),x=()=>{if(i())return;let b;const A=n===0?t.initialPromise:void 0;try{b=A??t.fn()}catch(S){b=Promise.reject(S)}Promise.resolve(b).then(d).catch(S=>{var N;if(i())return;const D=t.retry??(Ke?0:3),T=t.retryDelay??Ls,p=typeof T=="function"?T(n,S):T,P=D===!0||typeof D=="number"&&n<D||typeof D=="function"&&D(n,S);if(e||!P){m(S);return}n++,(N=t.onFail)==null||N.call(t,n,S),Ps(p).then(()=>h()?void 0:v()).then(()=>{e?m(S):x()})})};return{promise:r,status:()=>r.status,cancel:o,continue:()=>(s==null||s(),r),cancelRetry:a,continueRetry:l,canStart:y,start:()=>(y()?x():v().then(x),r)}}var ie,Qt,un=(Qt=class{constructor(){g(this,ie)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ss(this.gcTime)&&f(this,ie,Ze.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ke?1/0:5*60*1e3))}clearGcTimeout(){c(this,ie)&&(Ze.clearTimeout(c(this,ie)),f(this,ie,void 0))}},ie=new WeakMap,Qt),ae,ye,k,oe,j,je,ce,q,G,Kt,qs=(Kt=class extends un{constructor(e){super();g(this,q);g(this,ae);g(this,ye);g(this,k);g(this,oe);g(this,j);g(this,je);g(this,ce);f(this,ce,!1),f(this,je,e.defaultOptions),this.setOptions(e.options),this.observers=[],f(this,oe,e.client),f(this,k,c(this,oe).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,f(this,ae,Tt(this.options)),this.state=e.state??c(this,ae),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=c(this,j))==null?void 0:e.promise}setOptions(e){if(this.options={...c(this,je),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Tt(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),f(this,ae,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&c(this,k).remove(this)}setData(e,n){const s=Os(this.state.data,e,this.options);return C(this,q,G).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(e,n){C(this,q,G).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var s,r;const n=(s=c(this,j))==null?void 0:s.promise;return(r=c(this,j))==null||r.cancel(e),n?n.then(L).catch(L):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(c(this,ae))}isActive(){return this.observers.some(e=>js(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ot||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>et(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Es(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=c(this,j))==null||n.continue()}onOnline(){var n;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=c(this,j))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),c(this,k).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(c(this,j)&&(c(this,ce)?c(this,j).cancel({revert:!0}):c(this,j).cancelRetry()),this.scheduleGc()),c(this,k).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||C(this,q,G).call(this,{type:"invalidate"})}async fetch(e,n){var l,h,y,d,m,v,x,b,A,S,D,T;if(this.state.fetchStatus!=="idle"&&((l=c(this,j))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(c(this,j))return c(this,j).continueRetry(),c(this,j).promise}if(e&&this.setOptions(e),!this.options.queryFn){const p=this.observers.find(P=>P.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,r=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(f(this,ce,!0),s.signal)})},i=()=>{const p=rn(this.options,n),N=(()=>{const ee={client:c(this,oe),queryKey:this.queryKey,meta:this.meta};return r(ee),ee})();return f(this,ce,!1),this.options.persister?this.options.persister(p,N,this):p(N)},a=(()=>{const p={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:c(this,oe),state:this.state,fetchFn:i};return r(p),p})();(h=this.options.behavior)==null||h.onFetch(a,this),f(this,ye,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((y=a.fetchOptions)==null?void 0:y.meta))&&C(this,q,G).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta}),f(this,j,cn({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:p=>{p instanceof nt&&p.revert&&this.setState({...c(this,ye),fetchStatus:"idle"}),s.abort()},onFail:(p,P)=>{C(this,q,G).call(this,{type:"failed",failureCount:p,error:P})},onPause:()=>{C(this,q,G).call(this,{type:"pause"})},onContinue:()=>{C(this,q,G).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const p=await c(this,j).start();if(p===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(p),(v=(m=c(this,k).config).onSuccess)==null||v.call(m,p,this),(b=(x=c(this,k).config).onSettled)==null||b.call(x,p,this.state.error,this),p}catch(p){if(p instanceof nt){if(p.silent)return c(this,j).promise;if(p.revert){if(this.state.data===void 0)throw p;return this.state.data}}throw C(this,q,G).call(this,{type:"error",error:p}),(S=(A=c(this,k).config).onError)==null||S.call(A,p,this),(T=(D=c(this,k).config).onSettled)==null||T.call(D,this.state.data,p,this),p}finally{this.scheduleGc()}}},ae=new WeakMap,ye=new WeakMap,k=new WeakMap,oe=new WeakMap,j=new WeakMap,je=new WeakMap,ce=new WeakMap,q=new WeakSet,G=function(e){const n=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Us(s.data,this.options),fetchMeta:e.meta??null};case"success":const r={...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return f(this,ye,e.manual?r:void 0),r;case"error":const i=e.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=n(this.state),R.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),c(this,k).notify({query:this,type:"updated",action:e})})},Kt);function Us(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:on(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Tt(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,s=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function At(t){return{onFetch:(e,n)=>{var y,d,m,v,x;const s=e.options,r=(m=(d=(y=e.fetchOptions)==null?void 0:y.meta)==null?void 0:d.fetchMore)==null?void 0:m.direction,i=((v=e.state.data)==null?void 0:v.pages)||[],o=((x=e.state.data)==null?void 0:x.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const h=async()=>{let b=!1;const A=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(e.signal.aborted?b=!0:e.signal.addEventListener("abort",()=>{b=!0}),e.signal)})},S=rn(e.options,e.fetchOptions),D=async(T,p,P)=>{if(b)return Promise.reject();if(p==null&&T.pages.length)return Promise.resolve(T);const ee=(()=>{const te={client:e.client,queryKey:e.queryKey,pageParam:p,direction:P?"backward":"forward",meta:e.options.meta};return A(te),te})(),Re=await S(ee),{maxPages:Ie}=e.options,E=P?Ds:Rs;return{pages:E(T.pages,Re,Ie),pageParams:E(T.pageParams,p,Ie)}};if(r&&i.length){const T=r==="backward",p=T?$s:St,P={pages:i,pageParams:o},N=p(s,P);a=await D(P,N,T)}else{const T=t??i.length;do{const p=l===0?o[0]??s.initialPageParam:St(s,a);if(l>0&&p==null)break;a=await D(a,p),l++}while(l<T)}return a};e.options.persister?e.fetchFn=()=>{var b,A;return(A=(b=e.options).persister)==null?void 0:A.call(b,h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=h}}}function St(t,{pages:e,pageParams:n}){const s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,n[s],n):void 0}function $s(t,{pages:e,pageParams:n}){var s;return e.length>0?(s=t.getPreviousPageParam)==null?void 0:s.call(t,e[0],e,n[0],n):void 0}var Ce,$,O,ue,Q,H,Gt,Qs=(Gt=class extends un{constructor(e){super();g(this,Q);g(this,Ce);g(this,$);g(this,O);g(this,ue);f(this,Ce,e.client),this.mutationId=e.mutationId,f(this,O,e.mutationCache),f(this,$,[]),this.state=e.state||Ks(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){c(this,$).includes(e)||(c(this,$).push(e),this.clearGcTimeout(),c(this,O).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){f(this,$,c(this,$).filter(n=>n!==e)),this.scheduleGc(),c(this,O).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){c(this,$).length||(this.state.status==="pending"?this.scheduleGc():c(this,O).remove(this))}continue(){var e;return((e=c(this,ue))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,h,y,d,m,v,x,b,A,S,D,T,p,P,N,ee,Re,Ie;const n=()=>{C(this,Q,H).call(this,{type:"continue"})},s={client:c(this,Ce),meta:this.options.meta,mutationKey:this.options.mutationKey};f(this,ue,cn({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(E,te)=>{C(this,Q,H).call(this,{type:"failed",failureCount:E,error:te})},onPause:()=>{C(this,Q,H).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>c(this,O).canRun(this)}));const r=this.state.status==="pending",i=!c(this,ue).canStart();try{if(r)n();else{C(this,Q,H).call(this,{type:"pending",variables:e,isPaused:i}),await((a=(o=c(this,O).config).onMutate)==null?void 0:a.call(o,e,this,s));const te=await((h=(l=this.options).onMutate)==null?void 0:h.call(l,e,s));te!==this.state.context&&C(this,Q,H).call(this,{type:"pending",context:te,variables:e,isPaused:i})}const E=await c(this,ue).start();return await((d=(y=c(this,O).config).onSuccess)==null?void 0:d.call(y,E,e,this.state.context,this,s)),await((v=(m=this.options).onSuccess)==null?void 0:v.call(m,E,e,this.state.context,s)),await((b=(x=c(this,O).config).onSettled)==null?void 0:b.call(x,E,null,this.state.variables,this.state.context,this,s)),await((S=(A=this.options).onSettled)==null?void 0:S.call(A,E,null,e,this.state.context,s)),C(this,Q,H).call(this,{type:"success",data:E}),E}catch(E){try{throw await((T=(D=c(this,O).config).onError)==null?void 0:T.call(D,E,e,this.state.context,this,s)),await((P=(p=this.options).onError)==null?void 0:P.call(p,E,e,this.state.context,s)),await((ee=(N=c(this,O).config).onSettled)==null?void 0:ee.call(N,void 0,E,this.state.variables,this.state.context,this,s)),await((Ie=(Re=this.options).onSettled)==null?void 0:Ie.call(Re,void 0,E,e,this.state.context,s)),E}finally{C(this,Q,H).call(this,{type:"error",error:E})}}finally{c(this,O).runNext(this)}}},Ce=new WeakMap,$=new WeakMap,O=new WeakMap,ue=new WeakMap,Q=new WeakSet,H=function(e){const n=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),R.batch(()=>{c(this,$).forEach(s=>{s.onMutationUpdate(e)}),c(this,O).notify({mutation:this,type:"updated",action:e})})},Gt);function Ks(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var z,U,Pe,zt,Gs=(zt=class extends Qe{constructor(e={}){super();g(this,z);g(this,U);g(this,Pe);this.config=e,f(this,z,new Set),f(this,U,new Map),f(this,Pe,0)}build(e,n,s){const r=new Qs({client:e,mutationCache:this,mutationId:++De(this,Pe)._,options:e.defaultMutationOptions(n),state:s});return this.add(r),r}add(e){c(this,z).add(e);const n=Fe(e);if(typeof n=="string"){const s=c(this,U).get(n);s?s.push(e):c(this,U).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(c(this,z).delete(e)){const n=Fe(e);if(typeof n=="string"){const s=c(this,U).get(n);if(s)if(s.length>1){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}else s[0]===e&&c(this,U).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Fe(e);if(typeof n=="string"){const s=c(this,U).get(n),r=s==null?void 0:s.find(i=>i.state.status==="pending");return!r||r===e}else return!0}runNext(e){var s;const n=Fe(e);if(typeof n=="string"){const r=(s=c(this,U).get(n))==null?void 0:s.find(i=>i!==e&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){R.batch(()=>{c(this,z).forEach(e=>{this.notify({type:"removed",mutation:e})}),c(this,z).clear(),c(this,U).clear()})}getAll(){return Array.from(c(this,z))}find(e){const n={exact:!0,...e};return this.getAll().find(s=>bt(n,s))}findAll(e={}){return this.getAll().filter(n=>bt(e,n))}notify(e){R.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return R.batch(()=>Promise.all(e.map(n=>n.continue().catch(L))))}},z=new WeakMap,U=new WeakMap,Pe=new WeakMap,zt);function Fe(t){var e;return(e=t.options.scope)==null?void 0:e.id}var K,Vt,zs=(Vt=class extends Qe{constructor(e={}){super();g(this,K);this.config=e,f(this,K,new Map)}build(e,n,s){const r=n.queryKey,i=n.queryHash??at(r,n);let o=this.get(i);return o||(o=new qs({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(n),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){c(this,K).has(e.queryHash)||(c(this,K).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=c(this,K).get(e.queryHash);n&&(e.destroy(),n===e&&c(this,K).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){R.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return c(this,K).get(e)}getAll(){return[...c(this,K).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(s=>wt(n,s))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(s=>wt(e,s)):n}notify(e){R.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){R.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){R.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},K=new WeakMap,Vt),I,J,X,ge,ve,Z,we,be,Ht,Vs=(Ht=class{constructor(t={}){g(this,I);g(this,J);g(this,X);g(this,ge);g(this,ve);g(this,Z);g(this,we);g(this,be);f(this,I,t.queryCache||new zs),f(this,J,t.mutationCache||new Gs),f(this,X,t.defaultOptions||{}),f(this,ge,new Map),f(this,ve,new Map),f(this,Z,0)}mount(){De(this,Z)._++,c(this,Z)===1&&(f(this,we,an.subscribe(async t=>{t&&(await this.resumePausedMutations(),c(this,I).onFocus())})),f(this,be,Me.subscribe(async t=>{t&&(await this.resumePausedMutations(),c(this,I).onOnline())})))}unmount(){var t,e;De(this,Z)._--,c(this,Z)===0&&((t=c(this,we))==null||t.call(this),f(this,we,void 0),(e=c(this,be))==null||e.call(this),f(this,be,void 0))}isFetching(t){return c(this,I).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return c(this,J).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=c(this,I).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=c(this,I).build(this,e),s=n.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(et(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(t){return c(this,I).findAll(t).map(({queryKey:e,state:n})=>{const s=n.data;return[e,s]})}setQueryData(t,e,n){const s=this.defaultQueryOptions({queryKey:t}),r=c(this,I).get(s.queryHash),i=r==null?void 0:r.state.data,o=As(e,i);if(o!==void 0)return c(this,I).build(this,s).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return R.batch(()=>c(this,I).findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=c(this,I).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=c(this,I);R.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=c(this,I);return R.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},s=R.batch(()=>c(this,I).findAll(t).map(r=>r.cancel(n)));return Promise.all(s).then(L).catch(L)}invalidateQueries(t,e={}){return R.batch(()=>(c(this,I).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},s=R.batch(()=>c(this,I).findAll(t).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,n);return n.throwOnError||(i=i.catch(L)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(L)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=c(this,I).build(this,e);return n.isStaleByTime(et(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(L).catch(L)}fetchInfiniteQuery(t){return t.behavior=At(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(L).catch(L)}ensureInfiniteQueryData(t){return t.behavior=At(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Me.isOnline()?c(this,J).resumePausedMutations():Promise.resolve()}getQueryCache(){return c(this,I)}getMutationCache(){return c(this,J)}getDefaultOptions(){return c(this,X)}setDefaultOptions(t){f(this,X,t)}setQueryDefaults(t,e){c(this,ge).set(Ae(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...c(this,ge).values()],n={};return e.forEach(s=>{Se(t,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(t,e){c(this,ve).set(Ae(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...c(this,ve).values()],n={};return e.forEach(s=>{Se(t,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...c(this,X).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=at(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ot&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...c(this,X).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){c(this,I).clear(),c(this,J).clear()}},I=new WeakMap,J=new WeakMap,X=new WeakMap,ge=new WeakMap,ve=new WeakMap,Z=new WeakMap,we=new WeakMap,be=new WeakMap,Ht),Hs=w.createContext(void 0),Bs=({client:t,children:e})=>(w.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),u.jsx(Hs.Provider,{value:t,children:e}));const Ws="modulepreload",Ys=function(t){return"/"+t},Et={},V=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=Ys(l),l in Et)return;Et[l]=!0;const h=l.endsWith(".css"),y=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${y}`))return;const d=document.createElement("link");if(d.rel=h?"stylesheet":Ws,h||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),h)return new Promise((m,v)=>{d.addEventListener("load",m),d.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},ln="@firebase/installations",ct="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn=1e4,hn=`w:${ct}`,fn="FIS_v2",Js="https://firebaseinstallations.googleapis.com/v1",Xs=60*60*1e3,Zs="installations",er="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},le=new Bt(Zs,er,tr);function pn(t){return t instanceof Wt&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn({projectId:t}){return`${Js}/projects/${t}/installations`}function yn(t){return{token:t.token,requestStatus:2,expiresIn:sr(t.expiresIn),creationTime:Date.now()}}async function gn(t,e){const s=(await e.json()).error;return le.create("request-failed",{requestName:t,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function vn({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function nr(t,{refreshToken:e}){const n=vn(t);return n.append("Authorization",rr(e)),n}async function wn(t){const e=await t();return e.status>=500&&e.status<600?t():e}function sr(t){return Number(t.replace("s","000"))}function rr(t){return`${fn} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ir({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const s=mn(t),r=vn(t),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&r.append("x-firebase-client",h)}const o={fid:n,authVersion:fn,appId:t.appId,sdkVersion:hn},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await wn(()=>fetch(s,a));if(l.ok){const h=await l.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:yn(h.authToken)}}else throw await gn("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=/^[cdef][\w-]{21}$/,st="";function cr(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=ur(t);return or.test(n)?n:st}catch{return st}}function ur(t){return ar(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn=new Map;function In(t,e){const n=Ge(t);Tn(n,e),lr(n,e)}function Tn(t,e){const n=xn.get(t);if(n)for(const s of n)s(e)}function lr(t,e){const n=dr();n&&n.postMessage({key:t,fid:e}),hr()}let se=null;function dr(){return!se&&"BroadcastChannel"in self&&(se=new BroadcastChannel("[Firebase] FID Change"),se.onmessage=t=>{Tn(t.data.key,t.data.fid)}),se}function hr(){xn.size===0&&se&&(se.close(),se=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="firebase-installations-database",pr=1,de="firebase-installations-store";let Be=null;function ut(){return Be||(Be=$n(fr,pr,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(de)}}})),Be}async function Le(t,e){const n=Ge(t),r=(await ut()).transaction(de,"readwrite"),i=r.objectStore(de),o=await i.get(n);return await i.put(e,n),await r.done,(!o||o.fid!==e.fid)&&In(t,e.fid),e}async function An(t){const e=Ge(t),s=(await ut()).transaction(de,"readwrite");await s.objectStore(de).delete(e),await s.done}async function ze(t,e){const n=Ge(t),r=(await ut()).transaction(de,"readwrite"),i=r.objectStore(de),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await r.done,a&&(!o||o.fid!==a.fid)&&In(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lt(t){let e;const n=await ze(t.appConfig,s=>{const r=mr(s),i=yr(t,r);return e=i.registrationPromise,i.installationEntry});return n.fid===st?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function mr(t){const e=t||{fid:cr(),registrationStatus:0};return Sn(e)}function yr(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(le.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=gr(t,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:vr(t)}:{installationEntry:e}}async function gr(t,e){try{const n=await ir(t,e);return Le(t.appConfig,n)}catch(n){throw pn(n)&&n.customData.serverCode===409?await An(t.appConfig):await Le(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function vr(t){let e=await jt(t.appConfig);for(;e.registrationStatus===1;)await bn(100),e=await jt(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await lt(t);return s||n}return e}function jt(t){return ze(t,e=>{if(!e)throw le.create("installation-not-found");return Sn(e)})}function Sn(t){return wr(t)?{fid:t.fid,registrationStatus:0}:t}function wr(t){return t.registrationStatus===1&&t.registrationTime+dn<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function br({appConfig:t,heartbeatServiceProvider:e},n){const s=xr(t,n),r=nr(t,n),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&r.append("x-firebase-client",h)}const o={installation:{sdkVersion:hn,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await wn(()=>fetch(s,a));if(l.ok){const h=await l.json();return yn(h)}else throw await gn("Generate Auth Token",l)}function xr(t,{fid:e}){return`${mn(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dt(t,e=!1){let n;const s=await ze(t.appConfig,i=>{if(!En(i))throw le.create("not-registered");const o=i.authToken;if(!e&&Ar(o))return i;if(o.requestStatus===1)return n=Ir(t,e),i;{if(!navigator.onLine)throw le.create("app-offline");const a=Er(i);return n=Tr(t,a),a}});return n?await n:s.authToken}async function Ir(t,e){let n=await Ct(t.appConfig);for(;n.authToken.requestStatus===1;)await bn(100),n=await Ct(t.appConfig);const s=n.authToken;return s.requestStatus===0?dt(t,e):s}function Ct(t){return ze(t,e=>{if(!En(e))throw le.create("not-registered");const n=e.authToken;return jr(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Tr(t,e){try{const n=await br(t,e),s=Object.assign(Object.assign({},e),{authToken:n});return await Le(t.appConfig,s),n}catch(n){if(pn(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await An(t.appConfig);else{const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Le(t.appConfig,s)}throw n}}function En(t){return t!==void 0&&t.registrationStatus===2}function Ar(t){return t.requestStatus===2&&!Sr(t)}function Sr(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Xs}function Er(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function jr(t){return t.requestStatus===1&&t.requestTime+dn<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cr(t){const e=t,{installationEntry:n,registrationPromise:s}=await lt(e);return s?s.catch(console.error):dt(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pr(t,e=!1){const n=t;return await Or(n),(await dt(n,e)).token}async function Or(t){const{registrationPromise:e}=await lt(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(t){if(!t||!t.options)throw We("App Configuration");if(!t.name)throw We("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw We(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function We(t){return le.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="installations",Dr="installations-internal",Fr=t=>{const e=t.getProvider("app").getImmediate(),n=Rr(e),s=Ue(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},_r=t=>{const e=t.getProvider("app").getImmediate(),n=Ue(e,jn).getImmediate();return{getId:()=>Cr(n),getToken:r=>Pr(n,r)}};function kr(){ke(new Ne(jn,Fr,"PUBLIC")),ke(new Ne(Dr,_r,"PRIVATE"))}kr();_e(ln,ct);_e(ln,ct,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qe="analytics",Nr="firebase_id",Mr="origin",Lr=60*1e3,qr="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ht="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F=new Qn("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},_=new Bt("analytics","Analytics",Ur);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t){if(!t.startsWith(ht)){const e=_.create("invalid-gtag-resource",{gtagURL:t});return F.warn(e.message),""}return t}function Cn(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Qr(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function Kr(t,e){const n=Qr("firebase-js-sdk-policy",{createScriptURL:$r}),s=document.createElement("script"),r=`${ht}?l=${t}&id=${e}`;s.src=n?n==null?void 0:n.createScriptURL(r):r,s.async=!0,document.head.appendChild(s)}function Gr(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function zr(t,e,n,s,r,i){const o=s[r];try{if(o)await e[o];else{const l=(await Cn(n)).find(h=>h.measurementId===r);l&&await e[l.appId]}}catch(a){F.error(a)}t("config",r,i)}async function Vr(t,e,n,s,r){try{let i=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=await Cn(n);for(const l of o){const h=a.find(d=>d.measurementId===l),y=h&&e[h.appId];if(y)i.push(y);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",s,r||{})}catch(i){F.error(i)}}function Hr(t,e,n,s){async function r(i,...o){try{if(i==="event"){const[a,l]=o;await Vr(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await zr(t,e,n,s,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,h]=o;t("get",a,l,h)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){F.error(a)}}return r}function Br(t,e,n,s,r){let i=function(...o){window[s].push(arguments)};return window[r]&&typeof window[r]=="function"&&(i=window[r]),window[r]=Hr(i,t,e,n),{gtagCore:i,wrappedGtag:window[r]}}function Wr(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(ht)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr=30,Jr=1e3;class Xr{constructor(e={},n=Jr){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Pn=new Xr;function Zr(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function ei(t){var e;const{appId:n,apiKey:s}=t,r={method:"GET",headers:Zr(s)},i=qr.replace("{app-id}",n),o=await fetch(i,r);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw _.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function ti(t,e=Pn,n){const{appId:s,apiKey:r,measurementId:i}=t.options;if(!s)throw _.create("no-app-id");if(!r){if(i)return{measurementId:i,appId:s};throw _.create("no-api-key")}const o=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new ri;return setTimeout(async()=>{a.abort()},Lr),On({appId:s,apiKey:r,measurementId:i},o,a,e)}async function On(t,{throttleEndTimeMillis:e,backoffCount:n},s,r=Pn){var i;const{appId:o,measurementId:a}=t;try{await ni(s,e)}catch(l){if(a)return F.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await ei(t);return r.deleteThrottleMetadata(o),l}catch(l){const h=l;if(!si(h)){if(r.deleteThrottleMetadata(o),a)return F.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:o,measurementId:a};throw l}const y=Number((i=h==null?void 0:h.customData)===null||i===void 0?void 0:i.httpStatus)===503?yt(n,r.intervalMillis,Yr):yt(n,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+y,backoffCount:n+1};return r.setThrottleMetadata(o,d),F.debug(`Calling attemptFetch again in ${y} millis`),On(t,d,s,r)}}function ni(t,e){return new Promise((n,s)=>{const r=Math.max(e-Date.now(),0),i=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(i),s(_.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function si(t){if(!(t instanceof Wt)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class ri{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function ii(t,e,n,s,r){if(r&&r.global){t("event",n,s);return}else{const i=await e,o=Object.assign(Object.assign({},s),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ai(){if(Gn())try{await zn()}catch(t){return F.warn(_.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return F.warn(_.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function oi(t,e,n,s,r,i,o){var a;const l=ti(t);l.then(v=>{n[v.measurementId]=v.appId,t.options.measurementId&&v.measurementId!==t.options.measurementId&&F.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>F.error(v)),e.push(l);const h=ai().then(v=>{if(v)return s.getId()}),[y,d]=await Promise.all([l,h]);Wr(i)||Kr(i,y.measurementId),r("js",new Date);const m=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return m[Mr]="firebase",m.update=!0,d!=null&&(m[Nr]=d),r("config",y.measurementId,m),y.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.app=e}_delete(){return delete Te[this.app.options.appId],Promise.resolve()}}let Te={},Pt=[];const Ot={};let Ye="dataLayer",ui="gtag",Rt,Rn,Dt=!1;function li(){const t=[];if(Kn()&&t.push("This is a browser extension environment."),Bn()||t.push("Cookies are not available."),t.length>0){const e=t.map((s,r)=>`(${r+1}) ${s}`).join(" "),n=_.create("invalid-analytics-context",{errorInfo:e});F.warn(n.message)}}function di(t,e,n){li();const s=t.options.appId;if(!s)throw _.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)F.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw _.create("no-api-key");if(Te[s]!=null)throw _.create("already-exists",{id:s});if(!Dt){Gr(Ye);const{wrappedGtag:i,gtagCore:o}=Br(Te,Pt,Ot,Ye,ui);Rn=i,Rt=o,Dt=!0}return Te[s]=oi(t,Pt,Ot,e,Rt,Ye,n),new ci(t)}function hi(t=Vn()){t=Yt(t);const e=Ue(t,qe);return e.isInitialized()?e.getImmediate():fi(t)}function fi(t,e={}){const n=Ue(t,qe);if(n.isInitialized()){const r=n.getImmediate();if(Hn(e,n.getOptions()))return r;throw _.create("already-initialized")}return n.initialize({options:e})}function pi(t,e,n,s){t=Yt(t),ii(Rn,Te[t.app.options.appId],e,n,s).catch(r=>F.error(r))}const Ft="@firebase/analytics",_t="0.10.8";function mi(){ke(new Ne(qe,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return di(s,r,n)},"PUBLIC")),ke(new Ne("analytics-internal",t,"PRIVATE")),_e(Ft,_t),_e(Ft,_t,"esm2017");function t(e){try{const n=e.getProvider(qe).getImmediate();return{logEvent:(s,r,i)=>pi(n,s,r,i)}}catch(n){throw _.create("interop-component-reg-failed",{reason:n})}}}mi();var Ee=(t=>(t.OWNER="owner",t.ADMIN="admin",t.DESIGNER="designer",t.VIEWER="viewer",t))(Ee||{}),yi=(t=>(t.DESIGN_FEE="Design Fee",t.FURNISHINGS="Furnishings",t.PROPERTY_MANAGEMENT="Property Management",t.KITCHEN="Kitchen",t.INSTALL="Install",t.STORAGE_RECEIVING="Storage & Receiving",t.FUEL="Fuel",t))(yi||{});const gi={apiKey:"AIzaSyCk3y7jgkkKlNOOdyMr1X-M0-Npyxcae_U",authDomain:"inventory-management-090999.firebaseapp.com",projectId:"inventory-management-090999",storageBucket:"inventory-management-090999.firebasestorage.app",messagingSenderId:"438790134101",appId:"1:438790134101:web:3aaa1ff1f9b426cb5277dc",measurementId:"G-K1BSF601RY"},Ve=Wn(gi),he=Yn(Ve),xe=Jn(Ve),Wi=Xn(Ve);typeof window<"u"&&Zn(xe,as).then(()=>{console.log("Firebase Auth persistence set to LOCAL - users will stay logged in across browser sessions")}).catch(t=>{console.error("Error setting Firebase Auth persistence:",t)});typeof window<"u"&&hi(Ve);typeof window<"u"&&console.log("Firestore offline persistence is enabled by default in modern Firebase versions");const vi=t=>{if(t instanceof ts)return t.toDate();if(t instanceof Date)return t;if(typeof t=="string"){const e=t.trim();if(/^\d{4}-\d{2}-\d{2}$/.test(e)){const[n,s,r]=e.split("-").map(Number);return new Date(n,s-1,r)}return new Date(t)}if(typeof t=="number")return new Date(t);if(!t)return new Date;try{return new Date(t)}catch(e){return console.warn("Failed to convert timestamp to date:",t,e),new Date}},Yi=t=>{if(console.log("convertTimestamps - input data:",t),console.log("convertTimestamps - transaction_images in input:",t.transaction_images),!t||typeof t!="object")return t;const e={...t},n=["createdAt","updatedAt","lastActivity","uploadedAt","generatedAt","lastScanned"],s=i=>{if(!i||typeof i!="object")return i;const o={...i};return Array.isArray(o)?(console.log("convertTimestamps - processing array:",o),o.map(a=>(console.log("convertTimestamps - processing array item:",a),s(a)))):(n.forEach(a=>{o[a]&&(console.log("convertTimestamps - converting timestamp field:",a,o[a]),o[a]=vi(o[a]))}),Object.keys(o).forEach(a=>{o[a]&&typeof o[a]=="object"&&(Array.isArray(o[a])?(console.log("convertTimestamps - processing array field:",a,o[a]),o[a]=o[a].map(l=>s(l))):(console.log("convertTimestamps - recursing into nested object:",a,o[a]),o[a]=s(o[a])))}),o)},r=s(e);return console.log("convertTimestamps - final result:",r),console.log("convertTimestamps - transaction_images in final result:",r.transaction_images),r},wi=async()=>new Promise((t,e)=>{const n=xe.onAuthStateChanged(s=>{n(),t(s)});setTimeout(()=>{n(),e(new Error("Authentication state check timeout"))},5e3)}),Ji=async()=>{try{console.log("Ensuring authentication for storage operations...");const t=await wi();if(!t){console.warn("No authenticated user found for storage operations");return}try{if(!await t.getIdToken()){console.warn("User authenticated but no valid token, attempting refresh...");try{await t.reload(),await t.getIdToken()||console.warn("Token refresh failed, but proceeding with current auth state")}catch(n){console.warn("Token refresh error:",n)}}}catch(e){console.warn("Token verification error:",e)}console.log("Storage authentication check completed for user:",t.uid)}catch(t){console.error("Error during storage authentication check:",t)}},Dn=new es;Dn.setCustomParameters({prompt:"select_account"});const bi=async()=>{try{const e=(await rs(xe,Dn)).user;return await rt(e),e}catch(t){throw console.error("Google sign-in error:",t),t}},xi=async()=>{try{await ss(xe)}catch(t){throw console.error("Sign-out error:",t),t}},rt=async t=>{var e;try{const n=Oe(he,"users",t.uid),s=await Jt(n),r={id:t.uid,email:t.email||"",displayName:t.displayName||((e=t.email)==null?void 0:e.split("@")[0])||"User",lastLogin:new Date};if(s.exists())await Je(n,r,{merge:!0});else{let i=Ee.VIEWER;if(t.email){const a=await Ii(t.email);if(a)i=a.role,await Ti(a.invitationId),console.log("User invited with role:",i);else{const l=Xt(he,"users");(await Zt(l)).empty&&(i=Ee.OWNER)}}const o={...r,role:i,createdAt:new Date,lastLogin:new Date};await Je(n,o)}}catch(n){throw console.error("Error creating/updating user document:",n),n}},Xi=async(t,e,n)=>{try{const s=`${t.replace("@","_").replace(".","_")}_${Date.now()}`,r=Oe(he,"invitations",s);await Je(r,{email:t,role:e,invitedBy:n,status:"pending",createdAt:new Date,expiresAt:new Date(Date.now()+7*24*60*60*1e3)}),console.log("Invitation created for:",t)}catch(s){throw console.error("Error creating invitation:",s),s}},Ii=async t=>{try{const e=Xt(he,"invitations"),n=is(e,gt("email","==",t),gt("status","==","pending")),s=await Zt(n);if(!s.empty){const r=s.docs[0].data(),i=s.docs[0].id;return r.expiresAt.toDate()<new Date?(await en(Oe(he,"invitations",i),{status:"expired"}),null):{role:r.role,invitationId:i}}return null}catch(e){return console.error("Error checking invitation:",e),null}},Ti=async t=>{try{await en(Oe(he,"invitations",t),{status:"accepted",acceptedAt:new Date}),console.log("Invitation accepted:",t)}catch(e){throw console.error("Error accepting invitation:",e),e}},Ai=async t=>{try{const e=await Jt(Oe(he,"users",t));return e.exists()?e.data():null}catch(e){return console.error("Error fetching user data:",e),null}},Si=t=>ns(xe,t),kt=async()=>{const t=xe.currentUser;if(!t)return{firebaseUser:null,appUser:null};const e=await Ai(t.uid);return{firebaseUser:t,appUser:e}},Fn=w.createContext(void 0);function Ei({children:t}){const[e,n]=w.useState(null),[s,r]=w.useState(null),[i,o]=w.useState(!0);w.useEffect(()=>{let d=!0;return Si(async v=>{if(n(v),v)try{await rt(v);const{appUser:x}=await kt();r(x),x!=null&&x.email?console.log("User authentication completed successfully:",x.email):(console.warn("User document created but no email found in user data"),r(null))}catch(x){console.error("Error fetching user data:",x),r(null)}else r(null);d&&(o(!1),d=!1)})},[]);const y={firebaseUser:e,user:s,loading:i,signIn:async()=>{try{o(!0);const d=await bi();await rt(d);const{appUser:m}=await kt();r(m)}catch(d){throw console.error("Sign in error:",d),d}finally{o(!1)}},signOut:async()=>{try{o(!0),await xi()}catch(d){throw console.error("Sign out error:",d),d}finally{o(!1)}},isAuthenticated:!!e,hasRole:d=>(s==null?void 0:s.role)===d||(s==null?void 0:s.role)===Ee.OWNER||(s==null?void 0:s.role)===Ee.ADMIN};return u.jsx(Fn.Provider,{value:y,children:t})}function ft(){const t=w.useContext(Fn);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function _n({variant:t="primary",size:e="md",className:n,children:s,...r}){const i="inline-flex items-center justify-center font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",o={primary:"text-white bg-primary-600 hover:bg-primary-700 focus:ring-primary-500 border border-transparent",secondary:"text-gray-700 bg-white hover:bg-gray-50 focus:ring-primary-500 border border-gray-300",danger:"text-white bg-red-600 hover:bg-red-700 focus:ring-red-500 border border-transparent"},a={sm:"px-3 py-2 text-sm rounded-md",md:"px-4 py-2 text-sm rounded-md",lg:"px-6 py-3 text-base rounded-md"},l=ne(i,o[t],a[e],n);return u.jsx("button",{className:l,...r,children:s})}function ji(){const{user:t,signOut:e,loading:n}=ft();return u.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:u.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex h-16 justify-between items-center flex-wrap gap-2",children:[u.jsx("div",{className:"flex items-center",children:u.jsx(mt,{to:"/",className:"text-xl font-bold text-gray-900",children:"1584"})}),u.jsx("div",{className:"flex items-center",children:t&&u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(mt,{to:"/settings",className:"flex items-center text-sm text-gray-700 hover:text-gray-900",title:"Settings",children:u.jsx(os,{className:"h-4 w-4"})}),u.jsx(_n,{variant:"secondary",size:"sm",onClick:e,disabled:n,className:"flex items-center",title:"Sign Out",children:u.jsx(cs,{className:"h-4 w-4"})})]})})]})})})}function Ci({children:t}){return u.jsx("div",{className:"min-h-screen bg-gray-50",children:u.jsxs("div",{className:"flex flex-col",children:[u.jsx(ji,{}),u.jsx("main",{className:"flex-1 py-6",children:u.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:t||u.jsx(Ln,{})})})]})})}function Pi({size:t="md",className:e}){const n={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return u.jsx("div",{className:ne("flex items-center justify-center",e),children:u.jsx(us,{className:ne("animate-spin text-primary-600",n[t])})})}const Oi={success:fs,error:hs,warning:ds,info:ls},Ri={success:{container:"bg-green-50 border-green-200",icon:"text-green-400",text:"text-green-800",button:"text-green-400 hover:bg-green-100"},error:{container:"bg-red-50 border-red-200",icon:"text-red-400",text:"text-red-800",button:"text-red-400 hover:bg-red-100"},warning:{container:"bg-yellow-50 border-yellow-200",icon:"text-yellow-400",text:"text-yellow-800",button:"text-yellow-400 hover:bg-yellow-100"},info:{container:"bg-blue-50 border-blue-200",icon:"text-blue-400",text:"text-blue-800",button:"text-blue-400 hover:bg-blue-100"}};function Di({toast:t,onClose:e}){const[n,s]=w.useState(!1),[r,i]=w.useState(!1),o=Oi[t.type],a=Ri[t.type];w.useEffect(()=>{s(!0);const h=t.duration||(t.type==="error"?6e3:4e3),y=setTimeout(()=>{l()},h);return()=>clearTimeout(y)},[t.duration,t.type]);const l=()=>{i(!0),setTimeout(()=>{e(t.id)},300)};return u.jsxs("div",{className:ne("flex items-center justify-between p-4 mb-3 border rounded-lg shadow-sm transition-all duration-300 transform",a.container,n&&!r?"translate-x-0 opacity-100":"-translate-x-full opacity-0"),children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(o,{className:ne("h-5 w-5 mr-3 flex-shrink-0",a.icon)}),u.jsx("p",{className:ne("text-sm font-medium",a.text),children:t.message})]}),u.jsx("button",{onClick:l,className:ne("ml-4 inline-flex rounded-md p-1.5 transition-colors duration-200",a.button),children:u.jsx(ps,{className:"h-4 w-4"})})]})}const kn=w.createContext(void 0);function Zi(){const t=w.useContext(kn);if(t===void 0)throw new Error("useToast must be used within a ToastProvider");return t}function Fi({children:t}){const[e,n]=w.useState([]),s=()=>Math.random().toString(36).substr(2,9),r=w.useCallback((d,m,v)=>{const x=s(),b={id:x,message:d,type:m,duration:v};return n(A=>[...A,b]),setTimeout(()=>{h(x)},(v||(m==="error"?6e3:4e3))+300),x},[]),i=w.useCallback((d,m)=>r(d,"success",m),[r]),o=w.useCallback((d,m)=>r(d,"error",m),[r]),a=w.useCallback((d,m)=>r(d,"warning",m),[r]),l=w.useCallback((d,m)=>r(d,"info",m),[r]),h=w.useCallback(d=>{n(m=>m.filter(v=>v.id!==d))},[]),y={showToast:r,showSuccess:i,showError:o,showWarning:a,showInfo:l,removeToast:h};return u.jsxs(kn.Provider,{value:y,children:[t,u.jsx("div",{className:"fixed top-4 right-4 z-50 min-w-96 max-w-sm",children:e.map(d=>u.jsx(Di,{toast:d,onClose:h},d.id))})]})}function Nt({onSuccess:t}){const{signIn:e,loading:n}=ft(),[s,r]=w.useState(""),i=async()=>{try{r(""),await e(),t==null||t()}catch(o){console.error("Login error:",o),r("Failed to sign in. Please try again.")}};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"max-w-md w-full space-y-8",children:[u.jsxs("div",{children:[u.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-primary-100",children:u.jsx("span",{className:"text-2xl font-bold text-primary-600",children:"1584"})}),u.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Welcome to 1584 Design"}),u.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to access your inventory and transaction management system"})]}),u.jsxs("div",{className:"mt-8 space-y-6",children:[s&&u.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:u.jsx("div",{className:"text-sm text-red-600",children:s})}),u.jsx("div",{children:u.jsxs(_n,{onClick:i,disabled:n,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",children:[u.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),u.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),u.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),u.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),n?"Signing in...":"Continue with Google"]})}),u.jsx("div",{className:"text-center",children:u.jsx("p",{className:"text-xs text-gray-500",children:"By signing in, you agree to our terms of service and privacy policy."})})]})]})})}function _i({children:t}){const{isAuthenticated:e,loading:n,user:s}=ft();return n?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e?s!=null&&s.email?u.jsx(u.Fragment,{children:t}):u.jsx(Nt,{}):u.jsx(Nt,{})}function ki(){return u.jsx(Ei,{children:u.jsx(Fi,{children:u.jsx(_i,{children:u.jsx(Ci,{children:u.jsx(w.Suspense,{fallback:u.jsx(Pi,{}),children:u.jsxs(qn,{children:[u.jsx(M,{path:"/",element:u.jsx(Mt,{})}),u.jsx(M,{path:"/projects",element:u.jsx(Mt,{})}),u.jsx(M,{path:"/settings",element:u.jsx(Qi,{})}),u.jsx(M,{path:"/item/:id",element:u.jsx(Lt,{})}),u.jsx(M,{path:"/project/:id",element:u.jsx(Ni,{})}),u.jsx(M,{path:"/project/:id/item/:itemId",element:u.jsx(Lt,{})}),u.jsx(M,{path:"/project/:id/item/add",element:u.jsx(Mi,{})}),u.jsx(M,{path:"/project/:id/edit-item/:itemId",element:u.jsx(Li,{})}),u.jsx(M,{path:"/project/:id/transaction/add",element:u.jsx(qi,{})}),u.jsx(M,{path:"/project/:id/transaction/:transactionId/edit",element:u.jsx(Ui,{})}),u.jsx(M,{path:"/project/:id/transaction/:transactionId",element:u.jsx($i,{})})]})})})})})})}const Mt=w.lazy(()=>V(()=>import("./Projects.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Lt=w.lazy(()=>V(()=>import("./ItemDetail.js"),__vite__mapDeps([7,1,2,8,3,4,9,10,11,6]))),Ni=w.lazy(()=>V(()=>import("./ProjectDetail.js"),__vite__mapDeps([12,2,1,3,4,9,6,8,5]))),Mi=w.lazy(()=>V(()=>import("./AddItem.js"),__vite__mapDeps([13,2,1,3,4,14,6]))),Li=w.lazy(()=>V(()=>import("./EditItem.js"),__vite__mapDeps([15,2,1,3,4,14,6]))),qi=w.lazy(()=>V(()=>import("./AddTransaction.js"),__vite__mapDeps([16,2,1,14,3,4,9,17,6,10,11]))),Ui=w.lazy(()=>V(()=>import("./EditTransaction.js"),__vite__mapDeps([18,2,1,3,4,9,17,6,10,11]))),$i=w.lazy(()=>V(()=>import("./TransactionDetail.js"),__vite__mapDeps([19,1,11,6,2,3,4,8]))),Qi=w.lazy(()=>V(()=>import("./Settings.js"),__vite__mapDeps([20,1,4,6,2]))),Ki=new Vs({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1}}});Xe.createRoot(document.getElementById("root")).render(u.jsx(Mn.StrictMode,{children:u.jsx(Bs,{client:Ki,children:u.jsx(Un,{children:u.jsx(ki,{})})})}));export{yi as B,Ee as U,Zi as a,_n as b,Yi as c,he as d,Ji as e,Xi as f,u as j,Wi as s,ft as u};
//# sourceMappingURL=index.js.map
