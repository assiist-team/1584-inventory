const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Projects.js","assets/vendor.js","assets/router.js","assets/inventoryService.js","assets/firebase.js","assets/dateUtils.js","assets/BudgetProgress.js","assets/ui.js","assets/ItemDetail.js","assets/imageService.js","assets/ImagePreview.js","assets/ImageGallery.js","assets/ProjectDetail.js","assets/AddItem.js","assets/transactionSources.js","assets/EditItem.js","assets/AddTransaction.js","assets/TransactionItemsList.js","assets/EditTransaction.js","assets/TransactionDetail.js","assets/Settings.js"])))=>i.map(i=>d[i]);
var pt=t=>{throw TypeError(t)};var Ve=(t,e,s)=>e.has(t)||pt("Cannot "+s);var c=(t,e,s)=>(Ve(t,e,"read from private field"),s?s.call(t):e.get(t)),g=(t,e,s)=>e.has(t)?pt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),f=(t,e,s,n)=>(Ve(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s),E=(t,e,s)=>(Ve(t,e,"access private method"),s);var Re=(t,e,s,n)=>({set _(r){f(t,e,r,s)},get _(){return c(t,e,n)}});import{r as w,a as ks,b as Ns}from"./vendor.js";import{L as mt,O as Ms,R as qs,a as M,B as Ls}from"./router.js";import{r as _e,_ as ke,C as Ne,a as Ue,E as Ht,o as Us,F as Wt,L as $s,g as Yt,i as Qs,b as Ks,v as zs,c as yt,d as Bs,e as Gs,f as Vs,h as Hs,j as Ws,k as Ys,l as Js,s as Xs,G as Zs,m as Oe,n as Je,T as en,p as tn,q as sn,t as nn,u as Jt,w as Xt,x as Zt,y as rn,z as gt,A as es,B as an}from"./firebase.js";import{c as se,S as on,U as cn,L as un,a as ln,I as dn,A as hn,X as fn,C as pn,b as mn}from"./ui.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var ts={exports:{}},$e={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yn=w,gn=Symbol.for("react.element"),vn=Symbol.for("react.fragment"),wn=Object.prototype.hasOwnProperty,bn=yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xn={key:!0,ref:!0,__self:!0,__source:!0};function ss(t,e,s){var n,r={},i=null,o=null;s!==void 0&&(i=""+s),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)wn.call(e,n)&&!xn.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:gn,type:t,key:i,ref:o,props:r,_owner:bn.current}}$e.Fragment=vn;$e.jsx=ss;$e.jsxs=ss;ts.exports=$e;var u=ts.exports,Xe={},vt=ks;Xe.createRoot=vt.createRoot,Xe.hydrateRoot=vt.hydrateRoot;var Qe=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},In={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},H,it,Lt,Tn=(Lt=class{constructor(){g(this,H,In);g(this,it,!1)}setTimeoutProvider(t){f(this,H,t)}setTimeout(t,e){return c(this,H).setTimeout(t,e)}clearTimeout(t){c(this,H).clearTimeout(t)}setInterval(t,e){return c(this,H).setInterval(t,e)}clearInterval(t){c(this,H).clearInterval(t)}},H=new WeakMap,it=new WeakMap,Lt),Ze=new Tn;function An(t){setTimeout(t,0)}var Ke=typeof window>"u"||"Deno"in globalThis;function q(){}function Sn(t,e){return typeof t=="function"?t(e):t}function jn(t){return typeof t=="number"&&t>=0&&t!==1/0}function Cn(t,e){return Math.max(t+(e||0)-Date.now(),0)}function et(t,e){return typeof t=="function"?t(e):t}function En(t,e){return typeof t=="function"?t(e):t}function wt(t,e){const{type:s="all",exact:n,fetchStatus:r,predicate:i,queryKey:o,stale:a}=t;if(o){if(n){if(e.queryHash!==at(o,e.options))return!1}else if(!Se(e.queryKey,o))return!1}if(s!=="all"){const l=e.isActive();if(s==="active"&&!l||s==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||r&&r!==e.state.fetchStatus||i&&!i(e))}function bt(t,e){const{exact:s,status:n,predicate:r,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(s){if(Ae(e.options.mutationKey)!==Ae(i))return!1}else if(!Se(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||r&&!r(e))}function at(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ae)(t)}function Ae(t){return JSON.stringify(t,(e,s)=>tt(s)?Object.keys(s).sort().reduce((n,r)=>(n[r]=s[r],n),{}):s)}function Se(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(s=>Se(t[s],e[s])):!1}var Pn=Object.prototype.hasOwnProperty;function ns(t,e){if(t===e)return t;const s=xt(t)&&xt(e);if(!s&&!(tt(t)&&tt(e)))return e;const r=(s?t:Object.keys(t)).length,i=s?e:Object.keys(e),o=i.length,a=s?new Array(o):{};let l=0;for(let h=0;h<o;h++){const y=s?h:i[h],d=t[y],m=e[y];if(d===m){a[y]=d,(s?h<r:Pn.call(t,y))&&l++;continue}if(d===null||m===null||typeof d!="object"||typeof m!="object"){a[y]=m;continue}const v=ns(d,m);a[y]=v,v===d&&l++}return r===o&&l===r?t:a}function xt(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function tt(t){if(!It(t))return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!It(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function It(t){return Object.prototype.toString.call(t)==="[object Object]"}function On(t){return new Promise(e=>{Ze.setTimeout(e,t)})}function Dn(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?ns(t,e):e}function Rn(t,e,s=0){const n=[...t,e];return s&&n.length>s?n.slice(1):n}function Fn(t,e,s=0){const n=[e,...t];return s&&n.length>s?n.slice(0,-1):n}var ot=Symbol();function rs(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ot?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var re,W,fe,Ut,_n=(Ut=class extends Qe{constructor(){super();g(this,re);g(this,W);g(this,fe);f(this,fe,e=>{if(!Ke&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){c(this,W)||this.setEventListener(c(this,fe))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,W))==null||e.call(this),f(this,W,void 0))}setEventListener(e){var s;f(this,fe,e),(s=c(this,W))==null||s.call(this),f(this,W,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){c(this,re)!==e&&(f(this,re,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){var e;return typeof c(this,re)=="boolean"?c(this,re):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},re=new WeakMap,W=new WeakMap,fe=new WeakMap,Ut),is=new _n;function kn(){let t,e;const s=new Promise((r,i)=>{t=r,e=i});s.status="pending",s.catch(()=>{});function n(r){Object.assign(s,r),delete s.resolve,delete s.reject}return s.resolve=r=>{n({status:"fulfilled",value:r}),t(r)},s.reject=r=>{n({status:"rejected",reason:r}),e(r)},s}var Nn=An;function Mn(){let t=[],e=0,s=a=>{a()},n=a=>{a()},r=Nn;const i=a=>{e?t.push(a):r(()=>{s(a)})},o=()=>{const a=t;t=[],a.length&&r(()=>{n(()=>{a.forEach(l=>{s(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{s=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{r=a}}}var D=Mn(),pe,Y,me,$t,qn=($t=class extends Qe{constructor(){super();g(this,pe,!0);g(this,Y);g(this,me);f(this,me,e=>{if(!Ke&&window.addEventListener){const s=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",n)}}})}onSubscribe(){c(this,Y)||this.setEventListener(c(this,me))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,Y))==null||e.call(this),f(this,Y,void 0))}setEventListener(e){var s;f(this,me,e),(s=c(this,Y))==null||s.call(this),f(this,Y,e(this.setOnline.bind(this)))}setOnline(e){c(this,pe)!==e&&(f(this,pe,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return c(this,pe)}},pe=new WeakMap,Y=new WeakMap,me=new WeakMap,$t),Me=new qn;function Ln(t){return Math.min(1e3*2**t,3e4)}function as(t){return(t??"online")==="online"?Me.isOnline():!0}var st=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function os(t){let e=!1,s=0,n;const r=kn(),i=()=>r.status!=="pending",o=b=>{var A;if(!i()){const S=new st(b);m(S),(A=t.onCancel)==null||A.call(t,S)}},a=()=>{e=!0},l=()=>{e=!1},h=()=>is.isFocused()&&(t.networkMode==="always"||Me.isOnline())&&t.canRun(),y=()=>as(t.networkMode)&&t.canRun(),d=b=>{i()||(n==null||n(),r.resolve(b))},m=b=>{i()||(n==null||n(),r.reject(b))},v=()=>new Promise(b=>{var A;n=S=>{(i()||h())&&b(S)},(A=t.onPause)==null||A.call(t)}).then(()=>{var b;n=void 0,i()||(b=t.onContinue)==null||b.call(t)}),x=()=>{if(i())return;let b;const A=s===0?t.initialPromise:void 0;try{b=A??t.fn()}catch(S){b=Promise.reject(S)}Promise.resolve(b).then(d).catch(S=>{var N;if(i())return;const R=t.retry??(Ke?0:3),T=t.retryDelay??Ln,p=typeof T=="function"?T(s,S):T,P=R===!0||typeof R=="number"&&s<R||typeof R=="function"&&R(s,S);if(e||!P){m(S);return}s++,(N=t.onFail)==null||N.call(t,s,S),On(p).then(()=>h()?void 0:v()).then(()=>{e?m(S):x()})})};return{promise:r,status:()=>r.status,cancel:o,continue:()=>(n==null||n(),r),cancelRetry:a,continueRetry:l,canStart:y,start:()=>(y()?x():v().then(x),r)}}var ie,Qt,cs=(Qt=class{constructor(){g(this,ie)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),jn(this.gcTime)&&f(this,ie,Ze.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ke?1/0:5*60*1e3))}clearGcTimeout(){c(this,ie)&&(Ze.clearTimeout(c(this,ie)),f(this,ie,void 0))}},ie=new WeakMap,Qt),ae,ye,k,oe,C,Ce,ce,L,z,Kt,Un=(Kt=class extends cs{constructor(e){super();g(this,L);g(this,ae);g(this,ye);g(this,k);g(this,oe);g(this,C);g(this,Ce);g(this,ce);f(this,ce,!1),f(this,Ce,e.defaultOptions),this.setOptions(e.options),this.observers=[],f(this,oe,e.client),f(this,k,c(this,oe).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,f(this,ae,Tt(this.options)),this.state=e.state??c(this,ae),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=c(this,C))==null?void 0:e.promise}setOptions(e){if(this.options={...c(this,Ce),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=Tt(this.options);s.data!==void 0&&(this.setData(s.data,{updatedAt:s.dataUpdatedAt,manual:!0}),f(this,ae,s))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&c(this,k).remove(this)}setData(e,s){const n=Dn(this.state.data,e,this.options);return E(this,L,z).call(this,{data:n,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),n}setState(e,s){E(this,L,z).call(this,{type:"setState",state:e,setStateOptions:s})}cancel(e){var n,r;const s=(n=c(this,C))==null?void 0:n.promise;return(r=c(this,C))==null||r.cancel(e),s?s.then(q).catch(q):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(c(this,ae))}isActive(){return this.observers.some(e=>En(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ot||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>et(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Cn(this.state.dataUpdatedAt,e)}onFocus(){var s;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(s=c(this,C))==null||s.continue()}onOnline(){var s;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(s=c(this,C))==null||s.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),c(this,k).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(c(this,C)&&(c(this,ce)?c(this,C).cancel({revert:!0}):c(this,C).cancelRetry()),this.scheduleGc()),c(this,k).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||E(this,L,z).call(this,{type:"invalidate"})}async fetch(e,s){var l,h,y,d,m,v,x,b,A,S,R,T;if(this.state.fetchStatus!=="idle"&&((l=c(this,C))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(c(this,C))return c(this,C).continueRetry(),c(this,C).promise}if(e&&this.setOptions(e),!this.options.queryFn){const p=this.observers.find(P=>P.options.queryFn);p&&this.setOptions(p.options)}const n=new AbortController,r=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(f(this,ce,!0),n.signal)})},i=()=>{const p=rs(this.options,s),N=(()=>{const ee={client:c(this,oe),queryKey:this.queryKey,meta:this.meta};return r(ee),ee})();return f(this,ce,!1),this.options.persister?this.options.persister(p,N,this):p(N)},a=(()=>{const p={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:c(this,oe),state:this.state,fetchFn:i};return r(p),p})();(h=this.options.behavior)==null||h.onFetch(a,this),f(this,ye,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((y=a.fetchOptions)==null?void 0:y.meta))&&E(this,L,z).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta}),f(this,C,os({initialPromise:s==null?void 0:s.initialPromise,fn:a.fetchFn,onCancel:p=>{p instanceof st&&p.revert&&this.setState({...c(this,ye),fetchStatus:"idle"}),n.abort()},onFail:(p,P)=>{E(this,L,z).call(this,{type:"failed",failureCount:p,error:P})},onPause:()=>{E(this,L,z).call(this,{type:"pause"})},onContinue:()=>{E(this,L,z).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const p=await c(this,C).start();if(p===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(p),(v=(m=c(this,k).config).onSuccess)==null||v.call(m,p,this),(b=(x=c(this,k).config).onSettled)==null||b.call(x,p,this.state.error,this),p}catch(p){if(p instanceof st){if(p.silent)return c(this,C).promise;if(p.revert){if(this.state.data===void 0)throw p;return this.state.data}}throw E(this,L,z).call(this,{type:"error",error:p}),(S=(A=c(this,k).config).onError)==null||S.call(A,p,this),(T=(R=c(this,k).config).onSettled)==null||T.call(R,this.state.data,p,this),p}finally{this.scheduleGc()}}},ae=new WeakMap,ye=new WeakMap,k=new WeakMap,oe=new WeakMap,C=new WeakMap,Ce=new WeakMap,ce=new WeakMap,L=new WeakSet,z=function(e){const s=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...$n(n.data,this.options),fetchMeta:e.meta??null};case"success":const r={...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return f(this,ye,e.manual?r:void 0),r;case"error":const i=e.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=s(this.state),D.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),c(this,k).notify({query:this,type:"updated",action:e})})},Kt);function $n(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:as(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Tt(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,s=e!==void 0,n=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}function At(t){return{onFetch:(e,s)=>{var y,d,m,v,x;const n=e.options,r=(m=(d=(y=e.fetchOptions)==null?void 0:y.meta)==null?void 0:d.fetchMore)==null?void 0:m.direction,i=((v=e.state.data)==null?void 0:v.pages)||[],o=((x=e.state.data)==null?void 0:x.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const h=async()=>{let b=!1;const A=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(e.signal.aborted?b=!0:e.signal.addEventListener("abort",()=>{b=!0}),e.signal)})},S=rs(e.options,e.fetchOptions),R=async(T,p,P)=>{if(b)return Promise.reject();if(p==null&&T.pages.length)return Promise.resolve(T);const ee=(()=>{const te={client:e.client,queryKey:e.queryKey,pageParam:p,direction:P?"backward":"forward",meta:e.options.meta};return A(te),te})(),De=await S(ee),{maxPages:Ie}=e.options,j=P?Fn:Rn;return{pages:j(T.pages,De,Ie),pageParams:j(T.pageParams,p,Ie)}};if(r&&i.length){const T=r==="backward",p=T?Qn:St,P={pages:i,pageParams:o},N=p(n,P);a=await R(P,N,T)}else{const T=t??i.length;do{const p=l===0?o[0]??n.initialPageParam:St(n,a);if(l>0&&p==null)break;a=await R(a,p),l++}while(l<T)}return a};e.options.persister?e.fetchFn=()=>{var b,A;return(A=(b=e.options).persister)==null?void 0:A.call(b,h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=h}}}function St(t,{pages:e,pageParams:s}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,s[n],s):void 0}function Qn(t,{pages:e,pageParams:s}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,s[0],s):void 0}var Ee,$,O,ue,Q,V,zt,Kn=(zt=class extends cs{constructor(e){super();g(this,Q);g(this,Ee);g(this,$);g(this,O);g(this,ue);f(this,Ee,e.client),this.mutationId=e.mutationId,f(this,O,e.mutationCache),f(this,$,[]),this.state=e.state||zn(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){c(this,$).includes(e)||(c(this,$).push(e),this.clearGcTimeout(),c(this,O).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){f(this,$,c(this,$).filter(s=>s!==e)),this.scheduleGc(),c(this,O).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){c(this,$).length||(this.state.status==="pending"?this.scheduleGc():c(this,O).remove(this))}continue(){var e;return((e=c(this,ue))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,h,y,d,m,v,x,b,A,S,R,T,p,P,N,ee,De,Ie;const s=()=>{E(this,Q,V).call(this,{type:"continue"})},n={client:c(this,Ee),meta:this.options.meta,mutationKey:this.options.mutationKey};f(this,ue,os({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(j,te)=>{E(this,Q,V).call(this,{type:"failed",failureCount:j,error:te})},onPause:()=>{E(this,Q,V).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>c(this,O).canRun(this)}));const r=this.state.status==="pending",i=!c(this,ue).canStart();try{if(r)s();else{E(this,Q,V).call(this,{type:"pending",variables:e,isPaused:i}),await((a=(o=c(this,O).config).onMutate)==null?void 0:a.call(o,e,this,n));const te=await((h=(l=this.options).onMutate)==null?void 0:h.call(l,e,n));te!==this.state.context&&E(this,Q,V).call(this,{type:"pending",context:te,variables:e,isPaused:i})}const j=await c(this,ue).start();return await((d=(y=c(this,O).config).onSuccess)==null?void 0:d.call(y,j,e,this.state.context,this,n)),await((v=(m=this.options).onSuccess)==null?void 0:v.call(m,j,e,this.state.context,n)),await((b=(x=c(this,O).config).onSettled)==null?void 0:b.call(x,j,null,this.state.variables,this.state.context,this,n)),await((S=(A=this.options).onSettled)==null?void 0:S.call(A,j,null,e,this.state.context,n)),E(this,Q,V).call(this,{type:"success",data:j}),j}catch(j){try{throw await((T=(R=c(this,O).config).onError)==null?void 0:T.call(R,j,e,this.state.context,this,n)),await((P=(p=this.options).onError)==null?void 0:P.call(p,j,e,this.state.context,n)),await((ee=(N=c(this,O).config).onSettled)==null?void 0:ee.call(N,void 0,j,this.state.variables,this.state.context,this,n)),await((Ie=(De=this.options).onSettled)==null?void 0:Ie.call(De,void 0,j,e,this.state.context,n)),j}finally{E(this,Q,V).call(this,{type:"error",error:j})}}finally{c(this,O).runNext(this)}}},Ee=new WeakMap,$=new WeakMap,O=new WeakMap,ue=new WeakMap,Q=new WeakSet,V=function(e){const s=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),D.batch(()=>{c(this,$).forEach(n=>{n.onMutationUpdate(e)}),c(this,O).notify({mutation:this,type:"updated",action:e})})},zt);function zn(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var B,U,Pe,Bt,Bn=(Bt=class extends Qe{constructor(e={}){super();g(this,B);g(this,U);g(this,Pe);this.config=e,f(this,B,new Set),f(this,U,new Map),f(this,Pe,0)}build(e,s,n){const r=new Kn({client:e,mutationCache:this,mutationId:++Re(this,Pe)._,options:e.defaultMutationOptions(s),state:n});return this.add(r),r}add(e){c(this,B).add(e);const s=Fe(e);if(typeof s=="string"){const n=c(this,U).get(s);n?n.push(e):c(this,U).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(c(this,B).delete(e)){const s=Fe(e);if(typeof s=="string"){const n=c(this,U).get(s);if(n)if(n.length>1){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}else n[0]===e&&c(this,U).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=Fe(e);if(typeof s=="string"){const n=c(this,U).get(s),r=n==null?void 0:n.find(i=>i.state.status==="pending");return!r||r===e}else return!0}runNext(e){var n;const s=Fe(e);if(typeof s=="string"){const r=(n=c(this,U).get(s))==null?void 0:n.find(i=>i!==e&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){D.batch(()=>{c(this,B).forEach(e=>{this.notify({type:"removed",mutation:e})}),c(this,B).clear(),c(this,U).clear()})}getAll(){return Array.from(c(this,B))}find(e){const s={exact:!0,...e};return this.getAll().find(n=>bt(s,n))}findAll(e={}){return this.getAll().filter(s=>bt(e,s))}notify(e){D.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return D.batch(()=>Promise.all(e.map(s=>s.continue().catch(q))))}},B=new WeakMap,U=new WeakMap,Pe=new WeakMap,Bt);function Fe(t){var e;return(e=t.options.scope)==null?void 0:e.id}var K,Gt,Gn=(Gt=class extends Qe{constructor(e={}){super();g(this,K);this.config=e,f(this,K,new Map)}build(e,s,n){const r=s.queryKey,i=s.queryHash??at(r,s);let o=this.get(i);return o||(o=new Un({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(s),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){c(this,K).has(e.queryHash)||(c(this,K).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=c(this,K).get(e.queryHash);s&&(e.destroy(),s===e&&c(this,K).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){D.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return c(this,K).get(e)}getAll(){return[...c(this,K).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(n=>wt(s,n))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(n=>wt(e,n)):s}notify(e){D.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){D.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){D.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},K=new WeakMap,Gt),I,J,X,ge,ve,Z,we,be,Vt,Vn=(Vt=class{constructor(t={}){g(this,I);g(this,J);g(this,X);g(this,ge);g(this,ve);g(this,Z);g(this,we);g(this,be);f(this,I,t.queryCache||new Gn),f(this,J,t.mutationCache||new Bn),f(this,X,t.defaultOptions||{}),f(this,ge,new Map),f(this,ve,new Map),f(this,Z,0)}mount(){Re(this,Z)._++,c(this,Z)===1&&(f(this,we,is.subscribe(async t=>{t&&(await this.resumePausedMutations(),c(this,I).onFocus())})),f(this,be,Me.subscribe(async t=>{t&&(await this.resumePausedMutations(),c(this,I).onOnline())})))}unmount(){var t,e;Re(this,Z)._--,c(this,Z)===0&&((t=c(this,we))==null||t.call(this),f(this,we,void 0),(e=c(this,be))==null||e.call(this),f(this,be,void 0))}isFetching(t){return c(this,I).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return c(this,J).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=c(this,I).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=c(this,I).build(this,e),n=s.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(et(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return c(this,I).findAll(t).map(({queryKey:e,state:s})=>{const n=s.data;return[e,n]})}setQueryData(t,e,s){const n=this.defaultQueryOptions({queryKey:t}),r=c(this,I).get(n.queryHash),i=r==null?void 0:r.state.data,o=Sn(e,i);if(o!==void 0)return c(this,I).build(this,n).setData(o,{...s,manual:!0})}setQueriesData(t,e,s){return D.batch(()=>c(this,I).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=c(this,I).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=c(this,I);D.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=c(this,I);return D.batch(()=>(s.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},n=D.batch(()=>c(this,I).findAll(t).map(r=>r.cancel(s)));return Promise.all(n).then(q).catch(q)}invalidateQueries(t,e={}){return D.batch(()=>(c(this,I).findAll(t).forEach(s=>{s.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},n=D.batch(()=>c(this,I).findAll(t).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,s);return s.throwOnError||(i=i.catch(q)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(q)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=c(this,I).build(this,e);return s.isStaleByTime(et(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(q).catch(q)}fetchInfiniteQuery(t){return t.behavior=At(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(q).catch(q)}ensureInfiniteQueryData(t){return t.behavior=At(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Me.isOnline()?c(this,J).resumePausedMutations():Promise.resolve()}getQueryCache(){return c(this,I)}getMutationCache(){return c(this,J)}getDefaultOptions(){return c(this,X)}setDefaultOptions(t){f(this,X,t)}setQueryDefaults(t,e){c(this,ge).set(Ae(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...c(this,ge).values()],s={};return e.forEach(n=>{Se(t,n.queryKey)&&Object.assign(s,n.defaultOptions)}),s}setMutationDefaults(t,e){c(this,ve).set(Ae(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...c(this,ve).values()],s={};return e.forEach(n=>{Se(t,n.mutationKey)&&Object.assign(s,n.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...c(this,X).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=at(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ot&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...c(this,X).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){c(this,I).clear(),c(this,J).clear()}},I=new WeakMap,J=new WeakMap,X=new WeakMap,ge=new WeakMap,ve=new WeakMap,Z=new WeakMap,we=new WeakMap,be=new WeakMap,Vt),Hn=w.createContext(void 0),Wn=({client:t,children:e})=>(w.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),u.jsx(Hn.Provider,{value:t,children:e}));const Yn="modulepreload",Jn=function(t){return"/"+t},jt={},G=function(e,s,n){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(s.map(l=>{if(l=Jn(l),l in jt)return;jt[l]=!0;const h=l.endsWith(".css"),y=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${y}`))return;const d=document.createElement("link");if(d.rel=h?"stylesheet":Yn,h||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),h)return new Promise((m,v)=>{d.addEventListener("load",m),d.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},us="@firebase/installations",ct="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=1e4,ds=`w:${ct}`,hs="FIS_v2",Xn="https://firebaseinstallations.googleapis.com/v1",Zn=60*60*1e3,er="installations",tr="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},le=new Ht(er,tr,sr);function fs(t){return t instanceof Wt&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps({projectId:t}){return`${Xn}/projects/${t}/installations`}function ms(t){return{token:t.token,requestStatus:2,expiresIn:rr(t.expiresIn),creationTime:Date.now()}}async function ys(t,e){const n=(await e.json()).error;return le.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function gs({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function nr(t,{refreshToken:e}){const s=gs(t);return s.append("Authorization",ir(e)),s}async function vs(t){const e=await t();return e.status>=500&&e.status<600?t():e}function rr(t){return Number(t.replace("s","000"))}function ir(t){return`${hs} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ar({appConfig:t,heartbeatServiceProvider:e},{fid:s}){const n=ps(t),r=gs(t),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&r.append("x-firebase-client",h)}const o={fid:s,authVersion:hs,appId:t.appId,sdkVersion:ds},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await vs(()=>fetch(n,a));if(l.ok){const h=await l.json();return{fid:h.fid||s,registrationStatus:2,refreshToken:h.refreshToken,authToken:ms(h.authToken)}}else throw await ys("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr=/^[cdef][\w-]{21}$/,nt="";function ur(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const s=lr(t);return cr.test(s)?s:nt}catch{return nt}}function lr(t){return or(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new Map;function xs(t,e){const s=ze(t);Is(s,e),dr(s,e)}function Is(t,e){const s=bs.get(t);if(s)for(const n of s)n(e)}function dr(t,e){const s=hr();s&&s.postMessage({key:t,fid:e}),fr()}let ne=null;function hr(){return!ne&&"BroadcastChannel"in self&&(ne=new BroadcastChannel("[Firebase] FID Change"),ne.onmessage=t=>{Is(t.data.key,t.data.fid)}),ne}function fr(){bs.size===0&&ne&&(ne.close(),ne=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr="firebase-installations-database",mr=1,de="firebase-installations-store";let He=null;function ut(){return He||(He=Us(pr,mr,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(de)}}})),He}async function qe(t,e){const s=ze(t),r=(await ut()).transaction(de,"readwrite"),i=r.objectStore(de),o=await i.get(s);return await i.put(e,s),await r.done,(!o||o.fid!==e.fid)&&xs(t,e.fid),e}async function Ts(t){const e=ze(t),n=(await ut()).transaction(de,"readwrite");await n.objectStore(de).delete(e),await n.done}async function Be(t,e){const s=ze(t),r=(await ut()).transaction(de,"readwrite"),i=r.objectStore(de),o=await i.get(s),a=e(o);return a===void 0?await i.delete(s):await i.put(a,s),await r.done,a&&(!o||o.fid!==a.fid)&&xs(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lt(t){let e;const s=await Be(t.appConfig,n=>{const r=yr(n),i=gr(t,r);return e=i.registrationPromise,i.installationEntry});return s.fid===nt?{installationEntry:await e}:{installationEntry:s,registrationPromise:e}}function yr(t){const e=t||{fid:ur(),registrationStatus:0};return As(e)}function gr(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(le.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const s={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=vr(t,s);return{installationEntry:s,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:wr(t)}:{installationEntry:e}}async function vr(t,e){try{const s=await ar(t,e);return qe(t.appConfig,s)}catch(s){throw fs(s)&&s.customData.serverCode===409?await Ts(t.appConfig):await qe(t.appConfig,{fid:e.fid,registrationStatus:0}),s}}async function wr(t){let e=await Ct(t.appConfig);for(;e.registrationStatus===1;)await ws(100),e=await Ct(t.appConfig);if(e.registrationStatus===0){const{installationEntry:s,registrationPromise:n}=await lt(t);return n||s}return e}function Ct(t){return Be(t,e=>{if(!e)throw le.create("installation-not-found");return As(e)})}function As(t){return br(t)?{fid:t.fid,registrationStatus:0}:t}function br(t){return t.registrationStatus===1&&t.registrationTime+ls<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xr({appConfig:t,heartbeatServiceProvider:e},s){const n=Ir(t,s),r=nr(t,s),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&r.append("x-firebase-client",h)}const o={installation:{sdkVersion:ds,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await vs(()=>fetch(n,a));if(l.ok){const h=await l.json();return ms(h)}else throw await ys("Generate Auth Token",l)}function Ir(t,{fid:e}){return`${ps(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dt(t,e=!1){let s;const n=await Be(t.appConfig,i=>{if(!Ss(i))throw le.create("not-registered");const o=i.authToken;if(!e&&Sr(o))return i;if(o.requestStatus===1)return s=Tr(t,e),i;{if(!navigator.onLine)throw le.create("app-offline");const a=Cr(i);return s=Ar(t,a),a}});return s?await s:n.authToken}async function Tr(t,e){let s=await Et(t.appConfig);for(;s.authToken.requestStatus===1;)await ws(100),s=await Et(t.appConfig);const n=s.authToken;return n.requestStatus===0?dt(t,e):n}function Et(t){return Be(t,e=>{if(!Ss(e))throw le.create("not-registered");const s=e.authToken;return Er(s)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Ar(t,e){try{const s=await xr(t,e),n=Object.assign(Object.assign({},e),{authToken:s});return await qe(t.appConfig,n),s}catch(s){if(fs(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await Ts(t.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await qe(t.appConfig,n)}throw s}}function Ss(t){return t!==void 0&&t.registrationStatus===2}function Sr(t){return t.requestStatus===2&&!jr(t)}function jr(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Zn}function Cr(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Er(t){return t.requestStatus===1&&t.requestTime+ls<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pr(t){const e=t,{installationEntry:s,registrationPromise:n}=await lt(e);return n?n.catch(console.error):dt(e).catch(console.error),s.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Or(t,e=!1){const s=t;return await Dr(s),(await dt(s,e)).token}async function Dr(t){const{registrationPromise:e}=await lt(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(t){if(!t||!t.options)throw We("App Configuration");if(!t.name)throw We("App Name");const e=["projectId","apiKey","appId"];for(const s of e)if(!t.options[s])throw We(s);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function We(t){return le.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="installations",Fr="installations-internal",_r=t=>{const e=t.getProvider("app").getImmediate(),s=Rr(e),n=Ue(e,"heartbeat");return{app:e,appConfig:s,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},kr=t=>{const e=t.getProvider("app").getImmediate(),s=Ue(e,js).getImmediate();return{getId:()=>Pr(s),getToken:r=>Or(s,r)}};function Nr(){ke(new Ne(js,_r,"PUBLIC")),ke(new Ne(Fr,kr,"PRIVATE"))}Nr();_e(us,ct);_e(us,ct,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Le="analytics",Mr="firebase_id",qr="origin",Lr=60*1e3,Ur="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ht="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F=new $s("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},_=new Ht("analytics","Analytics",$r);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(t){if(!t.startsWith(ht)){const e=_.create("invalid-gtag-resource",{gtagURL:t});return F.warn(e.message),""}return t}function Cs(t){return Promise.all(t.map(e=>e.catch(s=>s)))}function Kr(t,e){let s;return window.trustedTypes&&(s=window.trustedTypes.createPolicy(t,e)),s}function zr(t,e){const s=Kr("firebase-js-sdk-policy",{createScriptURL:Qr}),n=document.createElement("script"),r=`${ht}?l=${t}&id=${e}`;n.src=s?s==null?void 0:s.createScriptURL(r):r,n.async=!0,document.head.appendChild(n)}function Br(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Gr(t,e,s,n,r,i){const o=n[r];try{if(o)await e[o];else{const l=(await Cs(s)).find(h=>h.measurementId===r);l&&await e[l.appId]}}catch(a){F.error(a)}t("config",r,i)}async function Vr(t,e,s,n,r){try{let i=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=await Cs(s);for(const l of o){const h=a.find(d=>d.measurementId===l),y=h&&e[h.appId];if(y)i.push(y);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",n,r||{})}catch(i){F.error(i)}}function Hr(t,e,s,n){async function r(i,...o){try{if(i==="event"){const[a,l]=o;await Vr(t,e,s,a,l)}else if(i==="config"){const[a,l]=o;await Gr(t,e,s,n,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,h]=o;t("get",a,l,h)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){F.error(a)}}return r}function Wr(t,e,s,n,r){let i=function(...o){window[n].push(arguments)};return window[r]&&typeof window[r]=="function"&&(i=window[r]),window[r]=Hr(i,t,e,s),{gtagCore:i,wrappedGtag:window[r]}}function Yr(t){const e=window.document.getElementsByTagName("script");for(const s of Object.values(e))if(s.src&&s.src.includes(ht)&&s.src.includes(t))return s;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=30,Xr=1e3;class Zr{constructor(e={},s=Xr){this.throttleMetadata=e,this.intervalMillis=s}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,s){this.throttleMetadata[e]=s}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Es=new Zr;function ei(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function ti(t){var e;const{appId:s,apiKey:n}=t,r={method:"GET",headers:ei(n)},i=Ur.replace("{app-id}",s),o=await fetch(i,r);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw _.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function si(t,e=Es,s){const{appId:n,apiKey:r,measurementId:i}=t.options;if(!n)throw _.create("no-app-id");if(!r){if(i)return{measurementId:i,appId:n};throw _.create("no-api-key")}const o=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new ii;return setTimeout(async()=>{a.abort()},Lr),Ps({appId:n,apiKey:r,measurementId:i},o,a,e)}async function Ps(t,{throttleEndTimeMillis:e,backoffCount:s},n,r=Es){var i;const{appId:o,measurementId:a}=t;try{await ni(n,e)}catch(l){if(a)return F.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await ti(t);return r.deleteThrottleMetadata(o),l}catch(l){const h=l;if(!ri(h)){if(r.deleteThrottleMetadata(o),a)return F.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:o,measurementId:a};throw l}const y=Number((i=h==null?void 0:h.customData)===null||i===void 0?void 0:i.httpStatus)===503?yt(s,r.intervalMillis,Jr):yt(s,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+y,backoffCount:s+1};return r.setThrottleMetadata(o,d),F.debug(`Calling attemptFetch again in ${y} millis`),Ps(t,d,n,r)}}function ni(t,e){return new Promise((s,n)=>{const r=Math.max(e-Date.now(),0),i=setTimeout(s,r);t.addEventListener(()=>{clearTimeout(i),n(_.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function ri(t){if(!(t instanceof Wt)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class ii{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function ai(t,e,s,n,r){if(r&&r.global){t("event",s,n);return}else{const i=await e,o=Object.assign(Object.assign({},n),{send_to:i});t("event",s,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oi(){if(Ks())try{await zs()}catch(t){return F.warn(_.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return F.warn(_.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function ci(t,e,s,n,r,i,o){var a;const l=si(t);l.then(v=>{s[v.measurementId]=v.appId,t.options.measurementId&&v.measurementId!==t.options.measurementId&&F.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>F.error(v)),e.push(l);const h=oi().then(v=>{if(v)return n.getId()}),[y,d]=await Promise.all([l,h]);Yr(i)||zr(i,y.measurementId),r("js",new Date);const m=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return m[qr]="firebase",m.update=!0,d!=null&&(m[Mr]=d),r("config",y.measurementId,m),y.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.app=e}_delete(){return delete Te[this.app.options.appId],Promise.resolve()}}let Te={},Pt=[];const Ot={};let Ye="dataLayer",li="gtag",Dt,Os,Rt=!1;function di(){const t=[];if(Qs()&&t.push("This is a browser extension environment."),Vs()||t.push("Cookies are not available."),t.length>0){const e=t.map((n,r)=>`(${r+1}) ${n}`).join(" "),s=_.create("invalid-analytics-context",{errorInfo:e});F.warn(s.message)}}function hi(t,e,s){di();const n=t.options.appId;if(!n)throw _.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)F.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw _.create("no-api-key");if(Te[n]!=null)throw _.create("already-exists",{id:n});if(!Rt){Br(Ye);const{wrappedGtag:i,gtagCore:o}=Wr(Te,Pt,Ot,Ye,li);Os=i,Dt=o,Rt=!0}return Te[n]=ci(t,Pt,Ot,e,Dt,Ye,s),new ui(t)}function fi(t=Bs()){t=Yt(t);const e=Ue(t,Le);return e.isInitialized()?e.getImmediate():pi(t)}function pi(t,e={}){const s=Ue(t,Le);if(s.isInitialized()){const r=s.getImmediate();if(Gs(e,s.getOptions()))return r;throw _.create("already-initialized")}return s.initialize({options:e})}function mi(t,e,s,n){t=Yt(t),ai(Os,Te[t.app.options.appId],e,s,n).catch(r=>F.error(r))}const Ft="@firebase/analytics",_t="0.10.8";function yi(){ke(new Ne(Le,(e,{options:s})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return hi(n,r,s)},"PUBLIC")),ke(new Ne("analytics-internal",t,"PRIVATE")),_e(Ft,_t),_e(Ft,_t,"esm2017");function t(e){try{const s=e.getProvider(Le).getImmediate();return{logEvent:(n,r,i)=>mi(s,n,r,i)}}catch(s){throw _.create("interop-component-reg-failed",{reason:s})}}}yi();var je=(t=>(t.OWNER="owner",t.ADMIN="admin",t.DESIGNER="designer",t.VIEWER="viewer",t))(je||{});const gi={apiKey:"AIzaSyCk3y7jgkkKlNOOdyMr1X-M0-Npyxcae_U",authDomain:"inventory-management-090999.firebaseapp.com",projectId:"inventory-management-090999",storageBucket:"inventory-management-090999.firebasestorage.app",messagingSenderId:"438790134101",appId:"1:438790134101:web:3aaa1ff1f9b426cb5277dc",measurementId:"G-K1BSF601RY"},Ge=Hs(gi),he=Ws(Ge),xe=Ys(Ge),Wi=Js(Ge);typeof window<"u"&&Xs(xe,an).then(()=>{console.log("Firebase Auth persistence set to LOCAL - users will stay logged in across browser sessions")}).catch(t=>{console.error("Error setting Firebase Auth persistence:",t)});typeof window<"u"&&fi(Ge);typeof window<"u"&&console.log("Firestore offline persistence is enabled by default in modern Firebase versions");const vi=t=>{if(t instanceof en)return t.toDate();if(t instanceof Date)return t;if(typeof t=="string"){const e=t.trim();if(/^\d{4}-\d{2}-\d{2}$/.test(e)){const[s,n,r]=e.split("-").map(Number);return new Date(s,n-1,r)}return new Date(t)}if(typeof t=="number")return new Date(t);if(!t)return new Date;try{return new Date(t)}catch(e){return console.warn("Failed to convert timestamp to date:",t,e),new Date}},Yi=t=>{if(console.log("convertTimestamps - input data:",t),console.log("convertTimestamps - transaction_images in input:",t.transaction_images),!t||typeof t!="object")return t;const e={...t},s=["createdAt","updatedAt","lastActivity","uploadedAt","generatedAt","lastScanned"],n=i=>{if(!i||typeof i!="object")return i;const o={...i};return Array.isArray(o)?(console.log("convertTimestamps - processing array:",o),o.map(a=>(console.log("convertTimestamps - processing array item:",a),n(a)))):(s.forEach(a=>{o[a]&&(console.log("convertTimestamps - converting timestamp field:",a,o[a]),o[a]=vi(o[a]))}),Object.keys(o).forEach(a=>{o[a]&&typeof o[a]=="object"&&(Array.isArray(o[a])?(console.log("convertTimestamps - processing array field:",a,o[a]),o[a]=o[a].map(l=>n(l))):(console.log("convertTimestamps - recursing into nested object:",a,o[a]),o[a]=n(o[a])))}),o)},r=n(e);return console.log("convertTimestamps - final result:",r),console.log("convertTimestamps - transaction_images in final result:",r.transaction_images),r},wi=async()=>new Promise((t,e)=>{const s=xe.onAuthStateChanged(n=>{s(),t(n)});setTimeout(()=>{s(),e(new Error("Authentication state check timeout"))},5e3)}),Ji=async()=>{try{console.log("Ensuring authentication for storage operations...");const t=await wi();if(!t){console.warn("No authenticated user found for storage operations");return}try{if(!await t.getIdToken()){console.warn("User authenticated but no valid token, attempting refresh...");try{await t.reload(),await t.getIdToken()||console.warn("Token refresh failed, but proceeding with current auth state")}catch(s){console.warn("Token refresh error:",s)}}}catch(e){console.warn("Token verification error:",e)}console.log("Storage authentication check completed for user:",t.uid)}catch(t){console.error("Error during storage authentication check:",t)}},Ds=new Zs;Ds.setCustomParameters({prompt:"select_account"});const bi=async()=>{try{const e=(await nn(xe,Ds)).user;return await rt(e),e}catch(t){throw console.error("Google sign-in error:",t),t}},xi=async()=>{try{await sn(xe)}catch(t){throw console.error("Sign-out error:",t),t}},rt=async t=>{var e;try{const s=Oe(he,"users",t.uid),n=await Jt(s),r={id:t.uid,email:t.email||"",displayName:t.displayName||((e=t.email)==null?void 0:e.split("@")[0])||"User",lastLogin:new Date};if(n.exists())await Je(s,r,{merge:!0});else{let i=je.VIEWER;if(t.email){const a=await Ii(t.email);if(a)i=a.role,await Ti(a.invitationId),console.log("User invited with role:",i);else{const l=Xt(he,"users");(await Zt(l)).empty&&(i=je.OWNER)}}const o={...r,role:i,createdAt:new Date,lastLogin:new Date};await Je(s,o)}}catch(s){throw console.error("Error creating/updating user document:",s),s}},Xi=async(t,e,s)=>{try{const n=`${t.replace("@","_").replace(".","_")}_${Date.now()}`,r=Oe(he,"invitations",n);await Je(r,{email:t,role:e,invitedBy:s,status:"pending",createdAt:new Date,expiresAt:new Date(Date.now()+7*24*60*60*1e3)}),console.log("Invitation created for:",t)}catch(n){throw console.error("Error creating invitation:",n),n}},Ii=async t=>{try{const e=Xt(he,"invitations"),s=rn(e,gt("email","==",t),gt("status","==","pending")),n=await Zt(s);if(!n.empty){const r=n.docs[0].data(),i=n.docs[0].id;return r.expiresAt.toDate()<new Date?(await es(Oe(he,"invitations",i),{status:"expired"}),null):{role:r.role,invitationId:i}}return null}catch(e){return console.error("Error checking invitation:",e),null}},Ti=async t=>{try{await es(Oe(he,"invitations",t),{status:"accepted",acceptedAt:new Date}),console.log("Invitation accepted:",t)}catch(e){throw console.error("Error accepting invitation:",e),e}},Ai=async t=>{try{const e=await Jt(Oe(he,"users",t));return e.exists()?e.data():null}catch(e){return console.error("Error fetching user data:",e),null}},Si=t=>tn(xe,t),kt=async()=>{const t=xe.currentUser;if(!t)return{firebaseUser:null,appUser:null};const e=await Ai(t.uid);return{firebaseUser:t,appUser:e}},Rs=w.createContext(void 0);function ji({children:t}){const[e,s]=w.useState(null),[n,r]=w.useState(null),[i,o]=w.useState(!0);w.useEffect(()=>{let d=!0;return Si(async v=>{if(s(v),v)try{await rt(v);const{appUser:x}=await kt();r(x),x!=null&&x.email?console.log("User authentication completed successfully:",x.email):(console.warn("User document created but no email found in user data"),r(null))}catch(x){console.error("Error fetching user data:",x),r(null)}else r(null);d&&(o(!1),d=!1)})},[]);const y={firebaseUser:e,user:n,loading:i,signIn:async()=>{try{o(!0);const d=await bi();await rt(d);const{appUser:m}=await kt();r(m)}catch(d){throw console.error("Sign in error:",d),d}finally{o(!1)}},signOut:async()=>{try{o(!0),await xi()}catch(d){throw console.error("Sign out error:",d),d}finally{o(!1)}},isAuthenticated:!!e,hasRole:d=>(n==null?void 0:n.role)===d||(n==null?void 0:n.role)===je.OWNER||(n==null?void 0:n.role)===je.ADMIN};return u.jsx(Rs.Provider,{value:y,children:t})}function ft(){const t=w.useContext(Rs);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function Fs({variant:t="primary",size:e="md",className:s,children:n,...r}){const i="inline-flex items-center justify-center font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",o={primary:"text-white bg-primary-600 hover:bg-primary-700 focus:ring-primary-500 border border-transparent",secondary:"text-gray-700 bg-white hover:bg-gray-50 focus:ring-primary-500 border border-gray-300",danger:"text-white bg-red-600 hover:bg-red-700 focus:ring-red-500 border border-transparent"},a={sm:"px-3 py-2 text-sm rounded-md",md:"px-4 py-2 text-sm rounded-md",lg:"px-6 py-3 text-base rounded-md"},l=se(i,o[t],a[e],s);return u.jsx("button",{className:l,...r,children:n})}function Ci(){const{user:t,signOut:e,loading:s}=ft();return u.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:u.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex h-16 justify-between items-center",children:[u.jsx("div",{className:"flex items-center",children:u.jsx(mt,{to:"/",className:"text-xl font-bold text-gray-900",children:"1584 Design Inventory & Transactions"})}),u.jsx("div",{className:"flex items-center space-x-4",children:t&&u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs(mt,{to:"/settings",className:"flex items-center space-x-1 text-sm text-gray-700 hover:text-gray-900",children:[u.jsx(on,{className:"h-4 w-4"}),u.jsx("span",{children:"Settings"})]}),u.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[u.jsx(cn,{className:"h-4 w-4"}),u.jsx("span",{className:"font-medium",children:t.displayName}),u.jsxs("span",{className:"text-gray-500",children:["(",t.email,")"]})]}),u.jsxs(Fs,{variant:"secondary",size:"sm",onClick:e,disabled:s,className:"flex items-center space-x-1",children:[u.jsx(un,{className:"h-4 w-4"}),u.jsx("span",{children:"Sign Out"})]})]})})]})})})}function Ei({children:t}){return u.jsx("div",{className:"min-h-screen bg-gray-50",children:u.jsxs("div",{className:"flex flex-col",children:[u.jsx(Ci,{}),u.jsx("main",{className:"flex-1 py-6",children:u.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:t||u.jsx(Ms,{})})})]})})}function Pi({size:t="md",className:e}){const s={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return u.jsx("div",{className:se("flex items-center justify-center",e),children:u.jsx(ln,{className:se("animate-spin text-primary-600",s[t])})})}const Oi={success:pn,error:fn,warning:hn,info:dn},Di={success:{container:"bg-green-50 border-green-200",icon:"text-green-400",text:"text-green-800",button:"text-green-400 hover:bg-green-100"},error:{container:"bg-red-50 border-red-200",icon:"text-red-400",text:"text-red-800",button:"text-red-400 hover:bg-red-100"},warning:{container:"bg-yellow-50 border-yellow-200",icon:"text-yellow-400",text:"text-yellow-800",button:"text-yellow-400 hover:bg-yellow-100"},info:{container:"bg-blue-50 border-blue-200",icon:"text-blue-400",text:"text-blue-800",button:"text-blue-400 hover:bg-blue-100"}};function Ri({toast:t,onClose:e}){const[s,n]=w.useState(!1),[r,i]=w.useState(!1),o=Oi[t.type],a=Di[t.type];w.useEffect(()=>{n(!0);const h=t.duration||(t.type==="error"?6e3:4e3),y=setTimeout(()=>{l()},h);return()=>clearTimeout(y)},[t.duration,t.type]);const l=()=>{i(!0),setTimeout(()=>{e(t.id)},300)};return u.jsxs("div",{className:se("flex items-center justify-between p-4 mb-3 border rounded-lg shadow-sm transition-all duration-300 transform",a.container,s&&!r?"translate-x-0 opacity-100":"-translate-x-full opacity-0"),children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(o,{className:se("h-5 w-5 mr-3 flex-shrink-0",a.icon)}),u.jsx("p",{className:se("text-sm font-medium",a.text),children:t.message})]}),u.jsx("button",{onClick:l,className:se("ml-4 inline-flex rounded-md p-1.5 transition-colors duration-200",a.button),children:u.jsx(mn,{className:"h-4 w-4"})})]})}const _s=w.createContext(void 0);function Zi(){const t=w.useContext(_s);if(t===void 0)throw new Error("useToast must be used within a ToastProvider");return t}function Fi({children:t}){const[e,s]=w.useState([]),n=()=>Math.random().toString(36).substr(2,9),r=w.useCallback((d,m,v)=>{const x=n(),b={id:x,message:d,type:m,duration:v};return s(A=>[...A,b]),setTimeout(()=>{h(x)},(v||(m==="error"?6e3:4e3))+300),x},[]),i=w.useCallback((d,m)=>r(d,"success",m),[r]),o=w.useCallback((d,m)=>r(d,"error",m),[r]),a=w.useCallback((d,m)=>r(d,"warning",m),[r]),l=w.useCallback((d,m)=>r(d,"info",m),[r]),h=w.useCallback(d=>{s(m=>m.filter(v=>v.id!==d))},[]),y={showToast:r,showSuccess:i,showError:o,showWarning:a,showInfo:l,removeToast:h};return u.jsxs(_s.Provider,{value:y,children:[t,u.jsx("div",{className:"fixed top-4 right-4 z-50 min-w-96 max-w-sm",children:e.map(d=>u.jsx(Ri,{toast:d,onClose:h},d.id))})]})}function Nt({onSuccess:t}){const{signIn:e,loading:s}=ft(),[n,r]=w.useState(""),i=async()=>{try{r(""),await e(),t==null||t()}catch(o){console.error("Login error:",o),r("Failed to sign in. Please try again.")}};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"max-w-md w-full space-y-8",children:[u.jsxs("div",{children:[u.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-primary-100",children:u.jsx("span",{className:"text-2xl font-bold text-primary-600",children:"1584"})}),u.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Welcome to 1584 Design"}),u.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to access your inventory and transaction management system"})]}),u.jsxs("div",{className:"mt-8 space-y-6",children:[n&&u.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:u.jsx("div",{className:"text-sm text-red-600",children:n})}),u.jsx("div",{children:u.jsxs(Fs,{onClick:i,disabled:s,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",children:[u.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),u.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),u.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),u.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),s?"Signing in...":"Continue with Google"]})}),u.jsx("div",{className:"text-center",children:u.jsx("p",{className:"text-xs text-gray-500",children:"By signing in, you agree to our terms of service and privacy policy."})})]})]})})}function _i({children:t}){const{isAuthenticated:e,loading:s,user:n}=ft();return s?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e?n!=null&&n.email?u.jsx(u.Fragment,{children:t}):u.jsx(Nt,{}):u.jsx(Nt,{})}function ki(){return u.jsx(ji,{children:u.jsx(Fi,{children:u.jsx(_i,{children:u.jsx(Ei,{children:u.jsx(w.Suspense,{fallback:u.jsx(Pi,{}),children:u.jsxs(qs,{children:[u.jsx(M,{path:"/",element:u.jsx(Mt,{})}),u.jsx(M,{path:"/projects",element:u.jsx(Mt,{})}),u.jsx(M,{path:"/settings",element:u.jsx(Qi,{})}),u.jsx(M,{path:"/item/:id",element:u.jsx(qt,{})}),u.jsx(M,{path:"/project/:id",element:u.jsx(Ni,{})}),u.jsx(M,{path:"/project/:id/item/:itemId",element:u.jsx(qt,{})}),u.jsx(M,{path:"/project/:id/item/add",element:u.jsx(Mi,{})}),u.jsx(M,{path:"/project/:id/edit-item/:itemId",element:u.jsx(qi,{})}),u.jsx(M,{path:"/project/:id/transaction/add",element:u.jsx(Li,{})}),u.jsx(M,{path:"/project/:id/transaction/:transactionId/edit",element:u.jsx(Ui,{})}),u.jsx(M,{path:"/project/:id/transaction/:transactionId",element:u.jsx($i,{})})]})})})})})})}const Mt=w.lazy(()=>G(()=>import("./Projects.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),qt=w.lazy(()=>G(()=>import("./ItemDetail.js"),__vite__mapDeps([8,1,2,5,3,4,9,10,11,7]))),Ni=w.lazy(()=>G(()=>import("./ProjectDetail.js"),__vite__mapDeps([12,2,1,3,4,9,7,5,6]))),Mi=w.lazy(()=>G(()=>import("./AddItem.js"),__vite__mapDeps([13,2,1,3,4,14,7]))),qi=w.lazy(()=>G(()=>import("./EditItem.js"),__vite__mapDeps([15,2,1,3,4,14,7]))),Li=w.lazy(()=>G(()=>import("./AddTransaction.js"),__vite__mapDeps([16,2,1,14,3,4,9,17,7,10,11]))),Ui=w.lazy(()=>G(()=>import("./EditTransaction.js"),__vite__mapDeps([18,2,1,3,4,9,17,7,10,11]))),$i=w.lazy(()=>G(()=>import("./TransactionDetail.js"),__vite__mapDeps([19,1,11,7,2,3,4,5]))),Qi=w.lazy(()=>G(()=>import("./Settings.js"),__vite__mapDeps([20,1,4,7,2]))),Ki=new Vn({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1}}});Xe.createRoot(document.getElementById("root")).render(u.jsx(Ns.StrictMode,{children:u.jsx(Wn,{client:Ki,children:u.jsx(Ls,{children:u.jsx(ki,{})})})}));export{Fs as B,je as U,Zi as a,Xi as b,Yi as c,he as d,Ji as e,u as j,Wi as s,ft as u};
//# sourceMappingURL=index.js.map
