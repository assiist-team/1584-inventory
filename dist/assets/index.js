const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AuthCallback.js","assets/vendor.js","assets/useStackedNavigate.js","assets/router.js","assets/supabase.js","assets/ui.js","assets/InviteAccept.js","assets/Projects.js","assets/useNavigationContext.js","assets/inventoryService.js","assets/taxPresetsService.js","assets/BudgetProgress.js","assets/CategorySelect.js","assets/ContextLink.js","assets/ItemDetail.js","assets/ContextBackLink.js","assets/dispositionUtils.js","assets/imageService.js","assets/ImagePreview.js","assets/ItemLineageBreadcrumb.js","assets/useDuplication.js","assets/ProjectDetail.js","assets/useBookmark.js","assets/ProjectInvoice.js","assets/PropertyManagementSummary.js","assets/ClientSummary.js","assets/AddItem.js","assets/vendorDefaultsService.js","assets/Select.js","assets/EditItem.js","assets/AddTransaction.js","assets/ImageUpload.js","assets/TransactionItemForm.js","assets/EditTransaction.js","assets/TransactionDetail.js","assets/Settings.js","assets/BusinessInventory.js","assets/BusinessInventoryItemDetail.js","assets/AddBusinessInventoryItem.js","assets/EditBusinessInventoryItem.js","assets/AddBusinessInventoryTransaction.js","assets/EditBusinessInventoryTransaction.js"])))=>i.map(i=>d[i]);
var rt=t=>{throw TypeError(t)};var Ke=(t,e,r)=>e.has(t)||rt("Cannot "+r);var a=(t,e,r)=>(Ke(t,e,"read from private field"),r?r.call(t):e.get(t)),S=(t,e,r)=>e.has(t)?rt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),g=(t,e,r,s)=>(Ke(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r),k=(t,e,r)=>(Ke(t,e,"access private method"),r);var ke=(t,e,r,s)=>({set _(n){g(t,e,n,r)},get _(){return a(t,e,s)}});import{r as l,a as Qt,b as Bt}from"./vendor.js";import{u as zt,L as Le,O as Kt,R as st,a as A,B as Vt}from"./router.js";import{c as Gt}from"./supabase.js";import{c as ue,F as Ht,P as Wt,S as Yt,L as Jt,a as Xt,I as Zt,A as er,X as tr,C as rr,b as sr}from"./ui.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();var At={exports:{}},$e={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nr=l,ir=Symbol.for("react.element"),ar=Symbol.for("react.fragment"),or=Object.prototype.hasOwnProperty,cr=nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ur={key:!0,ref:!0,__self:!0,__source:!0};function Pt(t,e,r){var s,n={},o=null,u=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(u=e.ref);for(s in e)or.call(e,s)&&!ur.hasOwnProperty(s)&&(n[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)n[s]===void 0&&(n[s]=e[s]);return{$$typeof:ir,type:t,key:o,ref:u,props:n,_owner:cr.current}}$e.Fragment=ar;$e.jsx=Pt;$e.jsxs=Pt;At.exports=$e;var i=At.exports,Ge={},nt=Qt;Ge.createRoot=nt.createRoot,Ge.hydrateRoot=nt.hydrateRoot;var Qe=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},lr={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},se,Xe,vt,dr=(vt=class{constructor(){S(this,se,lr);S(this,Xe,!1)}setTimeoutProvider(t){g(this,se,t)}setTimeout(t,e){return a(this,se).setTimeout(t,e)}clearTimeout(t){a(this,se).clearTimeout(t)}setInterval(t,e){return a(this,se).setInterval(t,e)}clearInterval(t){a(this,se).clearInterval(t)}},se=new WeakMap,Xe=new WeakMap,vt),He=new dr;function hr(t){setTimeout(t,0)}var Be=typeof window>"u"||"Deno"in globalThis;function z(){}function fr(t,e){return typeof t=="function"?t(e):t}function mr(t){return typeof t=="number"&&t>=0&&t!==1/0}function pr(t,e){return Math.max(t+(e||0)-Date.now(),0)}function We(t,e){return typeof t=="function"?t(e):t}function yr(t,e){return typeof t=="function"?t(e):t}function it(t,e){const{type:r="all",exact:s,fetchStatus:n,predicate:o,queryKey:u,stale:c}=t;if(u){if(s){if(e.queryHash!==Ze(u,e.options))return!1}else if(!De(e.queryKey,u))return!1}if(r!=="all"){const h=e.isActive();if(r==="active"&&!h||r==="inactive"&&h)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||n&&n!==e.state.fetchStatus||o&&!o(e))}function at(t,e){const{exact:r,status:s,predicate:n,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(r){if(Oe(e.options.mutationKey)!==Oe(o))return!1}else if(!De(e.options.mutationKey,o))return!1}return!(s&&e.state.status!==s||n&&!n(e))}function Ze(t,e){return((e==null?void 0:e.queryKeyHashFn)||Oe)(t)}function Oe(t){return JSON.stringify(t,(e,r)=>Ye(r)?Object.keys(r).sort().reduce((s,n)=>(s[n]=r[n],s),{}):r)}function De(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>De(t[r],e[r])):!1}var gr=Object.prototype.hasOwnProperty;function Ot(t,e){if(t===e)return t;const r=ot(t)&&ot(e);if(!r&&!(Ye(t)&&Ye(e)))return e;const n=(r?t:Object.keys(t)).length,o=r?e:Object.keys(e),u=o.length,c=r?new Array(u):{};let h=0;for(let m=0;m<u;m++){const p=r?m:o[m],f=t[p],w=e[p];if(f===w){c[p]=f,(r?m<n:gr.call(t,p))&&h++;continue}if(f===null||w===null||typeof f!="object"||typeof w!="object"){c[p]=w;continue}const d=Ot(f,w);c[p]=d,d===f&&h++}return n===u&&h===n?t:c}function ot(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ye(t){if(!ct(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!ct(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function ct(t){return Object.prototype.toString.call(t)==="[object Object]"}function vr(t){return new Promise(e=>{He.setTimeout(e,t)})}function wr(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?Ot(t,e):e}function xr(t,e,r=0){const s=[...t,e];return r&&s.length>r?s.slice(1):s}function br(t,e,r=0){const s=[e,...t];return r&&s.length>r?s.slice(0,-1):s}var et=Symbol();function Dt(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===et?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var le,ne,ve,wt,_r=(wt=class extends Qe{constructor(){super();S(this,le);S(this,ne);S(this,ve);g(this,ve,e=>{if(!Be&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){a(this,ne)||this.setEventListener(a(this,ve))}onUnsubscribe(){var e;this.hasListeners()||((e=a(this,ne))==null||e.call(this),g(this,ne,void 0))}setEventListener(e){var r;g(this,ve,e),(r=a(this,ne))==null||r.call(this),g(this,ne,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){a(this,le)!==e&&(g(this,le,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof a(this,le)=="boolean"?a(this,le):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},le=new WeakMap,ne=new WeakMap,ve=new WeakMap,wt),Ct=new _r;function Sr(){let t,e;const r=new Promise((n,o)=>{t=n,e=o});r.status="pending",r.catch(()=>{});function s(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{s({status:"fulfilled",value:n}),t(n)},r.reject=n=>{s({status:"rejected",reason:n}),e(n)},r}var Er=hr;function Ir(){let t=[],e=0,r=c=>{c()},s=c=>{c()},n=Er;const o=c=>{e?t.push(c):n(()=>{r(c)})},u=()=>{const c=t;t=[],c.length&&n(()=>{s(()=>{c.forEach(h=>{r(h)})})})};return{batch:c=>{let h;e++;try{h=c()}finally{e--,e||u()}return h},batchCalls:c=>(...h)=>{o(()=>{c(...h)})},schedule:o,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{s=c},setScheduler:c=>{n=c}}}var q=Ir(),we,ie,xe,xt,jr=(xt=class extends Qe{constructor(){super();S(this,we,!0);S(this,ie);S(this,xe);g(this,xe,e=>{if(!Be&&window.addEventListener){const r=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){a(this,ie)||this.setEventListener(a(this,xe))}onUnsubscribe(){var e;this.hasListeners()||((e=a(this,ie))==null||e.call(this),g(this,ie,void 0))}setEventListener(e){var r;g(this,xe,e),(r=a(this,ie))==null||r.call(this),g(this,ie,e(this.setOnline.bind(this)))}setOnline(e){a(this,we)!==e&&(g(this,we,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return a(this,we)}},we=new WeakMap,ie=new WeakMap,xe=new WeakMap,xt),Me=new jr;function Ar(t){return Math.min(1e3*2**t,3e4)}function Tt(t){return(t??"online")==="online"?Me.isOnline():!0}var Je=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Nt(t){let e=!1,r=0,s;const n=Sr(),o=()=>n.status!=="pending",u=v=>{var _;if(!o()){const E=new Je(v);w(E),(_=t.onCancel)==null||_.call(t,E)}},c=()=>{e=!0},h=()=>{e=!1},m=()=>Ct.isFocused()&&(t.networkMode==="always"||Me.isOnline())&&t.canRun(),p=()=>Tt(t.networkMode)&&t.canRun(),f=v=>{o()||(s==null||s(),n.resolve(v))},w=v=>{o()||(s==null||s(),n.reject(v))},d=()=>new Promise(v=>{var _;s=E=>{(o()||m())&&v(E)},(_=t.onPause)==null||_.call(t)}).then(()=>{var v;s=void 0,o()||(v=t.onContinue)==null||v.call(t)}),x=()=>{if(o())return;let v;const _=r===0?t.initialPromise:void 0;try{v=_??t.fn()}catch(E){v=Promise.reject(E)}Promise.resolve(v).then(f).catch(E=>{var M;if(o())return;const F=t.retry??(Be?0:3),I=t.retryDelay??Ar,y=typeof I=="function"?I(r,E):I,C=F===!0||typeof F=="number"&&r<F||typeof F=="function"&&F(r,E);if(e||!C){w(E);return}r++,(M=t.onFail)==null||M.call(t,r,E),vr(y).then(()=>m()?void 0:d()).then(()=>{e?w(E):x()})})};return{promise:n,status:()=>n.status,cancel:u,continue:()=>(s==null||s(),n),cancelRetry:c,continueRetry:h,canStart:p,start:()=>(p()?x():d().then(x),n)}}var de,bt,Rt=(bt=class{constructor(){S(this,de)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),mr(this.gcTime)&&g(this,de,He.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Be?1/0:5*60*1e3))}clearGcTimeout(){a(this,de)&&(He.clearTimeout(a(this,de)),g(this,de,void 0))}},de=new WeakMap,bt),he,be,B,fe,R,Ce,me,K,Z,_t,Pr=(_t=class extends Rt{constructor(e){super();S(this,K);S(this,he);S(this,be);S(this,B);S(this,fe);S(this,R);S(this,Ce);S(this,me);g(this,me,!1),g(this,Ce,e.defaultOptions),this.setOptions(e.options),this.observers=[],g(this,fe,e.client),g(this,B,a(this,fe).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,g(this,he,ut(this.options)),this.state=e.state??a(this,he),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=a(this,R))==null?void 0:e.promise}setOptions(e){if(this.options={...a(this,Ce),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=ut(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),g(this,he,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&a(this,B).remove(this)}setData(e,r){const s=wr(this.state.data,e,this.options);return k(this,K,Z).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(e,r){k(this,K,Z).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var s,n;const r=(s=a(this,R))==null?void 0:s.promise;return(n=a(this,R))==null||n.cancel(e),r?r.then(z).catch(z):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(a(this,he))}isActive(){return this.observers.some(e=>yr(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===et||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>We(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!pr(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=a(this,R))==null||r.continue()}onOnline(){var r;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=a(this,R))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),a(this,B).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(a(this,R)&&(a(this,me)?a(this,R).cancel({revert:!0}):a(this,R).cancelRetry()),this.scheduleGc()),a(this,B).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||k(this,K,Z).call(this,{type:"invalidate"})}async fetch(e,r){var h,m,p,f,w,d,x,v,_,E,F,I;if(this.state.fetchStatus!=="idle"&&((h=a(this,R))==null?void 0:h.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(a(this,R))return a(this,R).continueRetry(),a(this,R).promise}if(e&&this.setOptions(e),!this.options.queryFn){const y=this.observers.find(C=>C.options.queryFn);y&&this.setOptions(y.options)}const s=new AbortController,n=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(g(this,me,!0),s.signal)})},o=()=>{const y=Dt(this.options,r),M=(()=>{const P={client:a(this,fe),queryKey:this.queryKey,meta:this.meta};return n(P),P})();return g(this,me,!1),this.options.persister?this.options.persister(y,M,this):y(M)},c=(()=>{const y={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:a(this,fe),state:this.state,fetchFn:o};return n(y),y})();(m=this.options.behavior)==null||m.onFetch(c,this),g(this,be,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=c.fetchOptions)==null?void 0:p.meta))&&k(this,K,Z).call(this,{type:"fetch",meta:(f=c.fetchOptions)==null?void 0:f.meta}),g(this,R,Nt({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,onCancel:y=>{y instanceof Je&&y.revert&&this.setState({...a(this,be),fetchStatus:"idle"}),s.abort()},onFail:(y,C)=>{k(this,K,Z).call(this,{type:"failed",failureCount:y,error:C})},onPause:()=>{k(this,K,Z).call(this,{type:"pause"})},onContinue:()=>{k(this,K,Z).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const y=await a(this,R).start();if(y===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(y),(d=(w=a(this,B).config).onSuccess)==null||d.call(w,y,this),(v=(x=a(this,B).config).onSettled)==null||v.call(x,y,this.state.error,this),y}catch(y){if(y instanceof Je){if(y.silent)return a(this,R).promise;if(y.revert){if(this.state.data===void 0)throw y;return this.state.data}}throw k(this,K,Z).call(this,{type:"error",error:y}),(E=(_=a(this,B).config).onError)==null||E.call(_,y,this),(I=(F=a(this,B).config).onSettled)==null||I.call(F,this.state.data,y,this),y}finally{this.scheduleGc()}}},he=new WeakMap,be=new WeakMap,B=new WeakMap,fe=new WeakMap,R=new WeakMap,Ce=new WeakMap,me=new WeakMap,K=new WeakSet,Z=function(e){const r=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Or(s.data,this.options),fetchMeta:e.meta??null};case"success":const n={...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return g(this,be,e.manual?n:void 0),n;case"error":const o=e.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=r(this.state),q.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),a(this,B).notify({query:this,type:"updated",action:e})})},_t);function Or(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Tt(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function ut(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,s=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}function lt(t){return{onFetch:(e,r)=>{var p,f,w,d,x;const s=e.options,n=(w=(f=(p=e.fetchOptions)==null?void 0:p.meta)==null?void 0:f.fetchMore)==null?void 0:w.direction,o=((d=e.state.data)==null?void 0:d.pages)||[],u=((x=e.state.data)==null?void 0:x.pageParams)||[];let c={pages:[],pageParams:[]},h=0;const m=async()=>{let v=!1;const _=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},E=Dt(e.options,e.fetchOptions),F=async(I,y,C)=>{if(v)return Promise.reject();if(y==null&&I.pages.length)return Promise.resolve(I);const P=(()=>{const $={client:e.client,queryKey:e.queryKey,pageParam:y,direction:C?"backward":"forward",meta:e.options.meta};return _($),$})(),te=await E(P),{maxPages:T}=e.options,j=C?br:xr;return{pages:j(I.pages,te,T),pageParams:j(I.pageParams,y,T)}};if(n&&o.length){const I=n==="backward",y=I?Dr:dt,C={pages:o,pageParams:u},M=y(s,C);c=await F(C,M,I)}else{const I=t??o.length;do{const y=h===0?u[0]??s.initialPageParam:dt(s,c);if(h>0&&y==null)break;c=await F(c,y),h++}while(h<I)}return c};e.options.persister?e.fetchFn=()=>{var v,_;return(_=(v=e.options).persister)==null?void 0:_.call(v,m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=m}}}function dt(t,{pages:e,pageParams:r}){const s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,r[s],r):void 0}function Dr(t,{pages:e,pageParams:r}){var s;return e.length>0?(s=t.getPreviousPageParam)==null?void 0:s.call(t,e[0],e,r[0],r):void 0}var Te,H,U,pe,W,re,St,Cr=(St=class extends Rt{constructor(e){super();S(this,W);S(this,Te);S(this,H);S(this,U);S(this,pe);g(this,Te,e.client),this.mutationId=e.mutationId,g(this,U,e.mutationCache),g(this,H,[]),this.state=e.state||Tr(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){a(this,H).includes(e)||(a(this,H).push(e),this.clearGcTimeout(),a(this,U).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){g(this,H,a(this,H).filter(r=>r!==e)),this.scheduleGc(),a(this,U).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){a(this,H).length||(this.state.status==="pending"?this.scheduleGc():a(this,U).remove(this))}continue(){var e;return((e=a(this,pe))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var u,c,h,m,p,f,w,d,x,v,_,E,F,I,y,C,M,P,te,T;const r=()=>{k(this,W,re).call(this,{type:"continue"})},s={client:a(this,Te),meta:this.options.meta,mutationKey:this.options.mutationKey};g(this,pe,Nt({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(j,$)=>{k(this,W,re).call(this,{type:"failed",failureCount:j,error:$})},onPause:()=>{k(this,W,re).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>a(this,U).canRun(this)}));const n=this.state.status==="pending",o=!a(this,pe).canStart();try{if(n)r();else{k(this,W,re).call(this,{type:"pending",variables:e,isPaused:o}),await((c=(u=a(this,U).config).onMutate)==null?void 0:c.call(u,e,this,s));const $=await((m=(h=this.options).onMutate)==null?void 0:m.call(h,e,s));$!==this.state.context&&k(this,W,re).call(this,{type:"pending",context:$,variables:e,isPaused:o})}const j=await a(this,pe).start();return await((f=(p=a(this,U).config).onSuccess)==null?void 0:f.call(p,j,e,this.state.context,this,s)),await((d=(w=this.options).onSuccess)==null?void 0:d.call(w,j,e,this.state.context,s)),await((v=(x=a(this,U).config).onSettled)==null?void 0:v.call(x,j,null,this.state.variables,this.state.context,this,s)),await((E=(_=this.options).onSettled)==null?void 0:E.call(_,j,null,e,this.state.context,s)),k(this,W,re).call(this,{type:"success",data:j}),j}catch(j){try{throw await((I=(F=a(this,U).config).onError)==null?void 0:I.call(F,j,e,this.state.context,this,s)),await((C=(y=this.options).onError)==null?void 0:C.call(y,j,e,this.state.context,s)),await((P=(M=a(this,U).config).onSettled)==null?void 0:P.call(M,void 0,j,this.state.variables,this.state.context,this,s)),await((T=(te=this.options).onSettled)==null?void 0:T.call(te,void 0,j,e,this.state.context,s)),j}finally{k(this,W,re).call(this,{type:"error",error:j})}}finally{a(this,U).runNext(this)}}},Te=new WeakMap,H=new WeakMap,U=new WeakMap,pe=new WeakMap,W=new WeakSet,re=function(e){const r=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),q.batch(()=>{a(this,H).forEach(s=>{s.onMutationUpdate(e)}),a(this,U).notify({mutation:this,type:"updated",action:e})})},St);function Tr(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ee,V,Ne,Et,Nr=(Et=class extends Qe{constructor(e={}){super();S(this,ee);S(this,V);S(this,Ne);this.config=e,g(this,ee,new Set),g(this,V,new Map),g(this,Ne,0)}build(e,r,s){const n=new Cr({client:e,mutationCache:this,mutationId:++ke(this,Ne)._,options:e.defaultMutationOptions(r),state:s});return this.add(n),n}add(e){a(this,ee).add(e);const r=Ue(e);if(typeof r=="string"){const s=a(this,V).get(r);s?s.push(e):a(this,V).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(a(this,ee).delete(e)){const r=Ue(e);if(typeof r=="string"){const s=a(this,V).get(r);if(s)if(s.length>1){const n=s.indexOf(e);n!==-1&&s.splice(n,1)}else s[0]===e&&a(this,V).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=Ue(e);if(typeof r=="string"){const s=a(this,V).get(r),n=s==null?void 0:s.find(o=>o.state.status==="pending");return!n||n===e}else return!0}runNext(e){var s;const r=Ue(e);if(typeof r=="string"){const n=(s=a(this,V).get(r))==null?void 0:s.find(o=>o!==e&&o.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){q.batch(()=>{a(this,ee).forEach(e=>{this.notify({type:"removed",mutation:e})}),a(this,ee).clear(),a(this,V).clear()})}getAll(){return Array.from(a(this,ee))}find(e){const r={exact:!0,...e};return this.getAll().find(s=>at(r,s))}findAll(e={}){return this.getAll().filter(r=>at(e,r))}notify(e){q.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return q.batch(()=>Promise.all(e.map(r=>r.continue().catch(z))))}},ee=new WeakMap,V=new WeakMap,Ne=new WeakMap,Et);function Ue(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Y,It,Rr=(It=class extends Qe{constructor(e={}){super();S(this,Y);this.config=e,g(this,Y,new Map)}build(e,r,s){const n=r.queryKey,o=r.queryHash??Ze(n,r);let u=this.get(o);return u||(u=new Pr({client:e,queryKey:n,queryHash:o,options:e.defaultQueryOptions(r),state:s,defaultOptions:e.getQueryDefaults(n)}),this.add(u)),u}add(e){a(this,Y).has(e.queryHash)||(a(this,Y).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=a(this,Y).get(e.queryHash);r&&(e.destroy(),r===e&&a(this,Y).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){q.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return a(this,Y).get(e)}getAll(){return[...a(this,Y).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(s=>it(r,s))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(s=>it(e,s)):r}notify(e){q.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){q.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){q.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Y=new WeakMap,It),O,ae,oe,_e,Se,ce,Ee,Ie,jt,Fr=(jt=class{constructor(t={}){S(this,O);S(this,ae);S(this,oe);S(this,_e);S(this,Se);S(this,ce);S(this,Ee);S(this,Ie);g(this,O,t.queryCache||new Rr),g(this,ae,t.mutationCache||new Nr),g(this,oe,t.defaultOptions||{}),g(this,_e,new Map),g(this,Se,new Map),g(this,ce,0)}mount(){ke(this,ce)._++,a(this,ce)===1&&(g(this,Ee,Ct.subscribe(async t=>{t&&(await this.resumePausedMutations(),a(this,O).onFocus())})),g(this,Ie,Me.subscribe(async t=>{t&&(await this.resumePausedMutations(),a(this,O).onOnline())})))}unmount(){var t,e;ke(this,ce)._--,a(this,ce)===0&&((t=a(this,Ee))==null||t.call(this),g(this,Ee,void 0),(e=a(this,Ie))==null||e.call(this),g(this,Ie,void 0))}isFetching(t){return a(this,O).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return a(this,ae).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=a(this,O).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=a(this,O).build(this,e),s=r.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(We(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(t){return a(this,O).findAll(t).map(({queryKey:e,state:r})=>{const s=r.data;return[e,s]})}setQueryData(t,e,r){const s=this.defaultQueryOptions({queryKey:t}),n=a(this,O).get(s.queryHash),o=n==null?void 0:n.state.data,u=fr(e,o);if(u!==void 0)return a(this,O).build(this,s).setData(u,{...r,manual:!0})}setQueriesData(t,e,r){return q.batch(()=>a(this,O).findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=a(this,O).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=a(this,O);q.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=a(this,O);return q.batch(()=>(r.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},s=q.batch(()=>a(this,O).findAll(t).map(n=>n.cancel(r)));return Promise.all(s).then(z).catch(z)}invalidateQueries(t,e={}){return q.batch(()=>(a(this,O).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},s=q.batch(()=>a(this,O).findAll(t).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let o=n.fetch(void 0,r);return r.throwOnError||(o=o.catch(z)),n.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(z)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=a(this,O).build(this,e);return r.isStaleByTime(We(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(z).catch(z)}fetchInfiniteQuery(t){return t.behavior=lt(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(z).catch(z)}ensureInfiniteQueryData(t){return t.behavior=lt(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Me.isOnline()?a(this,ae).resumePausedMutations():Promise.resolve()}getQueryCache(){return a(this,O)}getMutationCache(){return a(this,ae)}getDefaultOptions(){return a(this,oe)}setDefaultOptions(t){g(this,oe,t)}setQueryDefaults(t,e){a(this,_e).set(Oe(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...a(this,_e).values()],r={};return e.forEach(s=>{De(t,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(t,e){a(this,Se).set(Oe(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...a(this,Se).values()],r={};return e.forEach(s=>{De(t,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...a(this,oe).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Ze(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===et&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...a(this,oe).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){a(this,O).clear(),a(this,ae).clear()}},O=new WeakMap,ae=new WeakMap,oe=new WeakMap,_e=new WeakMap,Se=new WeakMap,ce=new WeakMap,Ee=new WeakMap,Ie=new WeakMap,jt),kr=l.createContext(void 0),Lr=({client:t,children:e})=>(l.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),i.jsx(kr.Provider,{value:t,children:e}));const Ur="modulepreload",qr=function(t){return"/"+t},ht={},D=function(e,r,s){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));n=Promise.allSettled(r.map(h=>{if(h=qr(h),h in ht)return;ht[h]=!0;const m=h.endsWith(".css"),p=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const f=document.createElement("link");if(f.rel=m?"stylesheet":Ur,m||(f.as="script"),f.crossOrigin="",f.href=h,c&&f.setAttribute("nonce",c),document.head.appendChild(f),m)return new Promise((w,d)=>{f.addEventListener("load",w),f.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return n.then(u=>{for(const c of u||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};var J=(t=>(t.OWNER="owner",t.ADMIN="admin",t.USER="user",t))(J||{});const Mr=t=>{if(t instanceof Date)return t;if(typeof t=="string"){const e=t.trim();if(/^\d{4}-\d{2}-\d{2}$/.test(e)){const[r,s,n]=e.split("-").map(Number);return new Date(r,s-1,n)}return new Date(t)}if(typeof t=="number")return new Date(t);if(!t)return new Date;try{return new Date(t)}catch(e){return console.warn("Failed to convert timestamp to date:",t,e),new Date}},Ae=t=>{if(!t||typeof t!="object")return t;if(Array.isArray(t))return t.map(s=>Ae(s));const e=["created_at","updated_at","last_activity","uploaded_at","generated_at","last_scanned","last_login","joined_at","accepted_at","expires_at","timestamp"],r=s=>{if(!s||typeof s!="object")return s;if(Array.isArray(s))return s.map(o=>r(o));const n={...s};return e.forEach(o=>{if(n[o]!==void 0&&n[o]!==null){const u=n[o];(typeof u=="string"||typeof u=="number"||u instanceof Date)&&(n[o]=Mr(u))}}),Object.keys(n).forEach(o=>{const u=n[o];u!=null&&typeof u=="object"&&!(u instanceof Date)&&(Array.isArray(u)?n[o]=u.map(c=>r(c)):n[o]=r(u))}),n};return r(t)},$r=t=>(t==null?void 0:t.code)==="PGRST116",Qr=t=>(t==null?void 0:t.code)==="23503",Br=t=>(t==null?void 0:t.code)==="23505",zr=t=>(t==null?void 0:t.code)==="42501"||(t==null?void 0:t.code)==="PGRST301",zs=(t,e={})=>{if(!t)return null;const{throwOnError:r=!0,returnNullOnNotFound:s=!1}=e;if(s&&$r(t))return null;if(console.error("Supabase error:",{code:t.code,message:t.message,details:t.details,hint:t.hint}),r){let n=t.message||"Database error occurred";throw zr(t)?n="Permission denied. You may not have access to this resource.":Qr(t)?n="Cannot perform this operation due to related records.":Br(t)&&(n="A record with this information already exists."),new Error(n)}return null},Ks=async()=>{const{data:{session:t}}=await b.auth.getSession();if(!t)throw new Error("User must be authenticated to perform this operation")},Pe={async createAccount(t,e){const{data:r,error:s}=await b.from("accounts").insert({name:t,created_by:e,created_at:new Date().toISOString()}).select("id").single();if(s)throw s;return r.id},async getAccount(t){const{data:e,error:r}=await b.from("accounts").select("*").eq("id",t).single();if(r){if(r.code==="PGRST116")return null;throw r}const s=Ae(e);return{id:s.id,name:s.name,createdAt:s.created_at,createdBy:s.created_by}},async getUserAccount(t){const{data:e,error:r}=await b.from("users").select("account_id").eq("id",t).single();return r||!(e!=null&&e.account_id)?null:await this.getAccount(e.account_id)},async assignUserToAccount(t,e){const{error:r}=await b.from("users").update({account_id:e}).eq("id",t);if(r)throw r},async removeUserFromAccount(t){const{error:e}=await b.from("users").update({account_id:null}).eq("id",t);if(e)throw e},async getAccountUsers(t){const{data:e,error:r}=await b.from("users").select("*").eq("account_id",t);if(r)throw r;return(e||[]).map(s=>{const n=Ae(s);return{id:n.id,email:n.email,fullName:n.full_name,accountId:n.account_id,role:n.role||null,createdAt:n.created_at?new Date(n.created_at):new Date,lastLogin:n.last_login?new Date(n.last_login):new Date}})},async isAccountMember(t,e){const{data:r,error:s}=await b.from("users").select("role, account_id").eq("id",t).single();return s?!1:r.role==="owner"?!0:r.account_id===e},async getAllAccounts(){const{data:t,error:e}=await b.from("accounts").select("*").order("created_at",{ascending:!1});if(e)throw e;return(t||[]).map(r=>{const s=Ae(r);return{id:s.id,name:s.name,createdAt:s.created_at,createdBy:s.created_by}})}},Kr="https://rwevbekceexnoaabdnbz.supabase.co",Vr="sb_publishable_6egKYDm7XsfIPvwDD5qqpg_eY_5nYgW",b=Gt(Kr,Vr,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:typeof window<"u"?window.localStorage:void 0,storageKey:"supabase.auth.token"}}),Vs=async()=>{const{data:{user:t}}=await b.auth.getUser();return t},Gr=async()=>{try{const{error:t}=await b.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{prompt:"select_account"}}});if(t)throw t}catch(t){throw console.error("Google sign-in error:",t),t}},Gs=async(t,e)=>{try{const{data:r,error:s}=await b.auth.signUp({email:t,password:e,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}});if(s)throw s;r.user&&!r.session&&console.log("Email confirmation required. Check your email.")}catch(r){throw console.error("Email/password sign-up error:",r),r}},Hr=async()=>{try{const{error:t}=await b.auth.signOut();if(t)throw t}catch(t){throw console.error("Sign-out error:",t),t}},Wr=async t=>{var e,r,s;try{const{data:n,error:o}=await b.from("users").select("*").eq("id",t.id).single(),u={id:t.id,email:t.email||"",fullName:((e=t.user_metadata)==null?void 0:e.full_name)||((r=t.user_metadata)==null?void 0:r.name)||((s=t.email)==null?void 0:s.split("@")[0])||"User"};if(n&&!o){const{error:c}=await b.from("users").update({full_name:u.fullName,email:u.email,last_login:new Date().toISOString()}).eq("id",t.id);if(c)throw c}else{const{data:c,error:h}=await b.from("users").select("id").limit(1);if(h)throw console.error("Error checking existing users:",h),h;if(!c||c.length===0){console.log("First user signing up. Granting owner permissions.");const{data:m,error:p}=await b.from("users").insert({id:t.id,email:u.email,full_name:u.fullName,role:"owner",created_at:new Date().toISOString(),last_login:new Date().toISOString()}).select().single();if(p)throw p;if(m){const f=await Pe.createAccount("Default Account",t.id);await Pe.assignUserToAccount(t.id,f),console.log("First user setup complete.")}}else{let m=null,p=null;if(typeof window<"u"){const d=localStorage.getItem("pendingInvitationData");if(d)try{const x=JSON.parse(d);p=x.invitationId,m=x.accountId,console.log(`Found token-based invitation: account ${m}, invitationId ${p}`),localStorage.removeItem("pendingInvitationData")}catch(x){console.error("Error parsing stored invitation data:",x),localStorage.removeItem("pendingInvitationData")}}if(!p&&t.email){const d=await Zr(t.email);if(d){p=d.invitationId;const{data:x,error:v}=await b.from("invitations").select("account_id").eq("id",d.invitationId).single();v?console.error("Error fetching invitation:",v):x&&(m=x.account_id||null)}}let f="user";if(m){const{data:d}=await b.from("users").select("id").eq("account_id",m).limit(1);(!d||d.length===0)&&(f="admin")}const{error:w}=await b.from("users").insert({id:t.id,email:u.email,full_name:u.fullName,role:f,account_id:m||null,created_at:new Date().toISOString(),last_login:new Date().toISOString()});if(w)throw w;if(p&&m)try{const{data:d}=await b.from("invitations").select("status").eq("id",p).single();d&&d.status==="pending"&&await es(p)}catch(d){console.error("Error checking/accepting invitation:",d)}else(p||m)&&console.warn("Incomplete invitation data:",{invitationId:p,accountId:m})}}}catch(n){throw console.error("Error creating/updating user document:",n),n}},Yr=async t=>{try{const{data:e,error:r}=await b.from("users").select("*").eq("id",t).single();if(r)return console.log("No user document found for UID:",t),null;const s=(e==null?void 0:e.account_id)||null;return{id:e.id,email:e.email,fullName:e.full_name,role:e.role,accountId:s||"",createdAt:e.created_at?new Date(e.created_at):new Date,lastLogin:e.last_login?new Date(e.last_login):new Date}}catch(e){return console.error("Error fetching user data:",e),null}},ft=async()=>{const{data:{user:t}}=await b.auth.getUser();if(!t)return console.log("No Supabase user found"),{supabaseUser:null,appUser:null};console.log("Supabase user UID:",t.id),console.log("Supabase user email:",t.email);const e=await Yr(t.id);return console.log("App user data:",e),{supabaseUser:t,appUser:e}},Jr=()=>{const t=new Uint8Array(32);return crypto.getRandomValues(t),Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")},Hs=async(t,e,r,s)=>{try{const n=new Date;n.setDate(n.getDate()+7);const o=Jr(),{data:u,error:c}=await b.from("invitations").insert({email:t,role:e===J.ADMIN?"admin":"user",account_id:s||null,invited_by:r,status:"pending",token:o,created_at:new Date().toISOString(),expires_at:n.toISOString()}).select("id").single();if(c)throw c;const h=`${window.location.origin}/invite/${o}`;return console.log("Invitation created for:",t,"accountId:",s),h}catch(n){throw console.error("Error creating invitation:",n),n}},Xr=async t=>{try{const{data:e,error:r}=await b.from("invitations").select("*").eq("token",t).eq("status","pending").single();return r||!e?null:new Date(e.expires_at)<new Date?(await b.from("invitations").update({status:"expired"}).eq("id",e.id),null):{id:e.id,email:e.email,role:e.role==="admin"?J.ADMIN:J.USER,accountId:e.account_id,expiresAt:e.expires_at}}catch(e){return console.error("Error getting invitation by token:",e),null}},Ws=async t=>{try{const{data:e,error:r}=await b.from("invitations").select("*").eq("account_id",t).eq("status","pending").order("created_at",{ascending:!1});if(r)throw r;return(e||[]).map(s=>({id:s.id,email:s.email,role:s.role,token:s.token,createdAt:s.created_at,expiresAt:s.expires_at}))}catch(e){return console.error("Error fetching pending invitations:",e),[]}},Ys=async t=>{try{if(t.length===0)return{};const{data:e,error:r}=await b.from("invitations").select("*").in("account_id",t).eq("status","pending").order("created_at",{ascending:!1});if(r)throw r;const s={};return(e||[]).forEach(n=>{const o=n.account_id;s[o]||(s[o]=[]),s[o].push({id:n.id,email:n.email,role:n.role,token:n.token,createdAt:n.created_at,expiresAt:n.expires_at})}),s}catch(e){return console.error("Error fetching all pending invitations:",e),{}}},Zr=async t=>{try{const{data:e,error:r}=await b.from("invitations").select("*").eq("email",t).eq("status","pending").single();return r||!e?null:new Date(e.expires_at)<new Date?(await b.from("invitations").update({status:"expired"}).eq("id",e.id),null):{role:e.role==="admin"?J.ADMIN:J.USER,invitationId:e.id}}catch(e){return console.error("Error checking invitation:",e),null}},Js=async t=>{try{let e=await Xr(t);if(!e){const{data:r,error:s}=await b.from("invitations").select("*").eq("token",t).eq("status","accepted").single();!s&&r&&(e={id:r.id,email:r.email,role:r.role==="admin"?J.ADMIN:J.USER,accountId:r.account_id,expiresAt:r.expires_at})}return e?{role:e.role,invitationId:e.id,email:e.email,accountId:e.accountId}:null}catch(e){return console.error("Error checking invitation by token:",e),null}},es=async t=>{try{const{error:e}=await b.from("invitations").update({status:"accepted",accepted_at:new Date().toISOString()}).eq("id",t);if(e)throw e;console.log("Invitation accepted:",t)}catch(e){throw console.error("Error accepting invitation:",e),e}},Ft=l.createContext(void 0),N="[AuthContext]";function Ve(t){if(!t)return"null";const{id:e,email:r,last_sign_in_at:s}=t;return JSON.stringify({id:e,email:r,lastSignInAt:s})}function qe(t){if(!t)return"null";const{id:e,email:r,role:s}=t;return JSON.stringify({id:e,email:r,role:s})}function ts(t,e){console.warn(t)}function rs({children:t}){const[e,r]=l.useState(null),[s,n]=l.useState(null),[o,u]=l.useState(!0),[c,h]=l.useState(!1),[m,p]=l.useState(!1),f=l.useRef(!1),w=l.useRef(!0),d=l.useRef(`auth-${Math.random().toString(36).slice(2,9)}`),x=l.useRef(0),v=l.useRef(0),_=l.useRef(null),E=l.useRef(null);l.useEffect(()=>{_.current=e},[e]),l.useEffect(()=>{E.current=s},[s]),l.useEffect(()=>{const P=()=>{document.visibilityState==="visible"&&b.auth.refreshSession()};return document.addEventListener("visibilitychange",P),()=>{document.removeEventListener("visibilitychange",P)}},[]),l.useEffect(()=>{m&&(e||s)&&p(!1)},[e,s,m]),l.useEffect(()=>{const P=d.current,te=Date.now();v.current=te;let T=!0,j=null,$=null,tt=0;const Re=L=>{if(T&&!f.current){f.current=!0,$&&clearTimeout($);const G=Date.now()-te;u(!1),`${N}${L}${G}${P}${Ve(_.current)}${qe(E.current)}`}};$=setTimeout(()=>{var L;if(T&&!f.current){const G=Date.now()-te,Q=typeof navigator<"u"?(L=navigator.serviceWorker)==null?void 0:L.controller:void 0;!!Q&&Q.scriptURL;let je=!1;try{je=typeof window<"u"&&!!window.localStorage.getItem("supabase.auth.token")}catch{}const Fe=_.current,ge=E.current;ts(`${N} [TIMEOUT] Initialization timed out after ${G}ms. Forcing loading to false.`,{supabaseUser:Ve(Fe),appUser:qe(ge),hasResolvedAuthRef:f.current}),Re("safety_timeout"),!Fe&&!ge&&p(!0)}},7e3),`${N}${P}${new Date().toISOString()}`;const ye=++x.current,{data:{subscription:$t}}=b.auth.onAuthStateChange(async(L,G)=>{if(!T)return;const Q=(G==null?void 0:G.user)||null;if(`${N}${ye}`,w.current,r(Q),_.current=Q,w.current){Q||Re(`listener_${ye}_${L}_no_user`);return}if(Q){const X=E.current;if(X&&X.id===Q.id)return;if(p(!1),L==="SIGNED_IN"){h(!0);try{const je=Date.now();`${N}${ye}`,Ve(Q),await Wr(Q);const Fe=Date.now()-je;`${N}${ye}${Fe}`;const{appUser:ge}=await ft();T&&(n(ge),E.current=ge,`${N}${ye}`,qe(ge),void 0)}catch(je){console.error(`${N} [LISTENER ${ye}] Error handling a fresh SIGNED_IN event`,je),T&&n(null)}finally{T&&h(!1)}}}else T&&(n(null),E.current=null,h(!1))});return j={data:{subscription:$t}},(async()=>{try{tt=Date.now(),`${N}${P}`;const{data:{session:L},error:G}=await b.auth.getSession(),Q=Date.now()-tt;if(G&&console.error(`${N} [GET_SESSION] Error retrieving initial session after ${Q}ms`,G),`${N}${Q}`,T&&L){h(!0);try{const{appUser:X}=await ft();T&&(n(X),E.current=X,`${N}`,qe(X),void 0)}catch(X){console.error(`${N} [INIT] Error loading initial user data`,X),T&&n(null)}finally{T&&h(!1)}}Re("initialization_complete")}catch(L){console.error(`${N} [INIT_ERROR] Error during auth initialization`,L),Re("init_error")}finally{w.current=!1}})(),()=>{var L;T=!1,$&&clearTimeout($),(L=j==null?void 0:j.data)!=null&&L.subscription&&j.data.subscription.unsubscribe()}},[]);const F=l.useCallback(async()=>{try{`${N}`,await Gr()}catch(P){throw console.error(`${N} Sign in error`,P),P}},[]),I=l.useCallback(async()=>{try{`${N}`,await Hr()}catch(P){throw console.error(`${N} Sign out error`,P),P}},[]),y=l.useCallback(P=>(s==null?void 0:s.role)===P||(s==null?void 0:s.role)===J.OWNER||(s==null?void 0:s.role)===J.ADMIN,[s==null?void 0:s.role]),C=l.useCallback(()=>(s==null?void 0:s.role)==="owner"||!1,[s==null?void 0:s.role]),M=l.useMemo(()=>({supabaseUser:e,user:s,loading:o,userLoading:c,timedOutWithoutAuth:m,signIn:F,signOut:I,isAuthenticated:!!e,hasRole:y,isOwner:C}),[e,s,o,c,m,y,C,F,I]);return i.jsx(Ft.Provider,{value:M,children:t})}function ze(){const t=l.useContext(Ft);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const kt=l.createContext(void 0);function ss({children:t}){const{user:e,loading:r,userLoading:s}=ze(),[n,o]=l.useState(null),[u,c]=l.useState(null),[h,m]=l.useState(!0),p=(e==null?void 0:e.role)==="owner"||!1,f=p||(e==null?void 0:e.role)==="admin"||!1;l.useEffect(()=>{let d=!0;return(async()=>{if(r||s){d&&m(!0);return}if(!e){d&&(o(null),c(null),m(!1));return}d&&m(!0);const v=setTimeout(()=>{d&&(console.warn("⚠️ Account loading timeout - setting loading to false"),m(!1))},1e4);try{let _=null;if(e.accountId&&(_=await Pe.getAccount(e.accountId)),_||(_=await Pe.getUserAccount(e.id)),!_&&p){const E=await Pe.getAllAccounts();E.length>0&&(_=E[0])}d&&(_?(o(_.id),c(_)):(o(null),c(null)))}catch(_){console.error("Error loading account:",_),d&&(o(null),c(null))}finally{clearTimeout(v),d&&m(!1)}})(),()=>{d=!1}},[e,r,s,p]);const w=l.useMemo(()=>({currentAccountId:n,currentAccount:u,isOwner:p,isAdmin:f,loading:h}),[n,u,p,f,h]);return i.jsx(kt.Provider,{value:w,children:t})}function ns(){const t=l.useContext(kt);if(t===void 0)throw new Error("useAccount must be used within an AccountProvider");return t}const is={async getBusinessProfile(t){try{const{data:e,error:r}=await b.from("business_profiles").select("*").eq("account_id",t).single();if(r){if(r.code==="PGRST116")return null;throw r}const s=Ae(e);return{accountId:s.account_id,name:s.name,logoUrl:s.logo_url,updatedAt:s.updated_at,updatedBy:s.updated_by}}catch(e){return console.error("Error fetching business profile:",e),null}},async updateBusinessProfile(t,e,r,s){try{const{data:n,error:o}=await b.from("business_profiles").select("account_id").eq("account_id",t).single();if(o&&o.code!=="PGRST116")throw o;const u={account_id:t,name:e,logo_url:r,updated_at:new Date().toISOString(),updated_by:s};if(n){const{error:c}=await b.from("business_profiles").update(u).eq("account_id",t);if(c)throw c}else{const{error:c}=await b.from("business_profiles").insert(u);if(c)throw c}console.log("Business profile updated successfully")}catch(n){throw console.error("Error updating business profile:",n),n}}},as="Design Business",Xs="Client Owes Design Business",Zs="Design Business Owes Client",en="Design Business Inventory",tn="Design Business Inventory Sale",rn="Design Business Inventory Purchase",Lt=l.createContext(void 0);function os({children:t}){const{currentAccountId:e,loading:r}=ns(),[s,n]=l.useState(null),[o,u]=l.useState(!0),c=async()=>{if(!e){n(null),u(!1);return}try{u(!0);const f=await is.getBusinessProfile(e);n(f)}catch(f){console.error("Error loading business profile:",f),n(null)}finally{u(!1)}};l.useEffect(()=>{if(r){u(!0);return}c()},[e,r]);const h=(s==null?void 0:s.name)||as,m=(s==null?void 0:s.logoUrl)||null,p={businessProfile:s,businessName:h,businessLogoUrl:m,loading:o,refreshProfile:c};return i.jsx(Lt.Provider,{value:p,children:t})}function cs(){const t=l.useContext(Lt);if(t===void 0)throw new Error("useBusinessProfile must be used within a BusinessProfileProvider");return t}function Ut({variant:t="primary",size:e="md",className:r,children:s,...n}){const o="inline-flex items-center justify-center font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",u={primary:"text-white bg-primary-600 hover:bg-primary-700 focus:ring-primary-500 border border-transparent",secondary:"text-gray-700 bg-white hover:bg-gray-50 focus:ring-primary-500 border border-gray-300",danger:"text-white bg-red-600 hover:bg-red-700 focus:ring-red-500 border border-transparent"},c={sm:"px-3 py-2 text-sm rounded-md",md:"px-4 py-2 text-sm rounded-md",lg:"px-6 py-3 text-base rounded-md"},h=ue(o,u[t],c[e],r);return i.jsx("button",{className:h,...n,children:s})}function us(){const{user:t,signOut:e,loading:r}=ze(),{businessName:s}=cs(),n=zt(),o=n.pathname.startsWith("/projects")||n.pathname.startsWith("/project")||n.pathname==="/",u=n.pathname.startsWith("/business-inventory"),c=n.pathname.startsWith("/settings");return i.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 print:hidden",children:i.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex h-16 justify-between items-center gap-2",children:[i.jsx("div",{className:"flex items-center",children:i.jsx(Le,{to:"/",className:"text-xl font-bold text-gray-900",children:s})}),i.jsx("div",{className:"flex items-center",children:t&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsxs("nav",{className:"flex space-x-0 sm:space-x-1",children:[i.jsxs(Le,{to:"/",className:`inline-flex items-center px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium transition-all duration-200 border-b-2 ${o?"border-primary-500 text-gray-700":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,title:"Projects",children:[i.jsx(Ht,{className:"h-5 w-5 sm:h-4 sm:w-4 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Projects"})]}),i.jsxs(Le,{to:"/business-inventory",className:`inline-flex items-center px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium transition-all duration-200 border-b-2 ${u?"border-primary-500 text-gray-700":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,title:"Inventory",children:[i.jsx(Wt,{className:"h-5 w-5 sm:h-4 sm:w-4 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Inventory"})]})]}),i.jsxs(Le,{to:"/settings",className:`flex items-center px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium transition-all duration-200 border-b-2 ${c?"border-primary-500 text-gray-700":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,title:"Settings",children:[i.jsx(Yt,{className:"h-5 w-5 sm:h-4 sm:w-4 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Settings"})]}),i.jsx(Ut,{variant:"secondary",size:"sm",onClick:e,disabled:r,className:"flex items-center px-2 sm:px-3 ml-2 sm:ml-3",title:"Sign Out",children:i.jsx(Jt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]})})})}function ls({children:t}){return i.jsx("div",{className:"min-h-screen bg-gray-50",children:i.jsxs("div",{className:"flex flex-col",children:[i.jsx(us,{}),i.jsx("main",{className:"flex-1 py-6",children:i.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:t||i.jsx(Kt,{})})})]})})}function ds({size:t="md",className:e}){const r={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return i.jsx("div",{className:ue("flex items-center justify-center",e),children:i.jsx(Xt,{className:ue("animate-spin text-primary-600",r[t])})})}const hs={success:rr,error:tr,warning:er,info:Zt},fs={success:{container:"bg-green-50 border-green-200",icon:"text-green-400",text:"text-green-800",button:"text-green-400 hover:bg-green-100"},error:{container:"bg-red-50 border-red-200",icon:"text-red-400",text:"text-red-800",button:"text-red-400 hover:bg-red-100"},warning:{container:"bg-yellow-50 border-yellow-200",icon:"text-yellow-400",text:"text-yellow-800",button:"text-yellow-400 hover:bg-yellow-100"},info:{container:"bg-blue-50 border-blue-200",icon:"text-blue-400",text:"text-blue-800",button:"text-blue-400 hover:bg-blue-100"}};function ms({toast:t,onClose:e}){const[r,s]=l.useState(!1),[n,o]=l.useState(!1),u=hs[t.type],c=fs[t.type];l.useEffect(()=>{s(!0);const m=t.duration||(t.type==="error"?6e3:4e3),p=setTimeout(()=>{h()},m);return()=>clearTimeout(p)},[t.duration,t.type]);const h=()=>{o(!0),setTimeout(()=>{e(t.id)},300)};return i.jsxs("div",{className:ue("flex items-center justify-between p-4 mb-3 border rounded-lg shadow-sm transition-all duration-300 transform",c.container,r&&!n?"translate-x-0 opacity-100":"-translate-x-full opacity-0"),children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(u,{className:ue("h-5 w-5 mr-3 flex-shrink-0",c.icon)}),i.jsx("p",{className:ue("text-sm font-medium",c.text),children:t.message})]}),i.jsx("button",{onClick:h,className:ue("ml-4 inline-flex rounded-md p-1.5 transition-colors duration-200",c.button),children:i.jsx(sr,{className:"h-4 w-4"})})]})}const qt=l.createContext(void 0);function sn(){const t=l.useContext(qt);if(t===void 0)throw new Error("useToast must be used within a ToastProvider");return t}function ps({children:t}){const[e,r]=l.useState([]),s=()=>Math.random().toString(36).substr(2,9),n=l.useCallback((f,w,d)=>{const x=s(),v={id:x,message:f,type:w,duration:d};return r(_=>[..._,v]),setTimeout(()=>{m(x)},(d||(w==="error"?6e3:4e3))+300),x},[]),o=l.useCallback((f,w)=>n(f,"success",w),[n]),u=l.useCallback((f,w)=>n(f,"error",w),[n]),c=l.useCallback((f,w)=>n(f,"warning",w),[n]),h=l.useCallback((f,w)=>n(f,"info",w),[n]),m=l.useCallback(f=>{r(w=>w.filter(d=>d.id!==f))},[]),p={showToast:n,showSuccess:o,showError:u,showWarning:c,showInfo:h,removeToast:m};return i.jsxs(qt.Provider,{value:p,children:[t,i.jsx("div",{className:"fixed top-4 right-4 z-50 min-w-96 max-w-sm",children:e.map(f=>i.jsx(ms,{toast:f,onClose:m},f.id))})]})}function ys({onSuccess:t}){const{signIn:e,loading:r}=ze(),[s,n]=l.useState(""),o=async()=>{try{n(""),await e(),t==null||t()}catch(u){console.error("Login error:",u),n("Failed to sign in. Please try again.")}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-lg w-full",children:[i.jsxs("div",{className:"-mt-8",children:[i.jsx("div",{className:"mx-auto h-56 w-56 flex items-center justify-center",children:i.jsx("img",{src:"/logo.png",alt:"Ledger logo",className:"h-full w-full object-contain"})}),i.jsxs("h2",{className:"text-center text-4xl font-extrabold text-gray-900",children:[i.jsx("span",{className:"text-primary-600",children:"Ledger"})," Inventory Assistant"]}),i.jsxs("p",{className:"mt-2 text-center text-lg text-gray-600",children:["For ",i.jsx("strong",{className:"font-semibold",children:"Interior Designers"})," by ",i.jsx("strong",{className:"font-semibold",children:"Interior Designers"})]})]}),i.jsxs("div",{className:"mt-8 space-y-6",children:[s&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:i.jsx("div",{className:"text-sm text-red-600",children:s})}),i.jsx("div",{children:i.jsxs(Ut,{onClick:o,disabled:r,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),r?"Signing in...":"Continue with Google"]})})]})]})})}function gs({children:t}){const{isAuthenticated:e,loading:r,userLoading:s,user:n,timedOutWithoutAuth:o}=ze();return r||s?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):o||!e||!n?i.jsx(ys,{}):i.jsx(i.Fragment,{children:t})}function vs(){return i.jsx(ss,{children:i.jsx(os,{children:i.jsx(ps,{children:i.jsx(l.Suspense,{fallback:i.jsx(ds,{}),children:i.jsxs(st,{children:[i.jsx(A,{path:"/auth/callback",element:i.jsx(ws,{})}),i.jsx(A,{path:"/invite/:token",element:i.jsx(xs,{})}),i.jsx(A,{path:"*",element:i.jsx(gs,{children:i.jsx(ls,{children:i.jsxs(st,{children:[i.jsx(A,{path:"/",element:i.jsx(mt,{})}),i.jsx(A,{path:"/projects",element:i.jsx(mt,{})}),i.jsx(A,{path:"/settings",element:i.jsx(Os,{})}),i.jsx(A,{path:"/item/:id",element:i.jsx(pt,{})}),i.jsx(A,{path:"/project/:id",element:i.jsx(bs,{})}),i.jsx(A,{path:"/project/:id/invoice",element:i.jsx(_s,{})}),i.jsx(A,{path:"/project/:id/property-management-summary",element:i.jsx(Ss,{})}),i.jsx(A,{path:"/project/:id/client-summary",element:i.jsx(Es,{})}),i.jsx(A,{path:"/project/:id/item/:itemId",element:i.jsx(pt,{})}),i.jsx(A,{path:"/project/:id/item/add",element:i.jsx(Is,{})}),i.jsx(A,{path:"/project/:id/edit-item/:itemId",element:i.jsx(js,{})}),i.jsx(A,{path:"/project/:id/transaction/add",element:i.jsx(As,{})}),i.jsx(A,{path:"/project/:id/transaction/:transactionId/edit",element:i.jsx(Ps,{})}),i.jsx(A,{path:"/project/:id/transaction/:transactionId",element:i.jsx(yt,{})}),i.jsx(A,{path:"/business-inventory",element:i.jsx(Ds,{})}),i.jsx(A,{path:"/business-inventory/add",element:i.jsx(Ts,{})}),i.jsx(A,{path:"/business-inventory/:id",element:i.jsx(Cs,{})}),i.jsx(A,{path:"/business-inventory/:id/edit",element:i.jsx(Ns,{})}),i.jsx(A,{path:"/business-inventory/transaction/add",element:i.jsx(Rs,{})}),i.jsx(A,{path:"/business-inventory/transaction/:transactionId",element:i.jsx(yt,{})}),i.jsx(A,{path:"/business-inventory/transaction/:projectId/:transactionId/edit",element:i.jsx(Fs,{})})]})})})})]})})})})})}const ws=l.lazy(()=>D(()=>import("./AuthCallback.js"),__vite__mapDeps([0,1,2,3,4,5]))),xs=l.lazy(()=>D(()=>import("./InviteAccept.js"),__vite__mapDeps([6,1,2,3,5,4]))),mt=l.lazy(()=>D(()=>import("./Projects.js"),__vite__mapDeps([7,1,3,8,9,10,11,5,12,13,4]))),pt=l.lazy(()=>D(()=>import("./ItemDetail.js"),__vite__mapDeps([14,1,3,13,15,16,9,10,17,18,5,19,8,20,2,4]))),bs=l.lazy(()=>D(()=>import("./ProjectDetail.js"),__vite__mapDeps([21,1,3,15,2,9,10,13,17,16,22,20,8,5,11,12,4]))),_s=l.lazy(()=>D(()=>import("./ProjectInvoice.js"),__vite__mapDeps([23,1,2,3,9,10,4,5]))),Ss=l.lazy(()=>D(()=>import("./PropertyManagementSummary.js"),__vite__mapDeps([24,1,2,3,9,10,4,5]))),Es=l.lazy(()=>D(()=>import("./ClientSummary.js"),__vite__mapDeps([25,1,13,3,2,9,10,12,4,5]))),Is=l.lazy(()=>D(()=>import("./AddItem.js"),__vite__mapDeps([26,15,3,1,2,8,9,10,17,27,28,5,18,4]))),js=l.lazy(()=>D(()=>import("./EditItem.js"),__vite__mapDeps([29,15,3,1,2,9,10,27,28,5,4]))),As=l.lazy(()=>D(()=>import("./AddTransaction.js"),__vite__mapDeps([30,15,3,1,8,2,9,10,17,31,5,32,18,27,12,4]))),Ps=l.lazy(()=>D(()=>import("./EditTransaction.js"),__vite__mapDeps([33,2,1,3,9,10,17,31,5,13,8,27,12,4]))),yt=l.lazy(()=>D(()=>import("./TransactionDetail.js"),__vite__mapDeps([34,1,18,5,15,3,13,2,9,10,17,32,8,4]))),Os=l.lazy(()=>D(()=>import("./Settings.js"),__vite__mapDeps([35,1,17,28,5,10,27,12,3,4]))),Ds=l.lazy(()=>D(()=>import("./BusinessInventory.js"),__vite__mapDeps([36,1,3,13,9,10,16,17,22,20,8,5,4]))),Cs=l.lazy(()=>D(()=>import("./BusinessInventoryItemDetail.js"),__vite__mapDeps([37,1,15,3,2,9,10,18,5,17,20,19,13,8,4]))),Ts=l.lazy(()=>D(()=>import("./AddBusinessInventoryItem.js"),__vite__mapDeps([38,15,3,1,2,9,10,17,27,28,5,18,4]))),Ns=l.lazy(()=>D(()=>import("./EditBusinessInventoryItem.js"),__vite__mapDeps([39,1,15,3,2,9,10,5,4]))),Rs=l.lazy(()=>D(()=>import("./AddBusinessInventoryTransaction.js"),__vite__mapDeps([40,1,15,3,2,9,10,27,12,5,4]))),Fs=l.lazy(()=>D(()=>import("./EditBusinessInventoryTransaction.js"),__vite__mapDeps([41,1,15,3,2,9,10,27,12,5,4]))),gt="navStack:v1",Mt=l.createContext(null);function ks({children:t,mirrorToSessionStorage:e=!0,maxLength:r=200}){const s=l.useRef([]),[,n]=l.useState(0),o=typeof window<"u"&&sessionStorage.getItem("navStack:debug")==="1";l.useEffect(()=>{if(e){try{const d=sessionStorage.getItem(gt);if(d){const x=JSON.parse(d);Array.isArray(x)&&(s.current=x.filter(v=>typeof v=="string"))}o&&console.debug("NavigationStackProvider hydrated from sessionStorage:",s.current)}catch{}n(d=>d+1)}},[]);const u=()=>{try{sessionStorage.setItem(gt,JSON.stringify(s.current)),o&&console.debug("NavigationStackProvider persisted stack to sessionStorage:",s.current)}catch{}},w={push:d=>{!d||s.current[s.current.length-1]===d||(s.current.push(d),s.current.length>r&&(s.current=s.current.slice(-r)),u(),n(v=>v+1),o&&console.debug("NavigationStackProvider push:",d,"stack:",s.current))},pop:d=>{for(;s.current.length>0;){const x=s.current.pop();if(!(d&&x===d))return u(),n(v=>v+1),o&&console.debug("NavigationStackProvider pop ->",x,"stack:",s.current),x}return null},peek:d=>{for(let x=s.current.length-1;x>=0;x--){const v=s.current[x];if(!(d&&v===d))return v||null}return null},clear:()=>{s.current=[],u(),n(d=>d+1)},size:()=>s.current.length};return i.jsx(Mt.Provider,{value:w,children:t})}function nn(){const t=l.useContext(Mt);if(!t)throw new Error("useNavigationStack must be used within a NavigationStackProvider");return t}const Ls=new Fr({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1}}});Ge.createRoot(document.getElementById("root")).render(i.jsx(Bt.StrictMode,{children:i.jsx(rs,{children:i.jsx(Lr,{client:Ls,children:i.jsx(Vt,{children:i.jsx(ks,{children:i.jsx(vs,{})})})})})}));export{Ut as B,Zs as C,J as U,D as _,Gr as a,Gs as b,Js as c,ns as d,sn as e,Xs as f,Xr as g,tn as h,rn as i,i as j,cs as k,as as l,nn as m,Ws as n,Pe as o,Hs as p,Ys as q,is as r,b as s,en as t,ze as u,Ks as v,zs as w,Ae as x,Vs as y};
//# sourceMappingURL=index.js.map
