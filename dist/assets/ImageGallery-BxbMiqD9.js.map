{"version":3,"file":"ImageGallery-BxbMiqD9.js","sources":["../../src/components/ui/ImageGallery.tsx"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { X, ChevronLeft, ChevronRight, Download } from 'lucide-react'\nimport { ItemImage } from '@/types'\n\ninterface ImageGalleryProps {\n  images: ItemImage[]\n  initialIndex?: number\n  onClose: () => void\n}\n\nexport default function ImageGallery({ images, initialIndex = 0, onClose }: ImageGalleryProps) {\n  const [currentIndex, setCurrentIndex] = useState(initialIndex)\n  const [isLoaded, setIsLoaded] = useState(false)\n\n  // Handle keyboard navigation\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      switch (e.key) {\n        case 'Escape':\n          onClose()\n          break\n        case 'ArrowLeft':\n          e.preventDefault()\n          setCurrentIndex(prev => (prev > 0 ? prev - 1 : images.length - 1))\n          break\n        case 'ArrowRight':\n          e.preventDefault()\n          setCurrentIndex(prev => (prev < images.length - 1 ? prev + 1 : 0))\n          break\n      }\n    }\n\n    document.addEventListener('keydown', handleKeyDown)\n    return () => document.removeEventListener('keydown', handleKeyDown)\n  }, [onClose, images.length])\n\n  // Prevent body scroll when gallery is open\n  useEffect(() => {\n    document.body.style.overflow = 'hidden'\n    return () => {\n      document.body.style.overflow = 'unset'\n    }\n  }, [])\n\n  const currentImage = images[currentIndex]\n\n  const handlePrevious = () => {\n    setCurrentIndex(prev => (prev > 0 ? prev - 1 : images.length - 1))\n    setIsLoaded(false)\n  }\n\n  const handleNext = () => {\n    setCurrentIndex(prev => (prev < images.length - 1 ? prev + 1 : 0))\n    setIsLoaded(false)\n  }\n\n  const formatFileSize = (bytes: number): string => {\n    if (bytes === 0) return '0 Bytes'\n    const k = 1024\n    const sizes = ['Bytes', 'KB', 'MB', 'GB']\n    const i = Math.floor(Math.log(bytes) / Math.log(k))\n    return (bytes / Math.pow(k, i)).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' ' + sizes[i]\n  }\n\n  return (\n    <div className=\"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center p-4\">\n      {/* Close button */}\n      <button\n        onClick={onClose}\n        className=\"absolute top-4 right-4 z-10 p-2 text-white hover:text-gray-300 transition-colors\"\n        aria-label=\"Close gallery\"\n      >\n        <X className=\"h-6 w-6\" />\n      </button>\n\n      {/* Navigation arrows */}\n      {images.length > 1 && (\n        <>\n          <button\n            onClick={handlePrevious}\n            className=\"absolute left-4 top-1/2 transform -translate-y-1/2 z-10 p-2 text-white hover:text-gray-300 transition-colors\"\n            aria-label=\"Previous image\"\n          >\n            <ChevronLeft className=\"h-8 w-8\" />\n          </button>\n          <button\n            onClick={handleNext}\n            className=\"absolute right-4 top-1/2 transform -translate-y-1/2 z-10 p-2 text-white hover:text-gray-300 transition-colors\"\n            aria-label=\"Next image\"\n          >\n            <ChevronRight className=\"h-8 w-8\" />\n          </button>\n        </>\n      )}\n\n      {/* Main image container */}\n      <div className=\"relative max-w-full max-h-full flex items-center justify-center\">\n        <img\n          src={currentImage.url}\n          alt={currentImage.alt || currentImage.fileName}\n          className=\"max-w-full max-h-full object-contain\"\n          onLoad={() => setIsLoaded(true)}\n          style={{ opacity: isLoaded ? 1 : 0, transition: 'opacity 0.3s ease' }}\n        />\n\n        {/* Loading placeholder */}\n        {!isLoaded && (\n          <div className=\"absolute inset-0 flex items-center justify-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-white\"></div>\n          </div>\n        )}\n      </div>\n\n      {/* Image info bar */}\n      <div className=\"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white p-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex-1\">\n            <h3 className=\"text-sm font-medium truncate\">\n              {currentImage.alt || currentImage.fileName}\n            </h3>\n            {currentImage.caption && (\n              <p className=\"text-xs text-gray-300 mt-1\">{currentImage.caption}</p>\n            )}\n            <div className=\"flex items-center space-x-4 mt-1 text-xs text-gray-400\">\n              <span>{currentIndex + 1} of {images.length}</span>\n              <span>{formatFileSize(currentImage.size)}</span>\n              <span>\n                {(() => {\n                  try {\n                    return new Date(currentImage.uploadedAt).toLocaleDateString()\n                  } catch (error) {\n                    console.warn('Invalid date for image:', currentImage.uploadedAt, error)\n                    return 'Unknown date'\n                  }\n                })()}\n              </span>\n            </div>\n          </div>\n\n          {/* Download button */}\n          <button\n            onClick={() => window.open(currentImage.url, '_blank')}\n            className=\"p-2 text-white hover:text-gray-300 transition-colors ml-4\"\n            aria-label=\"Download image\"\n          >\n            <Download className=\"h-4 w-4\" />\n          </button>\n        </div>\n      </div>\n\n      {/* Image indicators */}\n      {images.length > 1 && (\n        <div className=\"absolute bottom-20 left-1/2 transform -translate-x-1/2 flex space-x-2\">\n          {images.map((_, index) => (\n            <button\n              key={index}\n              onClick={() => {\n                setCurrentIndex(index)\n                setIsLoaded(false)\n              }}\n              className={`w-2 h-2 rounded-full transition-colors ${\n                index === currentIndex ? 'bg-white' : 'bg-white bg-opacity-50'\n              }`}\n              aria-label={`Go to image ${index + 1}`}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":["ImageGallery","images","initialIndex","onClose","currentIndex","setCurrentIndex","useState","isLoaded","setIsLoaded","useEffect","handleKeyDown","e","prev","currentImage","handlePrevious","handleNext","formatFileSize","bytes","k","sizes","i","jsxs","jsx","X","Fragment","ChevronLeft","ChevronRight","error","Download","_","index"],"mappings":"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"}