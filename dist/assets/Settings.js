import{u as V,d as X,U as y,n as re,o as W,j as e,B as Y,p as Q,e as ne,q as ie,l as le,r as ce}from"./index.js";import{r as a}from"./vendor.js";import{I as H}from"./imageService.js";import{S as oe}from"./Select.js";import{d as z,U as O,M as Z,w as G,i as K,x as de,p as J,f as me,b as xe,s as ue,j as he,A as ge,t as fe,q as pe,S as je,u as ve}from"./ui.js";import{g as ye,u as be}from"./taxPresetsService.js";import"./router.js";import"./supabase.js";function Ne({className:n}){const{user:g,isOwner:f,loading:b}=V(),{currentAccountId:l,isAdmin:N,loading:p}=X(),[I,E]=a.useState([]),[x,c]=a.useState(!0),[u,o]=a.useState(""),[C,h]=a.useState(y.USER),[r,w]=a.useState(!1),[i,j]=a.useState(""),[k,U]=a.useState([]),[T,d]=a.useState(null),A=N||f(),P=a.useCallback(async()=>{if(l)try{const t=await re(l);U(t)}catch(t){console.error("Error loading pending invitations:",t)}},[l]),L=a.useCallback(async()=>{try{if(c(!0),!l){E([]),c(!1);return}const t=await W.getAccountUsers(l);E(t.map(v=>({...v,role:v.role==="owner"?y.OWNER:v.role==="admin"?y.ADMIN:y.USER})))}catch(t){console.error("Error loading users:",t),j("Failed to load users")}finally{c(!1)}},[l]);a.useEffect(()=>{if(b||p){c(!0);return}A&&l?(L(),P()):c(!1)},[A,l,b,p,L,P]);const B=async()=>{if(u.trim())try{if(w(!0),j(""),!l){j("Account ID is required");return}if(!(g!=null&&g.id)){j("User ID is required");return}const t=await Q(u.trim(),C,g.id,l);await P(),await navigator.clipboard.writeText(t),d(t),setTimeout(()=>d(null),2e3),o(""),h(y.USER)}catch(t){console.error("Error inviting user:",t),j("Failed to create invitation")}finally{w(!1)}},$=async t=>{const v=`${window.location.origin}/invite/${t}`;await navigator.clipboard.writeText(v),d(t),setTimeout(()=>d(null),2e3)},M=t=>{switch(t){case y.OWNER:return e.jsx(de,{className:"h-4 w-4 text-yellow-500"});case y.ADMIN:return e.jsx(z,{className:"h-4 w-4 text-blue-500"});case y.USER:return e.jsx(O,{className:"h-4 w-4 text-gray-500"});default:return e.jsx(O,{className:"h-4 w-4 text-gray-500"})}},F=t=>{switch(t){case y.OWNER:return"bg-yellow-100 text-yellow-800";case y.ADMIN:return"bg-blue-100 text-blue-800";case y.USER:return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return A?e.jsxs("div",{className:`p-6 ${n}`,children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(O,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"User Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Invite team members and manage user roles"})]})]}),i&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("div",{className:"text-sm text-red-600",children:i})}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Invite Team Member"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:u,onChange:t=>o(t.target.value),placeholder:"user@example.com",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),e.jsx(oe,{label:"Assign Role",value:C,onChange:t=>h(t.target.value),children:e.jsx("option",{value:y.USER,children:"User"})}),e.jsxs(Y,{onClick:B,disabled:r||!u.trim(),className:"w-full flex items-center justify-center space-x-2",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{children:r?"Creating...":"Create Invitation Link"})]})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"An invitation link will be generated and copied to your clipboard. Share it with the user to invite them."})]}),k.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Pending Invitations"}),e.jsx("div",{className:"space-y-2",children:k.map(t=>{const v=`${window.location.origin}/invite/${t.token}`,D=T===t.token;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded border border-gray-200",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:t.email}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Role: ",t.role," • Expires: ",new Date(t.expiresAt).toLocaleDateString()]}),e.jsx("div",{className:"text-xs text-gray-400 font-mono truncate mt-1",children:v})]}),e.jsx("button",{onClick:()=>$(t.token),className:"ml-3 flex-shrink-0 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded",title:"Copy invitation link",children:D?e.jsx(G,{className:"h-4 w-4 text-green-600"}):e.jsx(K,{className:"h-4 w-4"})})]},t.id)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Team Members"}),x?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600 mx-auto"})}):e.jsx("div",{className:"space-y-3",children:I.map(t=>{const v=t.role||y.USER;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[M(v),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.fullName}),e.jsx("div",{className:"text-sm text-gray-500",children:t.email})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${F(v)}`,children:v})})]},t.id)})})]})]}):e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(z,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Access Denied"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You don't have permission to manage users."})]})})}function we({className:n}){const{user:g,isOwner:f,loading:b}=V(),{showSuccess:l,showError:N}=ne(),[p,I]=a.useState([]),[E,x]=a.useState(!0),[c,u]=a.useState(!1),[o,C]=a.useState(""),[h,r]=a.useState(""),[w,i]=a.useState(""),[j,k]=a.useState(null),[U,T]=a.useState(null),[d,A]=a.useState(!1),[P,L]=a.useState({}),[B,$]=a.useState(new Set),[M,F]=a.useState(new Set);a.useEffect(()=>{b||(f()?t():x(!1))},[b,f]),a.useEffect(()=>{f()&&p.length>0&&v()},[p]);const t=async()=>{try{x(!0),i("");const s=await W.getAllAccounts();I(s)}catch(s){console.error("Error loading accounts:",s),i("Failed to load accounts"),N("Failed to load accounts")}finally{x(!1)}},v=async()=>{try{const s=p.map(m=>m.id);if(s.length===0)return;const S=await ie(s);L(S)}catch(s){console.error("Error loading account invitations:",s)}},D=async()=>{if(!(!o.trim()||!g)){if(!h.trim()){i("First user email is required"),N("Please provide an email address for the first user");return}try{u(!0),i("");const s=await W.createAccount(o.trim(),g.id),S=await Q(h.trim(),y.ADMIN,g.id,s);k(S),T(h.trim()),l(`Account "${o.trim()}" created successfully.`),C(""),r(""),await t(),await v()}catch(s){console.error("Error creating account:",s);const S=s instanceof Error?s.message:"Failed to create account";i(S),N(S)}finally{u(!1)}}},_=async()=>{if(j)try{await navigator.clipboard.writeText(j),A(!0),l("Invitation link copied to clipboard"),setTimeout(()=>A(!1),2e3)}catch(s){console.error("Error copying link:",s),N("Failed to copy link")}},ee=async s=>{const S=`${window.location.origin}/invite/${s}`;try{await navigator.clipboard.writeText(S),F(new Set([...M,s])),l("Invitation link copied to clipboard"),setTimeout(()=>{F(new Set([...M].filter(m=>m!==s)))},2e3)}catch(m){console.error("Error copying link:",m),N("Failed to copy link")}},se=s=>{$(S=>{const m=new Set(S);return m.has(s)?m.delete(s):m.add(s),m})};return b?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):f()?e.jsxs("div",{className:`p-6 ${n}`,children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Account Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Create and manage accounts in the system"})]})]}),w&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("div",{className:"text-sm text-red-600",children:w})}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Create New Account"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Account Name"}),e.jsx("input",{type:"text",value:o,onChange:s=>C(s.target.value),placeholder:"Enter account name",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",onKeyDown:s=>{s.key==="Enter"&&o.trim()&&h.trim()&&!c&&D()}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"First User Email (Admin)"}),e.jsx("input",{type:"email",value:h,onChange:s=>r(s.target.value),placeholder:"user@example.com",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",onKeyDown:s=>{s.key==="Enter"&&o.trim()&&h.trim()&&!c&&D()}})]}),e.jsxs(Y,{onClick:D,disabled:c||!o.trim()||!h.trim(),className:"w-full flex items-center justify-center space-x-2",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{children:c?"Creating...":"Create Account"})]})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Accounts are used to organize projects and data. An invitation link will be generated for the first user."})]}),j&&e.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-1",children:"Invitation Link Created"}),e.jsxs("p",{className:"text-xs text-blue-700 mb-3",children:["Share this link with ",e.jsx("span",{className:"font-medium",children:U||"the invited user"})," to complete their account setup."]}),e.jsx("div",{className:"bg-white border border-blue-200 rounded-md p-3 mb-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("code",{className:"flex-1 text-xs text-gray-800 break-all font-mono",children:j}),e.jsx("button",{onClick:_,className:"flex-shrink-0 p-2 text-blue-600 hover:text-blue-900 hover:bg-blue-100 rounded transition-colors",title:"Copy invitation link",children:d?e.jsx(G,{className:"h-4 w-4 text-green-600"}):e.jsx(K,{className:"h-4 w-4"})})]})})]}),e.jsx("button",{onClick:()=>{k(null),T(null)},className:"flex-shrink-0 ml-2 p-1 text-blue-600 hover:text-blue-900 hover:bg-blue-100 rounded transition-colors",title:"Dismiss",children:e.jsx(xe,{className:"h-4 w-4"})})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"All Accounts"}),E?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600 mx-auto"})}):e.jsx("div",{className:"space-y-3",children:p.length===0?e.jsx("div",{className:"text-center py-4 text-sm text-gray-500",children:"No accounts found. Create your first account above."}):p.map(s=>{const S=P[s.id]||[],m=S.length,q=B.has(s.id);return e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx(J,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Created ",s.createdAt instanceof Date?s.createdAt.toLocaleDateString():new Date(s.createdAt).toLocaleDateString()]})]}),m>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"h-4 w-4 text-blue-500"}),e.jsxs("span",{className:"text-xs font-medium text-blue-600",children:[m," ",m===1?"invitation":"invitations"]})]})]}),m>0&&e.jsx("button",{onClick:()=>se(s.id),className:"ml-2 p-1 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded transition-colors",title:q?"Collapse invitations":"View invitations",children:q?e.jsx(ue,{className:"h-5 w-5"}):e.jsx(he,{className:"h-5 w-5"})})]}),q&&m>0&&e.jsxs("div",{className:"border-t border-gray-200 p-3 bg-white rounded-b-lg",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-700 mb-2",children:"Pending Invitations"}),e.jsx("div",{className:"space-y-2",children:S.map(R=>{const te=`${window.location.origin}/invite/${R.token}`,ae=M.has(R.token);return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded border border-gray-200",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:R.email}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Role: ",R.role," • Expires: ",new Date(R.expiresAt).toLocaleDateString()]}),e.jsx("div",{className:"text-xs text-gray-400 font-mono truncate mt-1",children:te})]}),e.jsx("button",{onClick:()=>ee(R.token),className:"ml-3 flex-shrink-0 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded transition-colors",title:"Copy invitation link",children:ae?e.jsx(G,{className:"h-4 w-4 text-green-600"}):e.jsx(K,{className:"h-4 w-4"})})]},R.id)})})]})]},s.id)})})]})]}):e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(z,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Access Denied"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Only app owners can manage accounts."})]})})}function Se(){const{currentAccountId:n,loading:g}=X(),[f,b]=a.useState([]),[l,N]=a.useState(!0),[p,I]=a.useState(!1),[E,x]=a.useState(null),[c,u]=a.useState(null),o=a.useCallback(async()=>{if(n)try{N(!0),x(null);const r=await ye(n);b(r)}catch(r){console.error("Error loading tax presets:",r),x("Failed to load tax presets")}finally{N(!1)}},[n]);a.useEffect(()=>{g||(n?o():(N(!1),x("No account found. Please ensure you are logged in and have an account.")))},[n,g,o]);const C=(r,w,i)=>{b(j=>j.map((k,U)=>U===r?{...k,[w]:i}:k)),x(null),u(null)},h=async()=>{if(!n){x("Account ID is required to save tax presets");return}try{I(!0),x(null),u(null);for(const r of f){if(!r.name.trim())throw new Error("All presets must have a name");if(r.rate<0||r.rate>100)throw new Error("Tax rates must be between 0 and 100")}await be(n,f),u("Tax presets updated successfully"),setTimeout(()=>u(null),3e3)}catch(r){console.error("Error saving tax presets:",r),x(r instanceof Error?r.message:"Failed to save tax presets")}finally{I(!1)}};return l?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-1",children:"Tax Rate Presets"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage the 5 tax rate presets available when creating transactions. These presets can be selected to auto-populate the tax rate."})]}),E&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(ge,{className:"h-5 w-5 text-red-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("div",{className:"mt-2 text-sm text-red-700",children:e.jsx("p",{children:E})})]})]})}),c&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:e.jsx("div",{className:"text-sm text-green-800",children:c})}),e.jsx("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-md",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"Preset Name"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Tax Rate (%)"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:f.map((r,w)=>e.jsxs("tr",{children:[e.jsx("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6",children:e.jsx("input",{type:"text",value:r.name,onChange:i=>C(w,"name",i.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:"Preset name"})}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:r.rate,onChange:i=>C(w,"rate",parseFloat(i.target.value)||0),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:"0.00"})})]},r.id))})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"button",onClick:h,disabled:p,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),p?"Saving...":"Save Presets"]})})]})}function Re(){const{user:n,isOwner:g}=V(),{currentAccountId:f,isAdmin:b}=X(),{businessProfile:l,businessName:N,businessLogoUrl:p,refreshProfile:I}=le(),[E,x]=a.useState(N),[c,u]=a.useState(null),[o,C]=a.useState(p||null),[h,r]=a.useState(!1),[w,i]=a.useState(null),[j,k]=a.useState(!1),U=d=>{var P;const A=(P=d.target.files)==null?void 0:P[0];if(A){if(!H.validateImageFile(A)){i("Invalid image file. Please upload a valid image (JPEG, PNG, GIF, WebP) under 10MB.");return}u(A);const L=new FileReader;L.onloadend=()=>{C(L.result)},L.readAsDataURL(A),i(null)}},T=async()=>{if(!(!f||!n)){r(!0),i(null),k(!1);try{let d=p||null;c&&(console.log("Attempting to upload business logo..."),d=(await H.uploadBusinessLogo(f,c)).url,console.log("Business logo uploaded successfully.")),console.log("Attempting to update business profile..."),await ce.updateBusinessProfile(f,E.trim(),d,n.id),console.log("Business profile updated successfully."),console.log("Attempting to refresh profile..."),await I(),console.log("Profile refreshed successfully."),k(!0),u(null),setTimeout(()=>k(!1),3e3)}catch(d){console.error("Error saving business profile:",d),i(d.message||"Failed to save business profile. Please try again.")}finally{r(!1)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage your account settings and preferences."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(pe,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Profile"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your account settings and preferences"})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Profile Information"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name"}),e.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md text-sm text-gray-900",children:n==null?void 0:n.fullName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md text-sm text-gray-900",children:n==null?void 0:n.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),e.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md text-sm text-gray-900 capitalize",children:n==null?void 0:n.role}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Contact an administrator to change your role."})]})]})]})})]})}),g()&&e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx(we,{})}),(g()||b)&&e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx(Ne,{})}),b&&e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(je,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Tax Rate Presets"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage tax rate presets available when creating transactions"})]})]}),e.jsx(Se,{})]})}),b&&e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Business Profile"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your business name and logo for invoices and branding"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"businessName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name"}),e.jsx("input",{type:"text",id:"businessName",value:E,onChange:d=>x(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter business name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Logo"}),e.jsxs("div",{className:"flex items-start space-x-4",children:[o&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:o,alt:"Business logo preview",className:"h-24 w-24 object-contain border border-gray-300 rounded"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:U,className:"hidden"}),e.jsxs("div",{className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),c||o?"Change Logo":"Upload Logo"]})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Recommended: Square image, at least 200x200px. Max size: 10MB"})]})]})]}),w&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-sm text-red-800",children:w})}),j&&e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsx("p",{className:"text-sm text-green-800",children:"Business profile saved successfully!"})}),e.jsx("div",{className:"pt-4",children:e.jsx(Y,{onClick:T,disabled:h||!E.trim(),className:"w-full sm:w-auto",children:h?"Saving...":"Save Business Profile"})})]})]})})]})]})}export{Re as default};
//# sourceMappingURL=Settings.js.map
