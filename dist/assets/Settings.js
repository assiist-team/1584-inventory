import{u as X,d as Y,U as j,n as ne,o as W,j as e,B as H,p as Z,e as ie,q as le,l as ce,r as oe}from"./index.js";import{r as a}from"./vendor.js";import{I as Q}from"./imageService.js";import{S as de}from"./Select.js";import{d as G,U as z,M as _,y as K,i as J,z as me,p as V,f as xe,b as ue,s as he,j as ge,A as fe,t as pe,q as je,S as ve,u as ye}from"./ui.js";import{g as be,u as Ne}from"./taxPresetsService.js";import"./router.js";import"./supabase.js";function we({className:n}){const{user:x,isOwner:u,loading:v,userLoading:U}=X(),{currentAccountId:i,isAdmin:y,loading:b}=Y(),[E,h]=a.useState([]),[S,l]=a.useState(!0),[g,m]=a.useState(""),[C,r]=a.useState(j.USER),[N,o]=a.useState(!1),[k,c]=a.useState(""),[I,T]=a.useState([]),[f,A]=a.useState(null),P=y||u(),L=a.useCallback(async()=>{if(i)try{const t=await ne(i);T(t)}catch(t){console.error("Error loading pending invitations:",t)}},[i]),F=a.useCallback(async()=>{try{if(l(!0),!i){h([]),l(!1);return}const t=await W.getAccountUsers(i);h(t.map(p=>({...p,role:p.role==="owner"?j.OWNER:p.role==="admin"?j.ADMIN:j.USER})))}catch(t){console.error("Error loading users:",t),c("Failed to load users")}finally{l(!1)}},[i]);a.useEffect(()=>{if(v||U||b){l(!0);return}P&&i?(F(),L()):l(!1)},[P,i,v,U,b,F,L]);const $=async()=>{if(g.trim())try{if(o(!0),c(""),!i){c("Account ID is required");return}if(!(x!=null&&x.id)){c("User ID is required");return}const t=await Z(g.trim(),C,x.id,i);await L(),await navigator.clipboard.writeText(t),A(t),setTimeout(()=>A(null),2e3),m(""),r(j.USER)}catch(t){console.error("Error inviting user:",t),c("Failed to create invitation")}finally{o(!1)}},q=async t=>{const p=`${window.location.origin}/invite/${t}`;await navigator.clipboard.writeText(p),A(t),setTimeout(()=>A(null),2e3)},M=t=>{switch(t){case j.OWNER:return e.jsx(me,{className:"h-4 w-4 text-yellow-500"});case j.ADMIN:return e.jsx(G,{className:"h-4 w-4 text-blue-500"});case j.USER:return e.jsx(z,{className:"h-4 w-4 text-gray-500"});default:return e.jsx(z,{className:"h-4 w-4 text-gray-500"})}},B=t=>{switch(t){case j.OWNER:return"bg-yellow-100 text-yellow-800";case j.ADMIN:return"bg-blue-100 text-blue-800";case j.USER:return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return P?e.jsxs("div",{className:`p-6 ${n}`,children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(z,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"User Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Invite team members and manage user roles"})]})]}),k&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("div",{className:"text-sm text-red-600",children:k})}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Invite Team Member"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:g,onChange:t=>m(t.target.value),placeholder:"user@example.com",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),e.jsx(de,{label:"Assign Role",value:C,onChange:t=>r(t.target.value),children:e.jsx("option",{value:j.USER,children:"User"})}),e.jsxs(H,{onClick:$,disabled:N||!g.trim(),className:"w-full flex items-center justify-center space-x-2",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{children:N?"Creating...":"Create Invitation Link"})]})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"An invitation link will be generated and copied to your clipboard. Share it with the user to invite them."})]}),I.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Pending Invitations"}),e.jsx("div",{className:"space-y-2",children:I.map(t=>{const p=`${window.location.origin}/invite/${t.token}`,D=f===t.token;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded border border-gray-200",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:t.email}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Role: ",t.role," • Expires: ",new Date(t.expiresAt).toLocaleDateString()]}),e.jsx("div",{className:"text-xs text-gray-400 font-mono truncate mt-1",children:p})]}),e.jsx("button",{onClick:()=>q(t.token),className:"ml-3 flex-shrink-0 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded",title:"Copy invitation link",children:D?e.jsx(K,{className:"h-4 w-4 text-green-600"}):e.jsx(J,{className:"h-4 w-4"})})]},t.id)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Team Members"}),S?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600 mx-auto"})}):e.jsx("div",{className:"space-y-3",children:E.map(t=>{const p=t.role||j.USER;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[M(p),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.fullName}),e.jsx("div",{className:"text-sm text-gray-500",children:t.email})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${B(p)}`,children:p})})]},t.id)})})]})]}):e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(G,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Access Denied"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You don't have permission to manage users."})]})})}function Se({className:n}){const{user:x,isOwner:u,loading:v,userLoading:U}=X(),{showSuccess:i,showError:y}=ie(),[b,E]=a.useState([]),[h,S]=a.useState(!0),[l,g]=a.useState(!1),[m,C]=a.useState(""),[r,N]=a.useState(""),[o,k]=a.useState(""),[c,I]=a.useState(null),[T,f]=a.useState(null),[A,P]=a.useState(!1),[L,F]=a.useState({}),[$,q]=a.useState(new Set),[M,B]=a.useState(new Set);a.useEffect(()=>{v||U||(u()?t():S(!1))},[v,U,u]),a.useEffect(()=>{u()&&b.length>0&&p()},[b]);const t=async()=>{try{S(!0),k("");const s=await W.getAllAccounts();E(s)}catch(s){console.error("Error loading accounts:",s),k("Failed to load accounts"),y("Failed to load accounts")}finally{S(!1)}},p=async()=>{try{const s=b.map(d=>d.id);if(s.length===0)return;const w=await le(s);F(w)}catch(s){console.error("Error loading account invitations:",s)}},D=async()=>{if(!(!m.trim()||!x)){if(!r.trim()){k("First user email is required"),y("Please provide an email address for the first user");return}try{g(!0),k("");const s=await W.createAccount(m.trim(),x.id),w=await Z(r.trim(),j.ADMIN,x.id,s);I(w),f(r.trim()),i(`Account "${m.trim()}" created successfully.`),C(""),N(""),await t(),await p()}catch(s){console.error("Error creating account:",s);const w=s instanceof Error?s.message:"Failed to create account";k(w),y(w)}finally{g(!1)}}},ee=async()=>{if(c)try{await navigator.clipboard.writeText(c),P(!0),i("Invitation link copied to clipboard"),setTimeout(()=>P(!1),2e3)}catch(s){console.error("Error copying link:",s),y("Failed to copy link")}},se=async s=>{const w=`${window.location.origin}/invite/${s}`;try{await navigator.clipboard.writeText(w),B(new Set([...M,s])),i("Invitation link copied to clipboard"),setTimeout(()=>{B(new Set([...M].filter(d=>d!==s)))},2e3)}catch(d){console.error("Error copying link:",d),y("Failed to copy link")}},te=s=>{q(w=>{const d=new Set(w);return d.has(s)?d.delete(s):d.add(s),d})};return v?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):u()?e.jsxs("div",{className:`p-6 ${n}`,children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(V,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Account Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Create and manage accounts in the system"})]})]}),o&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("div",{className:"text-sm text-red-600",children:o})}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Create New Account"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Account Name"}),e.jsx("input",{type:"text",value:m,onChange:s=>C(s.target.value),placeholder:"Enter account name",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",onKeyDown:s=>{s.key==="Enter"&&m.trim()&&r.trim()&&!l&&D()}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"First User Email (Admin)"}),e.jsx("input",{type:"email",value:r,onChange:s=>N(s.target.value),placeholder:"user@example.com",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",onKeyDown:s=>{s.key==="Enter"&&m.trim()&&r.trim()&&!l&&D()}})]}),e.jsxs(H,{onClick:D,disabled:l||!m.trim()||!r.trim(),className:"w-full flex items-center justify-center space-x-2",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{children:l?"Creating...":"Create Account"})]})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Accounts are used to organize projects and data. An invitation link will be generated for the first user."})]}),c&&e.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-1",children:"Invitation Link Created"}),e.jsxs("p",{className:"text-xs text-blue-700 mb-3",children:["Share this link with ",e.jsx("span",{className:"font-medium",children:T||"the invited user"})," to complete their account setup."]}),e.jsx("div",{className:"bg-white border border-blue-200 rounded-md p-3 mb-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("code",{className:"flex-1 text-xs text-gray-800 break-all font-mono",children:c}),e.jsx("button",{onClick:ee,className:"flex-shrink-0 p-2 text-blue-600 hover:text-blue-900 hover:bg-blue-100 rounded transition-colors",title:"Copy invitation link",children:A?e.jsx(K,{className:"h-4 w-4 text-green-600"}):e.jsx(J,{className:"h-4 w-4"})})]})})]}),e.jsx("button",{onClick:()=>{I(null),f(null)},className:"flex-shrink-0 ml-2 p-1 text-blue-600 hover:text-blue-900 hover:bg-blue-100 rounded transition-colors",title:"Dismiss",children:e.jsx(ue,{className:"h-4 w-4"})})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"All Accounts"}),h?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600 mx-auto"})}):e.jsx("div",{className:"space-y-3",children:b.length===0?e.jsx("div",{className:"text-center py-4 text-sm text-gray-500",children:"No accounts found. Create your first account above."}):b.map(s=>{const w=L[s.id]||[],d=w.length,O=$.has(s.id);return e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx(V,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Created ",s.createdAt instanceof Date?s.createdAt.toLocaleDateString():new Date(s.createdAt).toLocaleDateString()]})]}),d>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{className:"h-4 w-4 text-blue-500"}),e.jsxs("span",{className:"text-xs font-medium text-blue-600",children:[d," ",d===1?"invitation":"invitations"]})]})]}),d>0&&e.jsx("button",{onClick:()=>te(s.id),className:"ml-2 p-1 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded transition-colors",title:O?"Collapse invitations":"View invitations",children:O?e.jsx(he,{className:"h-5 w-5"}):e.jsx(ge,{className:"h-5 w-5"})})]}),O&&d>0&&e.jsxs("div",{className:"border-t border-gray-200 p-3 bg-white rounded-b-lg",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-700 mb-2",children:"Pending Invitations"}),e.jsx("div",{className:"space-y-2",children:w.map(R=>{const ae=`${window.location.origin}/invite/${R.token}`,re=M.has(R.token);return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded border border-gray-200",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:R.email}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Role: ",R.role," • Expires: ",new Date(R.expiresAt).toLocaleDateString()]}),e.jsx("div",{className:"text-xs text-gray-400 font-mono truncate mt-1",children:ae})]}),e.jsx("button",{onClick:()=>se(R.token),className:"ml-3 flex-shrink-0 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded transition-colors",title:"Copy invitation link",children:re?e.jsx(K,{className:"h-4 w-4 text-green-600"}):e.jsx(J,{className:"h-4 w-4"})})]},R.id)})})]})]},s.id)})})]})]}):e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(G,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Access Denied"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Only app owners can manage accounts."})]})})}function ke(){const{currentAccountId:n,loading:x}=Y(),[u,v]=a.useState([]),[U,i]=a.useState(!0),[y,b]=a.useState(!1),[E,h]=a.useState(null),[S,l]=a.useState(null),g=a.useCallback(async()=>{if(n)try{i(!0),h(null);const r=await be(n);v(r)}catch(r){console.error("Error loading tax presets:",r),h("Failed to load tax presets")}finally{i(!1)}},[n]);a.useEffect(()=>{x||(n?g():(i(!1),h("No account found. Please ensure you are logged in and have an account.")))},[n,x,g]);const m=(r,N,o)=>{v(k=>k.map((c,I)=>I===r?{...c,[N]:o}:c)),h(null),l(null)},C=async()=>{if(!n){h("Account ID is required to save tax presets");return}try{b(!0),h(null),l(null);for(const r of u){if(!r.name.trim())throw new Error("All presets must have a name");if(r.rate<0||r.rate>100)throw new Error("Tax rates must be between 0 and 100")}await Ne(n,u),l("Tax presets updated successfully"),setTimeout(()=>l(null),3e3)}catch(r){console.error("Error saving tax presets:",r),h(r instanceof Error?r.message:"Failed to save tax presets")}finally{b(!1)}};return U?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-1",children:"Tax Rate Presets"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage the 5 tax rate presets available when creating transactions. These presets can be selected to auto-populate the tax rate."})]}),E&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(fe,{className:"h-5 w-5 text-red-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("div",{className:"mt-2 text-sm text-red-700",children:e.jsx("p",{children:E})})]})]})}),S&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:e.jsx("div",{className:"text-sm text-green-800",children:S})}),e.jsx("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-md",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"Preset Name"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Tax Rate (%)"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:u.map((r,N)=>e.jsxs("tr",{children:[e.jsx("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6",children:e.jsx("input",{type:"text",value:r.name,onChange:o=>m(N,"name",o.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:"Preset name"})}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:r.rate,onChange:o=>m(N,"rate",parseFloat(o.target.value)||0),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:"0.00"})})]},r.id))})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"button",onClick:C,disabled:y,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),y?"Saving...":"Save Presets"]})})]})}function Te(){const{user:n,isOwner:x}=X(),{currentAccountId:u,isAdmin:v}=Y(),{businessProfile:U,businessName:i,businessLogoUrl:y,refreshProfile:b}=ce(),[E,h]=a.useState(i),[S,l]=a.useState(null),[g,m]=a.useState(y||null),[C,r]=a.useState(!1),[N,o]=a.useState(null),[k,c]=a.useState(!1),I=f=>{var P;const A=(P=f.target.files)==null?void 0:P[0];if(A){if(!Q.validateImageFile(A)){o("Invalid image file. Please upload a valid image (JPEG, PNG, GIF, WebP) under 10MB.");return}l(A);const L=new FileReader;L.onloadend=()=>{m(L.result)},L.readAsDataURL(A),o(null)}},T=async()=>{if(!(!u||!n)){r(!0),o(null),c(!1);try{let f=y||null;S&&(console.log("Attempting to upload business logo..."),f=(await Q.uploadBusinessLogo(u,S)).url,console.log("Business logo uploaded successfully.")),console.log("Attempting to update business profile..."),await oe.updateBusinessProfile(u,E.trim(),f,n.id),console.log("Business profile updated successfully."),console.log("Attempting to refresh profile..."),await b(),console.log("Profile refreshed successfully."),c(!0),l(null),setTimeout(()=>c(!1),3e3)}catch(f){console.error("Error saving business profile:",f),o(f.message||"Failed to save business profile. Please try again.")}finally{r(!1)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage your account settings and preferences."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(je,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Profile"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your account settings and preferences"})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Profile Information"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name"}),e.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md text-sm text-gray-900",children:n==null?void 0:n.fullName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md text-sm text-gray-900",children:n==null?void 0:n.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),e.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded-md text-sm text-gray-900 capitalize",children:n==null?void 0:n.role}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Contact an administrator to change your role."})]})]})]})})]})}),x()&&e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx(Se,{})}),(x()||v)&&e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx(we,{})}),v&&e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ve,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Tax Rate Presets"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage tax rate presets available when creating transactions"})]})]}),e.jsx(ke,{})]})}),v&&e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(V,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Business Profile"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your business name and logo for invoices and branding"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"businessName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name"}),e.jsx("input",{type:"text",id:"businessName",value:E,onChange:f=>h(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter business name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Logo"}),e.jsxs("div",{className:"flex items-start space-x-4",children:[g&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:g,alt:"Business logo preview",className:"h-24 w-24 object-contain border border-gray-300 rounded"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:I,className:"hidden"}),e.jsxs("div",{className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),S||g?"Change Logo":"Upload Logo"]})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Recommended: Square image, at least 200x200px. Max size: 10MB"})]})]})]}),N&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-sm text-red-800",children:N})}),k&&e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsx("p",{className:"text-sm text-green-800",children:"Business profile saved successfully!"})}),e.jsx("div",{className:"pt-4",children:e.jsx(H,{onClick:T,disabled:C||!E.trim(),className:"w-full sm:w-auto",children:C?"Saving...":"Save Business Profile"})})]})]})})]})]})}export{Te as default};
//# sourceMappingURL=Settings.js.map
