import{j as e}from"./index.js";import{r as i}from"./vendor.js";import{I as E}from"./ImageGallery.js";import{u as P,n as $,v as G,w as M,T as L,P as g}from"./ui.js";function Y({images:l,onAddImage:a,onRemoveImage:n,onSetPrimary:o,maxImages:d=5,showControls:y=!0,size:h="md",className:b=""}){const[w,p]=i.useState(!1),[j,v]=i.useState(0),[c,u]=i.useState(null),x={sm:"w-20 h-20 sm:w-16 sm:h-16",md:"w-24 h-24 sm:w-20 sm:h-20",lg:"w-28 h-28 sm:w-24 sm:h-24"},f=t=>{v(t),p(!0)},N=()=>{p(!1)},k=(t,r)=>{t.stopPropagation(),u(c===r?null:r)},m=(t,r,s,C)=>{switch(t.stopPropagation(),u(null),r){case"open":f(C);break;case"setPrimary":o==null||o(s);break;case"delete":n==null||n(s);break}};return i.useEffect(()=>{const t=r=>{c!==null&&!r.target.closest(".image-menu-container")&&u(null)};return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[c]),l.length===0&&!a?null:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`space-y-3 ${b}`,children:[l.length>0&&e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3 sm:gap-4 md:gap-6",style:{width:"fit-content"},children:[l.map((t,r)=>e.jsxs("div",{className:`${x[h]} relative group cursor-pointer rounded-lg overflow-visible border-2 ${t.isPrimary?"border-primary-500 ring-2 ring-primary-200":"border-gray-200"}`,onClick:()=>f(r),children:[e.jsx("img",{src:t.url,alt:t.alt||t.fileName,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}),t.isPrimary&&e.jsx("div",{className:"absolute top-1 left-1 bg-yellow-500 text-white text-xs p-1 rounded flex items-center justify-center",children:e.jsx(P,{className:"h-3 w-3 fill-current"})}),y&&e.jsx("div",{className:"absolute inset-0 bg-transparent transition-all duration-200",children:e.jsxs("div",{className:"absolute top-1 right-1 image-menu-container",children:[e.jsx("button",{onClick:s=>k(s,r),className:"p-1.5 bg-primary-500 bg-opacity-90 rounded-full text-white hover:bg-primary-600 transition-colors",title:"Image options",children:e.jsx($,{className:"h-3 w-3"})}),c===r&&e.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-1 w-32 bg-white rounded-md shadow-lg border border-gray-200 py-1 z-50",style:{transform:"translateY(0)",maxHeight:"calc(100vh - 100px)",overflowY:"auto"},children:[e.jsxs("button",{onClick:s=>m(s,"open",t.url,r),className:"w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center transition-colors",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"Open"})]}),!t.isPrimary&&o&&e.jsxs("button",{onClick:s=>m(s,"setPrimary",t.url,r),className:"w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center transition-colors",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"Primary"})]}),n&&e.jsxs("button",{onClick:s=>m(s,"delete",t.url,r),className:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center transition-colors",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"Delete"})]})]})]})})]},t.url)),a&&l.length<d&&e.jsx("button",{onClick:a,className:`${x[h]} border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center text-gray-400 hover:text-gray-600 hover:border-gray-400 transition-colors`,title:"Add image",children:e.jsx(g,{className:"h-5 w-5"})})]}),!l.length&&a&&e.jsx("button",{onClick:a,className:`${x[h]} border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center text-gray-400 hover:text-gray-600 hover:border-gray-400 transition-colors w-full`,title:"Add image",children:e.jsx(g,{className:"h-5 w-5"})}),l.length>0&&e.jsxs("p",{className:"text-xs text-gray-500",children:[l.length," image",l.length!==1?"s":"",d&&` (max ${d})`]})]}),w&&e.jsx(E,{images:l,initialIndex:j,onClose:N})]})}export{Y as I};
//# sourceMappingURL=ImagePreview.js.map
