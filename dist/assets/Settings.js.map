{"version":3,"file":"Settings.js","sources":["../../src/components/auth/UserManagement.tsx","../../src/components/auth/AccountManagement.tsx","../../src/components/TaxPresetsManager.tsx","../../src/components/VendorDefaultsManager.tsx","../../src/components/BudgetCategoriesManager.tsx","../../src/pages/Settings.tsx"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react'\nimport { useAuth } from '../../contexts/AuthContext'\nimport { useAccount } from '../../contexts/AccountContext'\nimport { Button } from '../ui/Button'\nimport { Select } from '../ui/Select'\nimport { createUserInvitation, getPendingInvitations } from '../../services/supabase'\nimport { accountService } from '../../services/accountService'\nimport { User, UserRole } from '../../types'\nimport { Mail, Shield, Users, Crown, Copy, Check } from 'lucide-react'\n\ninterface UserManagementProps {\n  className?: string\n}\n\nexport default function UserManagement({ className }: UserManagementProps) {\n  const { user: currentUser, isOwner, loading: authLoading, userLoading } = useAuth()\n  const { currentAccountId, isAdmin, loading: accountLoading } = useAccount()\n  const [users, setUsers] = useState<User[]>([])\n  const [loading, setLoading] = useState(true)\n  const [inviteEmail, setInviteEmail] = useState('')\n  const [inviteRole, setInviteRole] = useState<UserRole>(UserRole.USER)\n  const [inviting, setInviting] = useState(false)\n  const [error, setError] = useState('')\n  const [pendingInvitations, setPendingInvitations] = useState<Array<{\n    id: string;\n    email: string;\n    role: 'admin' | 'user';\n    token: string;\n    createdAt: string;\n    expiresAt: string;\n  }>>([])\n  const [copiedToken, setCopiedToken] = useState<string | null>(null)\n\n  // Admins and owners can manage users\n  const canManageUsers = isAdmin || isOwner()\n\n  const loadPendingInvitations = useCallback(async () => {\n    if (!currentAccountId) return\n    try {\n      const invitations = await getPendingInvitations(currentAccountId)\n      setPendingInvitations(invitations)\n    } catch (err) {\n      console.error('Error loading pending invitations:', err)\n    }\n  }, [currentAccountId])\n\n  const loadUsers = useCallback(async () => {\n    try {\n      setLoading(true)\n      // Load users for the current account\n      if (!currentAccountId) {\n        setUsers([])\n        setLoading(false)\n        return\n      }\n\n      const usersData = await accountService.getAccountUsers(currentAccountId)\n      \n      setUsers(usersData.map(user => ({\n        ...user,\n        // Map role correctly: owner -> OWNER, admin -> ADMIN, user -> USER\n        role: user.role === 'owner' ? UserRole.OWNER \n          : user.role === 'admin' ? UserRole.ADMIN \n          : UserRole.USER\n      })))\n    } catch (err) {\n      console.error('Error loading users:', err)\n      setError('Failed to load users')\n    } finally {\n      setLoading(false)\n    }\n  }, [currentAccountId])\n\n  useEffect(() => {\n    if (authLoading || userLoading || accountLoading) {\n      setLoading(true)\n      return\n    }\n    if (canManageUsers && currentAccountId) {\n      loadUsers()\n      loadPendingInvitations()\n    } else {\n      setLoading(false)\n    }\n  }, [canManageUsers, currentAccountId, authLoading, userLoading, accountLoading, loadUsers, loadPendingInvitations])\n\n  const inviteUser = async () => {\n    if (!inviteEmail.trim()) return\n\n    try {\n      setInviting(true)\n      setError('')\n\n      // Create invitation in Supabase\n      if (!currentAccountId) {\n        setError('Account ID is required')\n        return\n      }\n      if (!currentUser?.id) {\n        setError('User ID is required')\n        return\n      }\n      \n      const invitationLink = await createUserInvitation(\n        inviteEmail.trim(), \n        inviteRole, \n        currentUser.id, \n        currentAccountId\n      )\n\n      // Reload invitations to show the new one\n      await loadPendingInvitations()\n\n      // Copy link to clipboard\n      await navigator.clipboard.writeText(invitationLink)\n      setCopiedToken(invitationLink)\n      setTimeout(() => setCopiedToken(null), 2000)\n\n      setInviteEmail('')\n      setInviteRole(UserRole.USER)\n    } catch (err) {\n      console.error('Error inviting user:', err)\n      setError('Failed to create invitation')\n    } finally {\n      setInviting(false)\n    }\n  }\n\n  const copyInvitationLink = async (token: string) => {\n    const link = `${window.location.origin}/invite/${token}`\n    await navigator.clipboard.writeText(link)\n    setCopiedToken(token)\n    setTimeout(() => setCopiedToken(null), 2000)\n  }\n\n  const getRoleIcon = (role: UserRole) => {\n    switch (role) {\n      case UserRole.OWNER:\n        return <Crown className=\"h-4 w-4 text-yellow-500\" />\n      case UserRole.ADMIN:\n        return <Shield className=\"h-4 w-4 text-blue-500\" />\n      case UserRole.USER:\n        return <Users className=\"h-4 w-4 text-gray-500\" />\n      default:\n        return <Users className=\"h-4 w-4 text-gray-500\" />\n    }\n  }\n\n  const getRoleBadgeColor = (role: UserRole) => {\n    switch (role) {\n      case UserRole.OWNER:\n        return 'bg-yellow-100 text-yellow-800'\n      case UserRole.ADMIN:\n        return 'bg-blue-100 text-blue-800'\n      case UserRole.USER:\n        return 'bg-gray-100 text-gray-800'\n      default:\n        return 'bg-gray-100 text-gray-800'\n    }\n  }\n\n  if (!canManageUsers) {\n    return (\n      <div className=\"bg-white shadow rounded-lg p-6\">\n        <div className=\"text-center\">\n          <Shield className=\"mx-auto h-12 w-12 text-gray-400\" />\n          <h3 className=\"mt-2 text-sm font-medium text-gray-900\">Access Denied</h3>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            You don't have permission to manage users.\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className={`p-6 ${className}`}>\n      <div className=\"flex items-center mb-4\">\n        <div className=\"flex-shrink-0\">\n          <Users className=\"h-8 w-8 text-gray-400\" />\n        </div>\n        <div className=\"ml-4 flex-1\">\n          <h3 className=\"text-lg font-medium text-gray-900\">\n            User Management\n          </h3>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            Invite team members and manage user roles\n          </p>\n        </div>\n      </div>\n\n        {error && (\n          <div className=\"mb-4 bg-red-50 border border-red-200 rounded-md p-4\">\n            <div className=\"text-sm text-red-600\">{error}</div>\n          </div>\n        )}\n\n        {/* Invite User Section */}\n        <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\n          <h3 className=\"text-sm font-medium text-gray-900 mb-3\">Invite Team Member</h3>\n          <div className=\"space-y-3\">\n            <div>\n              <label className=\"block text-xs font-medium text-gray-700 mb-1\">Email Address</label>\n              <input\n                type=\"email\"\n                value={inviteEmail}\n                onChange={(e) => setInviteEmail(e.target.value)}\n                placeholder=\"user@example.com\"\n                className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\n              />\n            </div>\n            <Select\n              label=\"Assign Role\"\n              value={inviteRole}\n              onChange={(e) => setInviteRole(e.target.value as UserRole)}\n            >\n              <option value={UserRole.USER}>User</option>\n            </Select>\n            <Button\n              onClick={inviteUser}\n              disabled={inviting || !inviteEmail.trim()}\n              className=\"w-full flex items-center justify-center space-x-2\"\n            >\n              <Mail className=\"h-4 w-4\" />\n              <span>{inviting ? 'Creating...' : 'Create Invitation Link'}</span>\n            </Button>\n          </div>\n          <p className=\"mt-2 text-xs text-gray-500\">\n            An invitation link will be generated and copied to your clipboard. Share it with the user to invite them.\n          </p>\n        </div>\n\n        {/* Pending Invitations */}\n        {pendingInvitations.length > 0 && (\n          <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\n            <h3 className=\"text-sm font-medium text-gray-900 mb-3\">Pending Invitations</h3>\n            <div className=\"space-y-2\">\n              {pendingInvitations.map((invitation) => {\n                const link = `${window.location.origin}/invite/${invitation.token}`\n                const isCopied = copiedToken === invitation.token\n                return (\n                  <div key={invitation.id} className=\"flex items-center justify-between p-3 bg-white rounded border border-gray-200\">\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"text-sm font-medium text-gray-900 truncate\">{invitation.email}</div>\n                      <div className=\"text-xs text-gray-500\">\n                        Role: {invitation.role} • Expires: {new Date(invitation.expiresAt).toLocaleDateString()}\n                      </div>\n                      <div className=\"text-xs text-gray-400 font-mono truncate mt-1\">{link}</div>\n                    </div>\n                    <button\n                      onClick={() => copyInvitationLink(invitation.token)}\n                      className=\"ml-3 flex-shrink-0 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded\"\n                      title=\"Copy invitation link\"\n                    >\n                      {isCopied ? (\n                        <Check className=\"h-4 w-4 text-green-600\" />\n                      ) : (\n                        <Copy className=\"h-4 w-4\" />\n                      )}\n                    </button>\n                  </div>\n                )\n              })}\n            </div>\n          </div>\n        )}\n\n        {/* Users List */}\n        <div>\n          <h3 className=\"text-sm font-medium text-gray-900 mb-3\">Team Members</h3>\n          {loading ? (\n            <div className=\"text-center py-4\">\n              <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600 mx-auto\"></div>\n            </div>\n          ) : (\n            <div className=\"space-y-3\">\n              {users.map((user) => {\n                const userRole = user.role || UserRole.USER\n                return (\n                  <div key={user.id} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                    <div className=\"flex items-center space-x-3\">\n                      {getRoleIcon(userRole)}\n                      <div>\n                        <div className=\"text-sm font-medium text-gray-900\">{user.fullName}</div>\n                        <div className=\"text-sm text-gray-500\">{user.email}</div>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getRoleBadgeColor(userRole)}`}>\n                        {userRole}\n                      </span>\n                    </div>\n                  </div>\n                )\n              })}\n            </div>\n          )}\n        </div>\n    </div>\n  )\n}\n","import { useState, useEffect } from 'react'\nimport { useAuth } from '../../contexts/AuthContext'\nimport { accountService } from '../../services/accountService'\nimport { Button } from '../ui/Button'\nimport { Building2, Plus, Shield, Copy, Check, X, ChevronDown, ChevronUp, Mail } from 'lucide-react'\nimport { Account, UserRole } from '../../types'\nimport { useToast } from '../ui/ToastContext'\nimport { createUserInvitation, getAllPendingInvitationsForAccounts } from '../../services/supabase'\n\ninterface AccountManagementProps {\n  className?: string\n}\n\nexport default function AccountManagement({ className }: AccountManagementProps) {\n  const { user, isOwner, loading: authLoading, userLoading } = useAuth()\n  const { showSuccess, showError } = useToast()\n  const [accounts, setAccounts] = useState<Account[]>([])\n  const [loading, setLoading] = useState(true)\n  const [creating, setCreating] = useState(false)\n  const [newAccountName, setNewAccountName] = useState('')\n  const [firstUserEmail, setFirstUserEmail] = useState('')\n  const [error, setError] = useState('')\n  const [lastInvitationLink, setLastInvitationLink] = useState<string | null>(null)\n  const [lastInvitationEmail, setLastInvitationEmail] = useState<string | null>(null)\n  const [copiedLink, setCopiedLink] = useState(false)\n  const [accountInvitations, setAccountInvitations] = useState<Record<string, Array<{\n    id: string;\n    email: string;\n    role: 'admin' | 'user';\n    token: string;\n    createdAt: string;\n    expiresAt: string;\n  }>>>({})\n  const [expandedAccounts, setExpandedAccounts] = useState<Set<string>>(new Set())\n  const [copiedTokens, setCopiedTokens] = useState<Set<string>>(new Set())\n\n  useEffect(() => {\n    if (authLoading || userLoading) {\n      return // Wait for authentication to complete\n    }\n    if (isOwner()) {\n      loadAccounts()\n    } else {\n      setLoading(false) // Not an owner, stop loading\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [authLoading, userLoading, isOwner])\n\n  useEffect(() => {\n    if (isOwner() && accounts.length > 0) {\n      loadAccountInvitations()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [accounts])\n\n  const loadAccounts = async () => {\n    try {\n      setLoading(true)\n      setError('')\n      const accountsData = await accountService.getAllAccounts()\n      setAccounts(accountsData)\n    } catch (err) {\n      console.error('Error loading accounts:', err)\n      setError('Failed to load accounts')\n      showError('Failed to load accounts')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const loadAccountInvitations = async () => {\n    try {\n      const accountIds = accounts.map(acc => acc.id)\n      if (accountIds.length === 0) return\n      \n      const invitations = await getAllPendingInvitationsForAccounts(accountIds)\n      setAccountInvitations(invitations)\n    } catch (err) {\n      console.error('Error loading account invitations:', err)\n    }\n  }\n\n  const createAccount = async () => {\n    if (!newAccountName.trim() || !user) return\n    if (!firstUserEmail.trim()) {\n      setError('First user email is required')\n      showError('Please provide an email address for the first user')\n      return\n    }\n\n    try {\n      setCreating(true)\n      setError('')\n      \n      // Step 1: Create the account\n      const accountId = await accountService.createAccount(\n        newAccountName.trim(),\n        user.id\n      )\n\n      // Step 2: Create invitation for the first user (always admin)\n      const invitationLink = await createUserInvitation(\n        firstUserEmail.trim(),\n        UserRole.ADMIN,\n        user.id,\n        accountId\n      )\n\n      // Store the invitation link to display\n      setLastInvitationLink(invitationLink)\n      setLastInvitationEmail(firstUserEmail.trim())\n      \n      showSuccess(`Account \"${newAccountName.trim()}\" created successfully.`)\n      setNewAccountName('')\n      setFirstUserEmail('')\n      await loadAccounts() // Refresh the list\n      await loadAccountInvitations() // Refresh invitations\n    } catch (err) {\n      console.error('Error creating account:', err)\n      const errorMessage = err instanceof Error ? err.message : 'Failed to create account'\n      setError(errorMessage)\n      showError(errorMessage)\n    } finally {\n      setCreating(false)\n    }\n  }\n\n  const copyInvitationLink = async () => {\n    if (!lastInvitationLink) return\n    try {\n      await navigator.clipboard.writeText(lastInvitationLink)\n      setCopiedLink(true)\n      showSuccess('Invitation link copied to clipboard')\n      setTimeout(() => setCopiedLink(false), 2000)\n    } catch (err) {\n      console.error('Error copying link:', err)\n      showError('Failed to copy link')\n    }\n  }\n\n  const copyAccountInvitationLink = async (token: string) => {\n    const link = `${window.location.origin}/invite/${token}`\n    try {\n      await navigator.clipboard.writeText(link)\n      setCopiedTokens(new Set([...copiedTokens, token]))\n      showSuccess('Invitation link copied to clipboard')\n      setTimeout(() => {\n        setCopiedTokens(new Set([...copiedTokens].filter(t => t !== token)))\n      }, 2000)\n    } catch (err) {\n      console.error('Error copying link:', err)\n      showError('Failed to copy link')\n    }\n  }\n\n  const toggleAccountExpanded = (accountId: string) => {\n    setExpandedAccounts(prev => {\n      const newSet = new Set(prev)\n      if (newSet.has(accountId)) {\n        newSet.delete(accountId)\n      } else {\n        newSet.add(accountId)\n      }\n      return newSet\n    })\n  }\n\n  if (authLoading) {\n    return (\n      <div className=\"flex justify-center items-center py-8\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"></div>\n      </div>\n    )\n  }\n\n  if (!isOwner()) {\n    return (\n      <div className=\"bg-white shadow rounded-lg p-6\">\n        <div className=\"text-center\">\n          <Shield className=\"mx-auto h-12 w-12 text-gray-400\" />\n          <h3 className=\"mt-2 text-sm font-medium text-gray-900\">Access Denied</h3>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            Only app owners can manage accounts.\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className={`p-6 ${className}`}>\n      <div className=\"flex items-center mb-4\">\n        <div className=\"flex-shrink-0\">\n          <Building2 className=\"h-8 w-8 text-gray-400\" />\n        </div>\n        <div className=\"ml-4 flex-1\">\n          <h3 className=\"text-lg font-medium text-gray-900\">\n            Account Management\n          </h3>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            Create and manage accounts in the system\n          </p>\n        </div>\n      </div>\n\n      {error && (\n        <div className=\"mb-4 bg-red-50 border border-red-200 rounded-md p-4\">\n          <div className=\"text-sm text-red-600\">{error}</div>\n        </div>\n      )}\n\n      {/* Create Account Section */}\n      <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\n        <h3 className=\"text-sm font-medium text-gray-900 mb-3\">Create New Account</h3>\n        <div className=\"space-y-3\">\n          <div>\n            <label className=\"block text-xs font-medium text-gray-700 mb-1\">Account Name</label>\n            <input\n              type=\"text\"\n              value={newAccountName}\n              onChange={(e) => setNewAccountName(e.target.value)}\n              placeholder=\"Enter account name\"\n              className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\n              onKeyDown={(e) => {\n                if (e.key === 'Enter' && newAccountName.trim() && firstUserEmail.trim() && !creating) {\n                  createAccount()\n                }\n              }}\n            />\n          </div>\n          <div>\n            <label className=\"block text-xs font-medium text-gray-700 mb-1\">First User Email (Admin)</label>\n            <input\n              type=\"email\"\n              value={firstUserEmail}\n              onChange={(e) => setFirstUserEmail(e.target.value)}\n              placeholder=\"user@example.com\"\n              className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\n              onKeyDown={(e) => {\n                if (e.key === 'Enter' && newAccountName.trim() && firstUserEmail.trim() && !creating) {\n                  createAccount()\n                }\n              }}\n            />\n          </div>\n          <Button\n            onClick={createAccount}\n            disabled={creating || !newAccountName.trim() || !firstUserEmail.trim()}\n            className=\"w-full flex items-center justify-center space-x-2\"\n          >\n            <Plus className=\"h-4 w-4\" />\n            <span>{creating ? 'Creating...' : 'Create Account'}</span>\n          </Button>\n        </div>\n        <p className=\"mt-2 text-xs text-gray-500\">\n          Accounts are used to organize projects and data. An invitation link will be generated for the first user.\n        </p>\n      </div>\n\n      {/* Invitation Link Display */}\n      {lastInvitationLink && (\n        <div className=\"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n          <div className=\"flex items-start justify-between mb-2\">\n            <div className=\"flex-1\">\n              <h3 className=\"text-sm font-medium text-blue-900 mb-1\">Invitation Link Created</h3>\n              <p className=\"text-xs text-blue-700 mb-3\">\n                Share this link with <span className=\"font-medium\">{lastInvitationEmail || 'the invited user'}</span> to complete their account setup.\n              </p>\n              <div className=\"bg-white border border-blue-200 rounded-md p-3 mb-3\">\n                <div className=\"flex items-center space-x-2\">\n                  <code className=\"flex-1 text-xs text-gray-800 break-all font-mono\">\n                    {lastInvitationLink}\n                  </code>\n                  <button\n                    onClick={copyInvitationLink}\n                    className=\"flex-shrink-0 p-2 text-blue-600 hover:text-blue-900 hover:bg-blue-100 rounded transition-colors\"\n                    title=\"Copy invitation link\"\n                  >\n                    {copiedLink ? (\n                      <Check className=\"h-4 w-4 text-green-600\" />\n                    ) : (\n                      <Copy className=\"h-4 w-4\" />\n                    )}\n                  </button>\n                </div>\n              </div>\n            </div>\n            <button\n              onClick={() => {\n                setLastInvitationLink(null)\n                setLastInvitationEmail(null)\n              }}\n              className=\"flex-shrink-0 ml-2 p-1 text-blue-600 hover:text-blue-900 hover:bg-blue-100 rounded transition-colors\"\n              title=\"Dismiss\"\n            >\n              <X className=\"h-4 w-4\" />\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Accounts List */}\n      <div>\n        <h3 className=\"text-sm font-medium text-gray-900 mb-3\">All Accounts</h3>\n        {loading ? (\n          <div className=\"text-center py-4\">\n            <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600 mx-auto\"></div>\n          </div>\n        ) : (\n          <div className=\"space-y-3\">\n            {accounts.length === 0 ? (\n              <div className=\"text-center py-4 text-sm text-gray-500\">\n                No accounts found. Create your first account above.\n              </div>\n            ) : (\n              accounts.map((account) => {\n                const invitations = accountInvitations[account.id] || []\n                const invitationCount = invitations.length\n                const isExpanded = expandedAccounts.has(account.id)\n                \n                return (\n                  <div key={account.id} className=\"bg-gray-50 rounded-lg border border-gray-200\">\n                    <div className=\"flex items-center justify-between p-3\">\n                      <div className=\"flex items-center space-x-3 flex-1\">\n                        <Building2 className=\"h-5 w-5 text-gray-400\" />\n                        <div className=\"flex-1\">\n                          <div className=\"text-sm font-medium text-gray-900\">{account.name}</div>\n                          <div className=\"text-xs text-gray-500\">\n                            Created {account.createdAt instanceof Date \n                              ? account.createdAt.toLocaleDateString()\n                              : new Date(account.createdAt).toLocaleDateString()}\n                          </div>\n                        </div>\n                        {invitationCount > 0 && (\n                          <div className=\"flex items-center space-x-2\">\n                            <Mail className=\"h-4 w-4 text-blue-500\" />\n                            <span className=\"text-xs font-medium text-blue-600\">\n                              {invitationCount} {invitationCount === 1 ? 'invitation' : 'invitations'}\n                            </span>\n                          </div>\n                        )}\n                      </div>\n                      {invitationCount > 0 && (\n                        <button\n                          onClick={() => toggleAccountExpanded(account.id)}\n                          className=\"ml-2 p-1 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded transition-colors\"\n                          title={isExpanded ? 'Collapse invitations' : 'View invitations'}\n                        >\n                          {isExpanded ? (\n                            <ChevronUp className=\"h-5 w-5\" />\n                          ) : (\n                            <ChevronDown className=\"h-5 w-5\" />\n                          )}\n                        </button>\n                      )}\n                    </div>\n                    \n                    {/* Invitations List */}\n                    {isExpanded && invitationCount > 0 && (\n                      <div className=\"border-t border-gray-200 p-3 bg-white rounded-b-lg\">\n                        <h4 className=\"text-xs font-medium text-gray-700 mb-2\">Pending Invitations</h4>\n                        <div className=\"space-y-2\">\n                          {invitations.map((invitation) => {\n                            const link = `${window.location.origin}/invite/${invitation.token}`\n                            const isCopied = copiedTokens.has(invitation.token)\n                            \n                            return (\n                              <div key={invitation.id} className=\"flex items-center justify-between p-2 bg-gray-50 rounded border border-gray-200\">\n                                <div className=\"flex-1 min-w-0\">\n                                  <div className=\"text-sm font-medium text-gray-900 truncate\">{invitation.email}</div>\n                                  <div className=\"text-xs text-gray-500\">\n                                    Role: {invitation.role} • Expires: {new Date(invitation.expiresAt).toLocaleDateString()}\n                                  </div>\n                                  <div className=\"text-xs text-gray-400 font-mono truncate mt-1\">{link}</div>\n                                </div>\n                                <button\n                                  onClick={() => copyAccountInvitationLink(invitation.token)}\n                                  className=\"ml-3 flex-shrink-0 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded transition-colors\"\n                                  title=\"Copy invitation link\"\n                                >\n                                  {isCopied ? (\n                                    <Check className=\"h-4 w-4 text-green-600\" />\n                                  ) : (\n                                    <Copy className=\"h-4 w-4\" />\n                                  )}\n                                </button>\n                              </div>\n                            )\n                          })}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                )\n              })\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\n","import { useState, useEffect, useCallback } from 'react'\nimport { Save, AlertCircle } from 'lucide-react'\nimport { getTaxPresets, updateTaxPresets } from '@/services/taxPresetsService'\nimport { TaxPreset } from '@/types'\nimport { useAccount } from '@/contexts/AccountContext'\n\nexport default function TaxPresetsManager() {\n  const { currentAccountId, loading: accountLoading } = useAccount()\n  const [presets, setPresets] = useState<TaxPreset[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [isSaving, setIsSaving] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [successMessage, setSuccessMessage] = useState<string | null>(null)\n\n  const loadPresets = useCallback(async () => {\n    if (!currentAccountId) return\n    \n    try {\n      setIsLoading(true)\n      setError(null)\n      const loadedPresets = await getTaxPresets(currentAccountId)\n      setPresets(loadedPresets)\n    } catch (err) {\n      console.error('Error loading tax presets:', err)\n      setError('Failed to load tax presets')\n    } finally {\n      setIsLoading(false)\n    }\n  }, [currentAccountId])\n\n  useEffect(() => {\n    // Wait for account to finish loading\n    if (accountLoading) {\n      return\n    }\n\n    if (currentAccountId) {\n      loadPresets()\n    } else {\n      // If no account ID after loading completes, stop loading\n      setIsLoading(false)\n      setError('No account found. Please ensure you are logged in and have an account.')\n    }\n  }, [currentAccountId, accountLoading, loadPresets])\n\n  const handlePresetChange = (index: number, field: 'name' | 'rate', value: string | number) => {\n    setPresets(prev => prev.map((preset, i) => {\n      if (i === index) {\n        return { ...preset, [field]: value }\n      }\n      return preset\n    }))\n    // Clear messages when user makes changes\n    setError(null)\n    setSuccessMessage(null)\n  }\n\n  const handleSave = async () => {\n    if (!currentAccountId) {\n      setError('Account ID is required to save tax presets')\n      return\n    }\n    \n    try {\n      setIsSaving(true)\n      setError(null)\n      setSuccessMessage(null)\n\n      // Validate presets\n      for (const preset of presets) {\n        if (!preset.name.trim()) {\n          throw new Error('All presets must have a name')\n        }\n        if (preset.rate < 0 || preset.rate > 100) {\n          throw new Error('Tax rates must be between 0 and 100')\n        }\n      }\n\n      await updateTaxPresets(currentAccountId, presets)\n      setSuccessMessage('Tax presets updated successfully')\n      \n      // Clear success message after 3 seconds\n      setTimeout(() => setSuccessMessage(null), 3000)\n    } catch (err) {\n      console.error('Error saving tax presets:', err)\n      setError(err instanceof Error ? err.message : 'Failed to save tax presets')\n    } finally {\n      setIsSaving(false)\n    }\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"flex justify-center items-center py-8\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"></div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div>\n        <h4 className=\"text-lg font-medium text-gray-900 mb-1\">Tax Rate Presets</h4>\n        <p className=\"text-sm text-gray-500\">\n          Manage the 5 tax rate presets available when creating transactions. These presets can be selected to auto-populate the tax rate.\n        </p>\n      </div>\n\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\n          <div className=\"flex\">\n            <AlertCircle className=\"h-5 w-5 text-red-600\" />\n            <div className=\"ml-3\">\n              <h3 className=\"text-sm font-medium text-red-800\">Error</h3>\n              <div className=\"mt-2 text-sm text-red-700\">\n                <p>{error}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {successMessage && (\n        <div className=\"bg-green-50 border border-green-200 rounded-md p-4\">\n          <div className=\"text-sm text-green-800\">\n            {successMessage}\n          </div>\n        </div>\n      )}\n\n      <div className=\"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-md\">\n        <table className=\"min-w-full divide-y divide-gray-300\">\n          <thead className=\"bg-gray-50\">\n            <tr>\n              <th scope=\"col\" className=\"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6\">\n                Preset Name\n              </th>\n              <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">\n                Tax Rate (%)\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"divide-y divide-gray-200 bg-white\">\n            {presets.map((preset, index) => (\n              <tr key={preset.id}>\n                <td className=\"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6\">\n                  <input\n                    type=\"text\"\n                    value={preset.name}\n                    onChange={(e) => handlePresetChange(index, 'name', e.target.value)}\n                    className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\n                    placeholder=\"Preset name\"\n                  />\n                </td>\n                <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    max=\"100\"\n                    value={preset.rate}\n                    onChange={(e) => handlePresetChange(index, 'rate', parseFloat(e.target.value) || 0)}\n                    className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\n                    placeholder=\"0.00\"\n                  />\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      <div className=\"flex justify-end\">\n        <button\n          type=\"button\"\n          onClick={handleSave}\n          disabled={isSaving}\n          className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          <Save className=\"h-4 w-4 mr-2\" />\n          {isSaving ? 'Saving...' : 'Save Presets'}\n        </button>\n      </div>\n    </div>\n  )\n}\n\n","import { useState, useEffect, useCallback } from 'react'\nimport { Save, AlertCircle, X } from 'lucide-react'\nimport { getVendorDefaults, updateVendorSlot, VendorSlot } from '@/services/vendorDefaultsService'\nimport { useAccount } from '@/contexts/AccountContext'\nimport { useAuth } from '@/contexts/AuthContext'\n\nexport default function VendorDefaultsManager() {\n  const { currentAccountId, loading: accountLoading } = useAccount()\n  const { user } = useAuth()\n  const [slots, setSlots] = useState<VendorSlot[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [savingSlotIndex, setSavingSlotIndex] = useState<number | null>(null)\n  const [error, setError] = useState<string | null>(null)\n  const [successMessage, setSuccessMessage] = useState<string | null>(null)\n  const [editingSlotIndex, setEditingSlotIndex] = useState<number | null>(null)\n  const [editingValue, setEditingValue] = useState<string>('')\n\n  const loadDefaults = useCallback(async () => {\n    if (!currentAccountId) return\n    \n    try {\n      setIsLoading(true)\n      setError(null)\n      const response = await getVendorDefaults(currentAccountId)\n      setSlots(response.slots)\n    } catch (err) {\n      console.error('Error loading vendor defaults:', err)\n      setError('Failed to load vendor defaults')\n    } finally {\n      setIsLoading(false)\n    }\n  }, [currentAccountId])\n\n  useEffect(() => {\n    // Wait for account to finish loading\n    if (accountLoading) {\n      return\n    }\n\n    if (currentAccountId) {\n      loadDefaults()\n    } else {\n      // If no account ID after loading completes, stop loading\n      setIsLoading(false)\n      setError('No account found. Please ensure you are logged in and have an account.')\n    }\n  }, [currentAccountId, accountLoading, loadDefaults])\n\n  const handleSlotChange = (slotIndex: number, vendorId: string | null) => {\n    // kept for backwards-compatibility; prefer using inline editing + save\n    setSlots(prev => prev.map((slot, index) => {\n      if (index === slotIndex) {\n        return vendorId ? { id: vendorId, name: vendorId } : { id: null, name: null }\n      }\n      return slot\n    }))\n    setEditingSlotIndex(null)\n    setEditingValue('')\n  }\n\n  const handleSaveSlot = async (slotIndex: number) => {\n    if (!currentAccountId) {\n      setError('Account ID is required to save vendor defaults')\n      return\n    }\n\n    // Use the freeform editing value as the vendor identifier/name.\n    const vendorId = editingValue?.trim() ? editingValue.trim() : null\n\n    try {\n      setSavingSlotIndex(slotIndex)\n      setError(null)\n      setSuccessMessage(null)\n\n      await updateVendorSlot(\n        currentAccountId,\n        slotIndex + 1, // Convert 0-based to 1-based\n        vendorId,\n        user?.id\n      )\n      \n      // Update local state to reflect the saved value\n      setSlots(prev => prev.map((s, idx) => {\n        if (idx === slotIndex) {\n          return vendorId ? { id: vendorId, name: vendorId } : { id: null, name: null }\n        }\n        return s\n      }))\n      setSuccessMessage(`Slot ${slotIndex + 1} updated successfully`)\n      setEditingSlotIndex(null)\n      \n      // Clear success message after 3 seconds\n      setTimeout(() => setSuccessMessage(null), 3000)\n    } catch (err) {\n      console.error('Error saving vendor slot:', err)\n      setError(err instanceof Error ? err.message : 'Failed to save vendor slot')\n    } finally {\n      setSavingSlotIndex(null)\n    }\n  }\n\n  \n\n  if (isLoading) {\n    return (\n      <div className=\"flex justify-center items-center py-8\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"></div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div>\n        <h4 className=\"text-lg font-medium text-gray-900 mb-1\">Transaction Vendor Defaults</h4>\n        <p className=\"text-sm text-gray-500\">\n          Set your top 10 vendors/sources for transaction forms. Each slot can be individually edited and saved.\n        </p>\n      </div>\n\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\n          <div className=\"flex\">\n            <AlertCircle className=\"h-5 w-5 text-red-600\" />\n            <div className=\"ml-3\">\n              <h3 className=\"text-sm font-medium text-red-800\">Error</h3>\n              <div className=\"mt-2 text-sm text-red-700\">\n                <p>{error}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {successMessage && (\n        <div className=\"bg-green-50 border border-green-200 rounded-md p-4\">\n          <div className=\"text-sm text-green-800\">\n            {successMessage}\n          </div>\n        </div>\n      )}\n\n      <div className=\"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-md\">\n        <table className=\"min-w-full divide-y divide-gray-300\">\n          <thead className=\"bg-gray-50\">\n            <tr>\n              <th scope=\"col\" className=\"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6\">\n                Slot\n              </th>\n              <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">\n                Vendor/Source\n              </th>\n              <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">\n                Actions\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"divide-y divide-gray-200 bg-white\">\n            {slots.map((slot, index) => (\n              <tr key={index}>\n                <td className=\"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6\">\n                  {index + 1}\n                </td>\n                <td className=\"px-3 py-4 text-sm text-gray-500\">\n                  {editingSlotIndex === index ? (\n                    <div className=\"space-y-2\">\n                      <input\n                        type=\"text\"\n                        value={editingValue}\n                        onChange={(e) => setEditingValue(e.target.value)}\n                        placeholder=\"Enter vendor/source name (any text allowed)\"\n                        className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\n                        autoFocus\n                      />\n                    </div>\n                  ) : (\n                    <div className=\"flex items-center\">\n                      <span className={slot.name ? 'text-gray-900' : 'text-gray-400 italic'}>\n                        {slot.name || 'Empty'}\n                      </span>\n                    </div>\n                  )}\n                </td>\n                <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">\n                  {editingSlotIndex === index ? (\n                    <div className=\"flex items-center space-x-2\">\n                      <button\n                        type=\"button\"\n                        onClick={() => handleSaveSlot(index)}\n                        disabled={savingSlotIndex === index}\n                        className=\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n                      >\n                        <Save className=\"h-3 w-3 mr-1\" />\n                        {savingSlotIndex === index ? 'Saving...' : 'Save'}\n                      </button>\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          setEditingSlotIndex(null)\n                          setEditingValue('')\n                          loadDefaults() // Reset to original values\n                        }}\n                        className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n                      >\n                        <X className=\"h-3 w-3\" />\n                      </button>\n                    </div>\n                  ) : (\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        setEditingSlotIndex(index)\n                        setEditingValue(slot?.name || '')\n                      }}\n                      className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n                    >\n                      Edit\n                    </button>\n                  )}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  )\n}\n\n","import { useState, useEffect, useCallback } from 'react'\nimport { Save, AlertCircle, Plus, Edit2, Archive, ArchiveRestore, X, Trash2 } from 'lucide-react'\nimport { budgetCategoriesService } from '@/services/budgetCategoriesService'\nimport { getDefaultCategory, setDefaultCategory } from '@/services/accountPresetsService'\nimport { BudgetCategory } from '@/types'\nimport { useAccount } from '@/contexts/AccountContext'\nimport { Button } from './ui/Button'\nimport CategorySelect from '@/components/CategorySelect'\n\nexport default function BudgetCategoriesManager() {\n  const { currentAccountId, loading: accountLoading } = useAccount()\n  const [categories, setCategories] = useState<BudgetCategory[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [isSaving, setIsSaving] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [successMessage, setSuccessMessage] = useState<string | null>(null)\n  const [showArchived, setShowArchived] = useState(true)\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [creating, setCreating] = useState(false)\n  const [formData, setFormData] = useState({ name: '' })\n  const [selectedDefaultCategoryId, setSelectedDefaultCategoryId] = useState<string | null>(null)\n  const [isSavingDefault, setIsSavingDefault] = useState(false)\n  const [defaultSaveMessage, setDefaultSaveMessage] = useState<string | null>(null)\n\n  const loadCategories = useCallback(async () => {\n    if (!currentAccountId) return\n\n    try {\n      setIsLoading(true)\n      setError(null)\n      const loadedCategories = await budgetCategoriesService.getCategories(\n        currentAccountId,\n        showArchived\n      )\n      setCategories(loadedCategories)\n      // Load saved account-wide default category from Postgres account_presets\n      try {\n        const defaultCategory = await getDefaultCategory(currentAccountId)\n        setSelectedDefaultCategoryId(defaultCategory)\n      } catch (err) {\n        console.error('Error loading account default category:', err)\n        setSelectedDefaultCategoryId(null)\n      }\n    } catch (err) {\n      console.error('Error loading budget categories:', err)\n      setError('Failed to load budget categories')\n    } finally {\n      setIsLoading(false)\n    }\n  }, [currentAccountId, showArchived])\n\n  useEffect(() => {\n    // Wait for account to finish loading\n    if (accountLoading) {\n      return\n    }\n\n    if (currentAccountId) {\n      loadCategories()\n    } else {\n      // If no account ID after loading completes, stop loading\n      setIsLoading(false)\n      setError('No account found. Please ensure you are logged in and have an account.')\n    }\n  }, [currentAccountId, accountLoading, loadCategories])\n\n  const handleStartCreate = () => {\n    setCreating(true)\n    setEditingId(null)\n    setFormData({ name: '' })\n    setError(null)\n    setSuccessMessage(null)\n  }\n\n  const handleStartEdit = (category: BudgetCategory) => {\n    setEditingId(category.id)\n    setCreating(false)\n    setFormData({ name: category.name })\n    setError(null)\n    setSuccessMessage(null)\n  }\n\n  const handleCancel = () => {\n    setCreating(false)\n    setEditingId(null)\n    setFormData({ name: '' })\n  }\n\n  const handleFormChange = (field: 'name' | 'slug', value: string) => {\n    setFormData(prev => ({ ...prev, [field]: value }))\n    setError(null)\n    setSuccessMessage(null)\n  }\n\n  const handleSave = async () => {\n    if (!currentAccountId) {\n      setError('Account ID is required')\n      return\n    }\n\n    if (!formData.name.trim()) {\n      setError('Category name is required')\n      return\n    }\n\n    // only name is required in the simplified UI\n\n    try {\n      setIsSaving(true)\n      setError(null)\n      setSuccessMessage(null)\n\n      if (creating) {\n        // Create new category (service will generate slug internally)\n        await budgetCategoriesService.createCategory(\n          currentAccountId,\n          formData.name.trim()\n        )\n        setSuccessMessage('Category created successfully')\n      } else if (editingId) {\n        // Update existing category\n        await budgetCategoriesService.updateCategory(currentAccountId, editingId, {\n          name: formData.name.trim()\n        })\n        setSuccessMessage('Category updated successfully')\n      }\n\n      // Reload categories\n      await loadCategories()\n      handleCancel()\n\n      // Clear success message after 3 seconds\n      setTimeout(() => setSuccessMessage(null), 3000)\n    } catch (err) {\n      console.error('Error saving category:', err)\n      setError(err instanceof Error ? err.message : 'Failed to save category')\n    } finally {\n      setIsSaving(false)\n    }\n  }\n\n  const handleArchive = async (categoryId: string) => {\n    if (!currentAccountId) return\n\n    try {\n      setIsSaving(true)\n      setError(null)\n      setSuccessMessage(null)\n\n      await budgetCategoriesService.archiveCategory(currentAccountId, categoryId)\n      setSuccessMessage('Category archived successfully')\n\n      // Reload categories\n      await loadCategories()\n\n      // Clear success message after 3 seconds\n      setTimeout(() => setSuccessMessage(null), 3000)\n    } catch (err) {\n      console.error('Error archiving category:', err)\n      setError(err instanceof Error ? err.message : 'Failed to archive category')\n    } finally {\n      setIsSaving(false)\n    }\n  }\n\n  const handleUnarchive = async (categoryId: string) => {\n    if (!currentAccountId) return\n\n    try {\n      setIsSaving(true)\n      setError(null)\n      setSuccessMessage(null)\n\n      await budgetCategoriesService.unarchiveCategory(currentAccountId, categoryId)\n      setSuccessMessage('Category unarchived successfully')\n\n      // Reload categories\n      await loadCategories()\n\n      // Clear success message after 3 seconds\n      setTimeout(() => setSuccessMessage(null), 3000)\n    } catch (err) {\n      console.error('Error unarchiving category:', err)\n      setError(err instanceof Error ? err.message : 'Failed to unarchive category')\n    } finally {\n      setIsSaving(false)\n    }\n  }\n\n  const handleToggleSelect = (categoryId: string) => {\n    // removed bulk selection UI — no-op\n  }\n\n  const handleSelectAll = () => {\n    // removed bulk selection UI — no-op\n  }\n\n  const handleBulkArchive = async () => {\n    // bulk archive removed\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"flex justify-center items-center py-8\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"></div>\n      </div>\n    )\n  }\n\n  const activeCategories = categories.filter(c => !c.isArchived)\n  const archivedCategories = categories.filter(c => c.isArchived)\n\n  return (\n    <div className=\"space-y-4\">\n      <div>\n        <h4 className=\"text-lg font-medium text-gray-900 mb-1\">Budget Categories</h4>\n        <p className=\"text-sm text-gray-500\">\n          Manage budget categories for transactions. Archive transactions to hide them from the list in forms.\n        </p>\n      </div>\n\n      {/* Account-wide default category preset */}\n      <div className=\"bg-gray-50 border border-gray-200 rounded-md p-4\">\n        <h5 className=\"text-sm font-medium text-gray-900 mb-2\">Default transaction category</h5>\n        <p className=\"text-sm text-gray-500 mb-3\">Set the default category that will be used when creating transactions.</p>\n        <div className=\"flex items-start space-x-3\">\n          <div className=\"flex-1\">\n            <CategorySelect\n              id=\"accountDefaultCategory\"\n              label=\"Default Transaction Category\"\n              value={selectedDefaultCategoryId || undefined}\n              onChange={(categoryId) => setSelectedDefaultCategoryId(categoryId || null)}\n              helperText=\"This default applies account-wide (saved locally for now)\"\n              asDropdown={true}\n            />\n          </div>\n          <div className=\"pt-6\">\n            <Button\n              onClick={async () => {\n                if (!currentAccountId) return\n                setIsSavingDefault(true)\n                setDefaultSaveMessage(null)\n                try {\n                  await setDefaultCategory(currentAccountId, selectedDefaultCategoryId)\n                  setDefaultSaveMessage('Default category saved')\n                  setTimeout(() => setDefaultSaveMessage(null), 3000)\n                } catch (err) {\n                  console.error('Error saving default category to Postgres:', err)\n                  setDefaultSaveMessage('Failed to save default')\n                } finally {\n                  setIsSavingDefault(false)\n                }\n              }}\n              disabled={isSavingDefault}\n            >\n              {isSavingDefault ? 'Saving...' : 'Save'}\n            </Button>\n            {defaultSaveMessage && (\n              <div className=\"mt-2 text-sm text-green-700\">{defaultSaveMessage}</div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\n          <div className=\"flex\">\n            <AlertCircle className=\"h-5 w-5 text-red-600\" />\n            <div className=\"ml-3\">\n              <h3 className=\"text-sm font-medium text-red-800\">Error</h3>\n              <div className=\"mt-2 text-sm text-red-700\">\n                <p>{error}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {successMessage && (\n        <div className=\"bg-green-50 border border-green-200 rounded-md p-4\">\n          <div className=\"text-sm text-green-800\">\n            {successMessage}\n          </div>\n        </div>\n      )}\n\n      {/* Create Form - Only show when creating, not when editing inline */}\n      {creating && (\n        <div className=\"bg-gray-50 border border-gray-200 rounded-md p-4 space-y-3\">\n          <h5 className=\"text-sm font-medium text-gray-900\">\n            Create New Category\n          </h5>\n          <div>\n            <label htmlFor=\"category-name\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Name *\n            </label>\n            <input\n              type=\"text\"\n              id=\"category-name\"\n              value={formData.name}\n              onChange={(e) => handleFormChange('name', e.target.value)}\n              placeholder=\"e.g., Design Fee, Furnishings\"\n              className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\n              autoFocus\n            />\n          </div>\n          {/* slug removed from settings UI */}\n          <div className=\"flex items-center space-x-2\">\n            <Button\n              onClick={handleSave}\n              disabled={isSaving || !formData.name.trim()}\n              size=\"sm\"\n            >\n              <Save className=\"h-4 w-4 mr-2\" />\n              {isSaving ? 'Saving...' : creating ? 'Create' : 'Save'}\n            </Button>\n            <Button\n              onClick={handleCancel}\n              variant=\"secondary\"\n              size=\"sm\"\n              disabled={isSaving}\n            >\n              <X className=\"h-4 w-4 mr-2\" />\n              Cancel\n            </Button>\n          </div>\n        </div>\n      )}\n\n      {/* Create Button - simplified UI */}\n      {!creating && !editingId && (\n        <div className=\"flex items-center justify-between\">\n          <div />\n          <Button onClick={handleStartCreate} size=\"sm\">\n            <Plus className=\"h-4 w-4 mr-2\" />\n            Add Category\n          </Button>\n        </div>\n      )}\n\n      {/* bulk operations removed */}\n\n      {/* Categories Table */}\n      <div className=\"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-md\">\n        <table className=\"min-w-full divide-y divide-gray-300\">\n          <thead className=\"bg-gray-50\">\n            <tr>\n              <th scope=\"col\" className=\"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6\">\n                Name\n              </th>\n              {/* slug and transactions columns removed */}\n              <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">\n                Actions\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"divide-y divide-gray-200 bg-white\">\n            {activeCategories.length === 0 && archivedCategories.length === 0 ? (\n              <tr>\n                <td colSpan={3} className=\"py-8 text-center text-sm text-gray-500\">\n                  No categories found. Create your first category to get started.\n                </td>\n              </tr>\n            ) : activeCategories.map((category) => {\n                  return (\n                  <tr \n                    key={category.id} \n                    className={`${editingId === category.id ? 'bg-gray-50' : ''}`}\n                  >\n                    <td className=\"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6\">\n                      {editingId === category.id ? (\n                        <input\n                          type=\"text\"\n                          value={formData.name}\n                          onChange={(e) => handleFormChange('name', e.target.value)}\n                          className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\n                          autoFocus\n                        />\n                      ) : (\n                        category.name\n                      )}\n                    </td>\n                    <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">\n                      {editingId === category.id ? (\n                        <div className=\"flex items-center space-x-2\">\n                          <button\n                            type=\"button\"\n                            onClick={handleSave}\n                            disabled={isSaving || !formData.name.trim()}\n                            className=\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n                          >\n                            <Save className=\"h-3 w-3 mr-1\" />\n                            {isSaving ? 'Saving...' : 'Save'}\n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={handleCancel}\n                            disabled={isSaving}\n                            className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n                          >\n                            <X className=\"h-3 w-3\" />\n                          </button>\n                        </div>\n                      ) : (\n                        <div className=\"flex items-center space-x-2\">\n                          <button\n                            type=\"button\"\n                            onClick={() => handleStartEdit(category)}\n                            disabled={isSaving}\n                            className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n                          >\n                            <Edit2 className=\"h-3 w-3 mr-1\" />\n                            Edit\n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => handleArchive(category.id)}\n                            disabled={isSaving}\n                            className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n                          >\n                            <Archive className=\"h-3 w-3 mr-1\" />\n                            Archive\n                          </button>\n                        </div>\n                      )}\n                    </td>\n                  </tr>\n                )})\n            }\n            {archivedCategories.length > 0 && (\n              <>\n                <tr>\n                  <td colSpan={3} className=\"py-2 bg-gray-100\">\n                    <div className=\"flex items-center justify-between px-4\">\n                      <span className=\"text-sm font-medium text-gray-700\">Archived Categories</span>\n                      <button\n                        type=\"button\"\n                        onClick={() => setShowArchived(!showArchived)}\n                        className=\"text-sm text-primary-600 hover:text-primary-700\"\n                      >\n                        {showArchived ? 'Hide' : 'Show'} Archived\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n                {showArchived &&\n                  archivedCategories.map((category) => (\n                    <tr key={category.id} className=\"bg-gray-50\">\n                      <td className=\"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-500 sm:pl-6\">\n                        {category.name}\n                      </td>\n                      <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">\n                        <button\n                          type=\"button\"\n                          onClick={() => handleUnarchive(category.id)}\n                          disabled={isSaving}\n                          className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n                        >\n                          <ArchiveRestore className=\"h-3 w-3 mr-1\" />\n                          Unarchive\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n              </>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  )\n}\n\n","import { useState } from 'react'\nimport { User, Settings as SettingsIcon, Building2, Upload, Tag } from 'lucide-react'\nimport { useAuth } from '../contexts/AuthContext'\nimport { useAccount } from '../contexts/AccountContext'\nimport { useBusinessProfile } from '../contexts/BusinessProfileContext'\nimport { businessProfileService } from '../services/businessProfileService'\nimport { ImageUploadService } from '../services/imageService'\nimport UserManagement from '../components/auth/UserManagement'\nimport AccountManagement from '../components/auth/AccountManagement'\nimport TaxPresetsManager from '../components/TaxPresetsManager'\nimport VendorDefaultsManager from '../components/VendorDefaultsManager'\nimport BudgetCategoriesManager from '../components/BudgetCategoriesManager'\nimport { Button } from '../components/ui/Button'\n\nexport default function Settings() {\n  const { user, isOwner } = useAuth()\n  const { currentAccountId, isAdmin } = useAccount()\n  const { businessProfile, businessName, businessLogoUrl, refreshProfile } = useBusinessProfile()\n  const [businessNameInput, setBusinessNameInput] = useState(businessName)\n  const [logoFile, setLogoFile] = useState<File | null>(null)\n  const [logoPreview, setLogoPreview] = useState<string | null>(businessLogoUrl || null)\n  const [isSavingProfile, setIsSavingProfile] = useState(false)\n  const [profileError, setProfileError] = useState<string | null>(null)\n  const [profileSuccess, setProfileSuccess] = useState(false)\n  const [activeTab, setActiveTab] = useState<'general' | 'presets' | 'account' | 'users'>('general')\n\n  const handleLogoChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (file) {\n      if (!ImageUploadService.validateImageFile(file)) {\n        setProfileError('Invalid image file. Please upload a valid image (JPEG, PNG, GIF, WebP) under 10MB.')\n        return\n      }\n      setLogoFile(file)\n      const reader = new FileReader()\n      reader.onloadend = () => {\n        setLogoPreview(reader.result as string)\n      }\n      reader.readAsDataURL(file)\n      setProfileError(null)\n    }\n  }\n\n  const handleSaveProfile = async () => {\n    if (!currentAccountId || !user) return\n\n    setIsSavingProfile(true)\n    setProfileError(null)\n    setProfileSuccess(false)\n\n    try {\n      let logoUrl = businessLogoUrl || null\n\n      // Upload logo if a new file was selected\n      if (logoFile) {\n        console.log('Attempting to upload business logo...')\n        const uploadResult = await ImageUploadService.uploadBusinessLogo(currentAccountId, logoFile)\n        logoUrl = uploadResult.url\n        console.log('Business logo uploaded successfully.')\n      }\n\n      // Update business profile\n      console.log('Attempting to update business profile...')\n      await businessProfileService.updateBusinessProfile(\n        currentAccountId,\n        businessNameInput.trim(),\n        logoUrl,\n        user.id\n      )\n      console.log('Business profile updated successfully.')\n\n      // Refresh profile to get updated data\n      console.log('Attempting to refresh profile...')\n      await refreshProfile()\n      console.log('Profile refreshed successfully.')\n      setProfileSuccess(true)\n      setLogoFile(null)\n      setTimeout(() => setProfileSuccess(false), 3000)\n    } catch (error: any) {\n      console.error('Error saving business profile:', error)\n      setProfileError(error.message || 'Failed to save business profile. Please try again.')\n    } finally {\n      setIsSavingProfile(false)\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Settings</h1>\n        <p className=\"mt-2 text-sm text-gray-600\">\n          Manage your account settings and preferences.\n        </p>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"bg-white rounded-md shadow-sm\">\n        <div className=\"border-b border-gray-200\">\n          <nav className=\"flex -mb-px space-x-6 px-6\" aria-label=\"Tabs\">\n            <button\n              onClick={() => setActiveTab('general')}\n              className={`py-4 px-1 border-b-2 font-medium text-sm ${activeTab === 'general' ? 'border-primary-500 text-gray-700' : 'border-transparent text-gray-500 hover:text-gray-700'}`}\n            >\n              General\n            </button>\n            <button\n              onClick={() => setActiveTab('presets')}\n              className={`py-4 px-1 border-b-2 font-medium text-sm ${activeTab === 'presets' ? 'border-primary-500 text-gray-700' : 'border-transparent text-gray-500 hover:text-gray-700'}`}\n            >\n              Presets\n            </button>\n            {(isOwner() || isAdmin) && (\n              <button\n                onClick={() => setActiveTab('users')}\n                className={`py-4 px-1 border-b-2 font-medium text-sm ${activeTab === 'users' ? 'border-primary-500 text-gray-700' : 'border-transparent text-gray-500 hover:text-gray-700'}`}\n              >\n                Users\n              </button>\n            )}\n            {isOwner() && (\n              <button\n                onClick={() => setActiveTab('account')}\n                className={`py-4 px-1 border-b-2 font-medium text-sm ${activeTab === 'account' ? 'border-primary-500 text-gray-700' : 'border-transparent text-gray-500 hover:text-gray-700'}`}\n              >\n                Account\n              </button>\n            )}\n          </nav>\n        </div>\n      </div>\n\n      {/* Tab content */}\n      <div>\n        {activeTab === 'general' && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* Profile Section */}\n            <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n              <div className=\"p-6\">\n                <div className=\"flex items-center mb-4\">\n                  <div className=\"flex-shrink-0\">\n                    <User className=\"h-8 w-8 text-gray-400\" />\n                  </div>\n                  <div className=\"ml-4 flex-1\">\n                    <h3 className=\"text-lg font-medium text-gray-900\">\n                      Profile\n                    </h3>\n                    <p className=\"mt-1 text-sm text-gray-500\">\n                      Manage your account settings and preferences\n                    </p>\n                  </div>\n                </div>\n                <div className=\"space-y-4\">\n                  <div>\n                    <h4 className=\"text-lg font-medium text-gray-900\">Profile Information</h4>\n                    <div className=\"mt-4 space-y-3\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700\">Full Name</label>\n                        <div className=\"mt-1 p-2 bg-gray-50 rounded-md text-sm text-gray-900\">{user?.fullName}</div>\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700\">Email</label>\n                        <div className=\"mt-1 p-2 bg-gray-50 rounded-md text-sm text-gray-900\">{user?.email}</div>\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700\">Role</label>\n                        <div className=\"mt-1 p-2 bg-gray-50 rounded-md text-sm text-gray-900 capitalize\">\n                          {user?.role}\n                        </div>\n                        <p className=\"mt-1 text-xs text-gray-500\">\n                          Contact an administrator to change your role.\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Business Profile Section - Only for admins */}\n            {isAdmin && (\n              <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n                <div className=\"p-6\">\n                  <div className=\"flex items-center mb-4\">\n                    <div className=\"flex-shrink-0\">\n                      <Building2 className=\"h-8 w-8 text-gray-400\" />\n                    </div>\n                    <div className=\"ml-4 flex-1\">\n                      <h3 className=\"text-lg font-medium text-gray-900\">\n                        Business Profile\n                      </h3>\n                      <p className=\"mt-1 text-sm text-gray-500\">\n                        Manage your business name and logo for invoices and branding\n                      </p>\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-4\">\n                    {/* Business Name */}\n                    <div>\n                      <label htmlFor=\"businessName\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Business Name\n                      </label>\n                      <input\n                        type=\"text\"\n                        id=\"businessName\"\n                        value={businessNameInput}\n                        onChange={(e) => setBusinessNameInput(e.target.value)}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\n                        placeholder=\"Enter business name\"\n                      />\n                    </div>\n\n                    {/* Logo Upload */}\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Business Logo\n                      </label>\n                      <div className=\"flex items-start space-x-4\">\n                        {logoPreview && (\n                          <div className=\"flex-shrink-0\">\n                            <img\n                              src={logoPreview}\n                              alt=\"Business logo preview\"\n                              className=\"h-24 w-24 object-contain border border-gray-300 rounded\"\n                            />\n                          </div>\n                        )}\n                        <div className=\"flex-1\">\n                          <label className=\"cursor-pointer\">\n                            <input\n                              type=\"file\"\n                              accept=\"image/*\"\n                              onChange={handleLogoChange}\n                              className=\"hidden\"\n                            />\n                            <div className=\"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50\">\n                              <Upload className=\"h-4 w-4 mr-2\" />\n                              {logoFile ? 'Change Logo' : logoPreview ? 'Change Logo' : 'Upload Logo'}\n                            </div>\n                          </label>\n                          <p className=\"mt-2 text-xs text-gray-500\">\n                            Recommended: Square image, at least 200x200px. Max size: 10MB\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Error/Success Messages */}\n                    {profileError && (\n                      <div className=\"p-3 bg-red-50 border border-red-200 rounded-md\">\n                        <p className=\"text-sm text-red-800\">{profileError}</p>\n                      </div>\n                    )}\n                    {profileSuccess && (\n                      <div className=\"p-3 bg-green-50 border border-green-200 rounded-md\">\n                        <p className=\"text-sm text-green-800\">Business profile saved successfully!</p>\n                      </div>\n                    )}\n\n                    {/* Save Button */}\n                    <div className=\"pt-4\">\n                      <Button\n                        onClick={handleSaveProfile}\n                        disabled={isSavingProfile || !businessNameInput.trim()}\n                        className=\"w-full sm:w-auto\"\n                      >\n                        {isSavingProfile ? 'Saving...' : 'Save Business Profile'}\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        {activeTab === 'presets' && (\n          <div className=\"space-y-6\">\n            {isAdmin ? (\n              <>\n                <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n                  <div className=\"p-6\">\n                    {/* Section header removed — manager renders its own title/description */}\n                    <TaxPresetsManager />\n                  </div>\n                </div>\n\n                <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n                  <div className=\"p-6\">\n                    {/* Section header removed — manager renders its own title/description */}\n                    <VendorDefaultsManager />\n                  </div>\n                </div>\n\n                <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n                  <div className=\"p-6\">\n                    {/* Section header removed — manager renders its own title/description */}\n                    <BudgetCategoriesManager />\n                  </div>\n                </div>\n              </>\n            ) : (\n              <div className=\"p-6 bg-white rounded-md shadow\">\n                <p className=\"text-sm text-gray-600\">Presets are only configurable by account administrators.</p>\n              </div>\n            )}\n          </div>\n        )}\n\n        {activeTab === 'account' && (\n          <div className=\"space-y-6\">\n            {/* Account management visible only to owners */}\n            {isOwner() ? (\n              <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n                <div className=\"p-6\">\n                  <AccountManagement />\n                </div>\n              </div>\n            ) : (\n              <div className=\"p-6 bg-white rounded-md shadow\">\n                <p className=\"text-sm text-gray-600\">Account management is only available to account owners.</p>\n              </div>\n            )}\n          </div>\n        )}\n\n        {activeTab === 'users' && (\n          <div className=\"space-y-6\">\n            {/* User management visible to owners and admins */}\n            {(isOwner() || isAdmin) ? (\n              <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n                <div className=\"p-6\">\n                  <UserManagement />\n                </div>\n              </div>\n            ) : (\n              <div className=\"p-6 bg-white rounded-md shadow\">\n                <p className=\"text-sm text-gray-600\">User management is only available to account owners and administrators.</p>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":["UserManagement","className","currentUser","isOwner","authLoading","userLoading","useAuth","currentAccountId","isAdmin","accountLoading","useAccount","users","setUsers","useState","loading","setLoading","inviteEmail","setInviteEmail","inviteRole","setInviteRole","UserRole","inviting","setInviting","error","setError","pendingInvitations","setPendingInvitations","copiedToken","setCopiedToken","canManageUsers","loadPendingInvitations","useCallback","invitations","getPendingInvitations","err","loadUsers","usersData","accountService","user","useEffect","inviteUser","invitationLink","createUserInvitation","copyInvitationLink","token","link","getRoleIcon","role","jsx","Crown","Shield","Users","getRoleBadgeColor","jsxs","e","Select","Button","Mail","invitation","isCopied","Check","Copy","userRole","AccountManagement","showSuccess","showError","useToast","accounts","setAccounts","creating","setCreating","newAccountName","setNewAccountName","firstUserEmail","setFirstUserEmail","lastInvitationLink","setLastInvitationLink","lastInvitationEmail","setLastInvitationEmail","copiedLink","setCopiedLink","accountInvitations","setAccountInvitations","expandedAccounts","setExpandedAccounts","copiedTokens","setCopiedTokens","loadAccounts","loadAccountInvitations","accountsData","accountIds","acc","getAllPendingInvitationsForAccounts","createAccount","accountId","errorMessage","copyAccountInvitationLink","t","toggleAccountExpanded","prev","newSet","Building2","Plus","X","account","invitationCount","isExpanded","ChevronUp","ChevronDown","TaxPresetsManager","presets","setPresets","isLoading","setIsLoading","isSaving","setIsSaving","successMessage","setSuccessMessage","loadPresets","loadedPresets","getTaxPresets","handlePresetChange","index","field","value","preset","i","handleSave","updateTaxPresets","AlertCircle","Save","VendorDefaultsManager","slots","setSlots","savingSlotIndex","setSavingSlotIndex","editingSlotIndex","setEditingSlotIndex","editingValue","setEditingValue","loadDefaults","response","getVendorDefaults","handleSaveSlot","slotIndex","vendorId","updateVendorSlot","s","idx","slot","BudgetCategoriesManager","categories","setCategories","showArchived","setShowArchived","editingId","setEditingId","formData","setFormData","selectedDefaultCategoryId","setSelectedDefaultCategoryId","isSavingDefault","setIsSavingDefault","defaultSaveMessage","setDefaultSaveMessage","loadCategories","loadedCategories","budgetCategoriesService","defaultCategory","getDefaultCategory","handleStartCreate","handleStartEdit","category","handleCancel","handleFormChange","handleArchive","categoryId","handleUnarchive","activeCategories","c","archivedCategories","CategorySelect","setDefaultCategory","Edit2","Archive","Fragment","ArchiveRestore","Settings","businessProfile","businessName","businessLogoUrl","refreshProfile","useBusinessProfile","businessNameInput","setBusinessNameInput","logoFile","setLogoFile","logoPreview","setLogoPreview","isSavingProfile","setIsSavingProfile","profileError","setProfileError","profileSuccess","setProfileSuccess","activeTab","setActiveTab","handleLogoChange","file","_a","ImageUploadService","reader","handleSaveProfile","logoUrl","businessProfileService","User","Upload"],"mappings":"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"}