{"version":3,"file":"AddBusinessInventoryTransaction.js","sources":["../../src/pages/AddBusinessInventoryTransaction.tsx"],"sourcesContent":["import { useState, useEffect, useMemo } from 'react'\nimport { useNavigate, Link, useLocation } from 'react-router-dom'\nimport { ArrowLeft, X, Save } from 'lucide-react'\nimport { Transaction, Project, TaxPreset } from '@/types'\nimport { transactionService, projectService } from '@/services/inventoryService'\nimport { TRANSACTION_SOURCES } from '@/constants/transactionSources'\nimport { CLIENT_OWES_COMPANY, COMPANY_OWES_CLIENT } from '@/constants/company'\nimport { getTaxPresets } from '@/services/taxPresetsService'\nimport { useAccount } from '@/contexts/AccountContext'\nimport { useAuth } from '@/contexts/AuthContext'\n\nexport default function AddBusinessInventoryTransaction() {\n  const navigate = useNavigate()\n  const location = useLocation()\n  const { currentAccountId } = useAccount()\n  const { user } = useAuth()\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [projects, setProjects] = useState<Project[]>([])\n  const [formData, setFormData] = useState({\n    projectId: '',\n    transactionDate: (() => {\n      const today = new Date()\n      return `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`\n    })(),\n    source: '',\n    transactionType: 'Purchase',\n    paymentMethod: '',\n    amount: '',\n    budgetCategory: 'Furnishings',\n    notes: '',\n    status: 'pending' as const,\n    reimbursementType: '' as '' | typeof CLIENT_OWES_COMPANY | typeof COMPANY_OWES_CLIENT | null | undefined,\n    triggerEvent: 'Manual' as const,\n    receiptEmailed: false\n  })\n  const [formErrors, setFormErrors] = useState<Record<string, string>>({})\n  const [isCustomSource, setIsCustomSource] = useState(false)\n\n  // Tax form state\n  const [taxRatePreset, setTaxRatePreset] = useState<string | undefined>(undefined)\n  const [subtotal, setSubtotal] = useState<string>('')\n  const [taxPresets, setTaxPresets] = useState<TaxPreset[]>([])\n  const [selectedPresetRate, setSelectedPresetRate] = useState<number | undefined>(undefined)\n\n  // Initialize custom source state based on initial form data\n  useEffect(() => {\n    if (formData.source && !TRANSACTION_SOURCES.includes(formData.source as any)) {\n      setIsCustomSource(true)\n    } else if (formData.source && TRANSACTION_SOURCES.includes(formData.source as any)) {\n      setIsCustomSource(false)\n    }\n  }, [formData.source])\n\n  // Navigation context logic\n  const backDestination = useMemo(() => {\n    // Check if we have a returnTo parameter\n    const searchParams = new URLSearchParams(location.search)\n    const returnTo = searchParams.get('returnTo')\n    if (returnTo) return returnTo\n\n    // Default fallback\n    return '/business-inventory'\n  }, [location.search])\n\n  // Load projects on mount\n  useEffect(() => {\n    const loadProjects = async () => {\n      if (!currentAccountId) return\n      try {\n        const projectsData = await projectService.getProjects(currentAccountId)\n        setProjects(projectsData)\n      } catch (error) {\n        console.error('Error loading projects:', error)\n      }\n    }\n    loadProjects()\n  }, [currentAccountId])\n\n  // Load tax presets on mount\n  useEffect(() => {\n    const loadPresets = async () => {\n      if (!currentAccountId) return\n      try {\n        const presets = await getTaxPresets(currentAccountId)\n        setTaxPresets(presets)\n      } catch (error) {\n        console.error('Error loading tax presets:', error)\n      }\n    }\n    loadPresets()\n  }, [currentAccountId])\n\n  // Update selected preset rate when preset changes\n  useEffect(() => {\n    if (taxRatePreset && taxRatePreset !== 'Other') {\n      const preset = taxPresets.find(p => p.id === taxRatePreset)\n      setSelectedPresetRate(preset?.rate)\n    } else {\n      setSelectedPresetRate(undefined)\n    }\n    // Clear general error when tax preset changes\n    if (formErrors.general) {\n      setFormErrors(prev => ({ ...prev, general: '' }))\n    }\n  }, [taxRatePreset, taxPresets])\n\n  // Clear general error when subtotal changes\n  useEffect(() => {\n    if (formErrors.general) {\n      setFormErrors(prev => ({ ...prev, general: '' }))\n    }\n  }, [subtotal])\n\n  const handleInputChange = (field: keyof typeof formData, value: string | boolean) => {\n    setFormData(prev => ({ ...prev, [field]: value }))\n    // Clear error when user starts typing\n    if (formErrors[field]) {\n      setFormErrors(prev => ({ ...prev, [field]: '' }))\n    }\n    // Clear general error when any field changes\n    if (formErrors.general) {\n      setFormErrors(prev => ({ ...prev, general: '' }))\n    }\n  }\n\n  const validateForm = () => {\n    const errors: Record<string, string> = {}\n\n    // Project selection is optional\n\n    // Transaction date is optional\n\n    if (!formData.source.trim()) {\n      errors.source = 'Source is required'\n    }\n\n    if (!formData.budgetCategory?.trim()) {\n      errors.budgetCategory = 'Budget category is required'\n    }\n\n    if (!formData.amount.trim()) {\n      errors.amount = 'Amount is required'\n    } else if (isNaN(Number(formData.amount)) || Number(formData.amount) <= 0) {\n      errors.amount = 'Amount must be a positive number'\n    }\n\n    // Tax validation for Other\n    if (taxRatePreset === 'Other') {\n      if (!subtotal.trim() || isNaN(Number(subtotal)) || Number(subtotal) <= 0) {\n        errors.general = 'Subtotal must be provided and greater than 0 when Tax Rate Preset is Other.'\n      } else if (Number(formData.amount) < Number(subtotal)) {\n        errors.general = 'Subtotal cannot exceed the total amount.'\n      }\n    }\n\n    setFormErrors(errors)\n    return Object.keys(errors).length === 0\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!validateForm()) {\n      return\n    }\n\n    setIsSubmitting(true)\n\n    try {\n      // Determine project_id and project_name based on selection\n      const projectId = formData.projectId === 'business-inventory' ? null : formData.projectId\n      const projectName = formData.projectId === 'business-inventory' ? null : projects.find(p => p.id === formData.projectId)?.name || ''\n\n      if (!user?.id) {\n        setFormErrors({ general: 'User must be authenticated to create transactions' })\n        setIsSubmitting(false)\n        return\n      }\n\n      if (!currentAccountId) {\n        setFormErrors({ general: 'Account ID is required' })\n        setIsSubmitting(false)\n        return\n      }\n\n      const newTransaction: Omit<Transaction, 'transactionId' | 'createdAt'> = {\n        ...formData,\n        projectId: projectId,\n        projectName: projectName,\n        createdBy: user.id,\n        taxRatePreset: taxRatePreset,\n        subtotal: taxRatePreset === 'Other' ? subtotal : ''\n      }\n      await transactionService.createTransaction(currentAccountId, projectId, newTransaction, [])\n      navigate(`/business-inventory`)\n    } catch (error) {\n      console.error('Error creating transaction:', error)\n      setFormErrors({ general: 'Error creating transaction. Please try again.' })\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"space-y-4\">\n        {/* Back button row */}\n        <div className=\"flex items-center justify-between\">\n          <Link\n            to={backDestination}\n            className=\"inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-1\" />\n            Back\n          </Link>\n        </div>\n      </div>\n\n      {/* Form */}\n      <div className=\"bg-white shadow rounded-lg\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h1 className=\"text-2xl font-bold text-gray-900\">Add Transaction</h1>\n        </div>\n        <form onSubmit={handleSubmit} className=\"space-y-8 p-8\">\n          {/* General Error Display */}\n          {formErrors.general && (\n            <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\n              <div className=\"flex\">\n                <div className=\"ml-3\">\n                  <h3 className=\"text-sm font-medium text-red-800\">Error</h3>\n                  <div className=\"mt-2 text-sm text-red-700\">\n                    <p>{formErrors.general}</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Project Selection */}\n          <div>\n            <label htmlFor=\"projectId\" className=\"block text-sm font-medium text-gray-700\">\n              Project\n            </label>\n            <select\n              id=\"projectId\"\n              value={formData.projectId}\n              onChange={(e) => handleInputChange('projectId', e.target.value)}\n              className={`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${\n                formErrors.projectId ? 'border-red-300' : 'border-gray-300'\n              }`}\n            >\n              <option value=\"\">Select a project...</option>\n              <option value=\"business-inventory\">Business Inventory (No Project)</option>\n              {projects.map((project) => (\n                <option key={project.id} value={project.id}>\n                  {project.name} - {project.clientName}\n                </option>\n              ))}\n            </select>\n            {formErrors.projectId && (\n              <p className=\"mt-1 text-sm text-red-600\">{formErrors.projectId}</p>\n            )}\n          </div>\n\n          {/* Transaction Source */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n              Transaction Source *\n            </label>\n            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3 mb-3\">\n              {TRANSACTION_SOURCES.map((source) => (\n                <div key={source} className=\"flex items-center\">\n                  <input\n                    type=\"radio\"\n                id={`source_${source.toLowerCase().replace(/\\s+/g, '_')}`}\n                    name=\"source\"\n                    value={source}\n                    checked={formData.source === source}\n                    onChange={(e) => {\n                      handleInputChange('source', e.target.value)\n                      setIsCustomSource(false)\n                    }}\n                    className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                  />\n                  <label htmlFor={`source_${source.toLowerCase().replace(/\\s+/g, '_')}`} className=\"ml-2 block text-sm text-gray-900\">\n                    {source}\n                  </label>\n                </div>\n              ))}\n            </div>\n            <div className=\"flex items-center\">\n              <input\n                type=\"radio\"\n                id=\"source_custom\"\n                name=\"source\"\n                value=\"custom\"\n                checked={isCustomSource}\n                onChange={() => {\n                  setIsCustomSource(true)\n                  handleInputChange('source', '')\n                }}\n                className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n              />\n              <label htmlFor=\"source_custom\" className=\"ml-2 block text-sm text-gray-900\">\n                Other\n              </label>\n            </div>\n            {isCustomSource && (\n              <input\n                type=\"text\"\n                id=\"source_custom_input\"\n                value={formData.source}\n                onChange={(e) => handleInputChange('source', e.target.value)}\n                placeholder=\"Enter custom source...\"\n                className={`mt-3 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${\n                  formErrors.source ? 'border-red-300' : 'border-gray-300'\n                }`}\n              />\n            )}\n            {formErrors.source && (\n              <p className=\"mt-1 text-sm text-red-600\">{formErrors.source}</p>\n            )}\n          </div>\n\n          {/* Budget Category */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n              Budget Category *\n            </label>\n            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"budget_design_fee\"\n                  name=\"budgetCategory\"\n                  value=\"Design Fee\"\n                  checked={formData.budgetCategory === 'Design Fee'}\n                  onChange={(e) => handleInputChange('budgetCategory', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"budget_design_fee\" className=\"ml-2 block text-sm text-gray-900\">\n                  Design Fee\n                </label>\n              </div>\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"budget_furnishings\"\n                  name=\"budgetCategory\"\n                  value=\"Furnishings\"\n                  checked={formData.budgetCategory === 'Furnishings'}\n                  onChange={(e) => handleInputChange('budgetCategory', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"budget_furnishings\" className=\"ml-2 block text-sm text-gray-900\">\n                  Furnishings\n                </label>\n              </div>\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"budget_property_management\"\n                  name=\"budgetCategory\"\n                  value=\"Property Management\"\n                  checked={formData.budgetCategory === 'Property Management'}\n                  onChange={(e) => handleInputChange('budgetCategory', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"budget_property_management\" className=\"ml-2 block text-sm text-gray-900\">\n                  Property Management\n                </label>\n              </div>\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"budget_kitchen\"\n                  name=\"budgetCategory\"\n                  value=\"Kitchen\"\n                  checked={formData.budgetCategory === 'Kitchen'}\n                  onChange={(e) => handleInputChange('budgetCategory', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"budget_kitchen\" className=\"ml-2 block text-sm text-gray-900\">\n                  Kitchen\n                </label>\n              </div>\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"budget_install\"\n                  name=\"budgetCategory\"\n                  value=\"Install\"\n                  checked={formData.budgetCategory === 'Install'}\n                  onChange={(e) => handleInputChange('budgetCategory', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"budget_install\" className=\"ml-2 block text-sm text-gray-900\">\n                  Install\n                </label>\n              </div>\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"budget_storage_receiving\"\n                  name=\"budgetCategory\"\n                  value=\"Storage & Receiving\"\n                  checked={formData.budgetCategory === 'Storage & Receiving'}\n                  onChange={(e) => handleInputChange('budgetCategory', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"budget_storage_receiving\" className=\"ml-2 block text-sm text-gray-900\">\n                  Storage & Receiving\n                </label>\n              </div>\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"budget_fuel\"\n                  name=\"budgetCategory\"\n                  value=\"Fuel\"\n                  checked={formData.budgetCategory === 'Fuel'}\n                  onChange={(e) => handleInputChange('budgetCategory', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"budget_fuel\" className=\"ml-2 block text-sm text-gray-900\">\n                  Fuel\n                </label>\n              </div>\n            </div>\n            {formErrors.budgetCategory && (\n              <p className=\"mt-1 text-sm text-red-600\">{formErrors.budgetCategory}</p>\n            )}\n          </div>\n\n          {/* Transaction Type */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n              Transaction Type\n            </label>\n            <div className=\"flex items-center space-x-6\">\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"type_purchase\"\n                  name=\"transactionType\"\n                  value=\"Purchase\"\n                  checked={formData.transactionType === 'Purchase'}\n                  onChange={(e) => handleInputChange('transactionType', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"type_purchase\" className=\"ml-2 block text-sm text-gray-900\">\n                  Purchase\n                </label>\n              </div>\n              {/* 'Reimbursement' option removed */}\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"type_return\"\n                  name=\"transactionType\"\n                  value=\"Return\"\n                  checked={formData.transactionType === 'Return'}\n                  onChange={(e) => handleInputChange('transactionType', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"type_return\" className=\"ml-2 block text-sm text-gray-900\">\n                  Return\n                </label>\n              </div>\n            </div>\n            {formErrors.transactionType && (\n              <p className=\"mt-1 text-sm text-red-600\">{formErrors.transactionType}</p>\n            )}\n          </div>\n\n          {/* Reimbursement Type */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n              Reimbursement Type\n            </label>\n            <p className=\"mb-3 text-xs text-gray-500\">Flags transactions that require reimbursement</p>\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                id=\"reimbursement_none\"\n                  name=\"reimbursementType\"\n                  value=\"\"\n                  checked={!formData.reimbursementType}\n                  onChange={(e) => handleInputChange('reimbursementType', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"reimbursement_none\" className=\"ml-2 block text-sm text-gray-900\">\n                  None\n                </label>\n              </div>\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"reimbursement_client_owes\"\n                  name=\"reimbursementType\"\n                  value={CLIENT_OWES_COMPANY}\n                  checked={formData.reimbursementType === CLIENT_OWES_COMPANY}\n                  onChange={(e) => handleInputChange('reimbursementType', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"reimbursement_client_owes\" className=\"ml-2 block text-sm text-gray-900\">\n                  {CLIENT_OWES_COMPANY}\n                </label>\n              </div>\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"reimbursement_we_owe\"\n                  name=\"reimbursementType\"\n                  value={COMPANY_OWES_CLIENT}\n                  checked={formData.reimbursementType === COMPANY_OWES_CLIENT}\n                  onChange={(e) => handleInputChange('reimbursementType', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"reimbursement_we_owe\" className=\"ml-2 block text-sm text-gray-900\">\n                  {COMPANY_OWES_CLIENT}\n                </label>\n              </div>\n            </div>\n            {formErrors.reimbursementType && (\n              <p className=\"mt-1 text-sm text-red-600\">{formErrors.reimbursementType}</p>\n            )}\n          </div>\n\n          {/* Receipt Email Copy */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n              Receipt Email Copy\n            </label>\n            <div className=\"flex items-center space-x-6\">\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                id=\"receipt_yes\"\n                  name=\"receiptEmailed\"\n                  checked={formData.receiptEmailed === true}\n                  onChange={() => handleInputChange('receiptEmailed', true)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"receipt_yes\" className=\"ml-2 block text-sm text-gray-900\">\n                  Yes\n                </label>\n              </div>\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                id=\"receipt_no\"\n                  name=\"receiptEmailed\"\n                  checked={formData.receiptEmailed === false}\n                  onChange={() => handleInputChange('receiptEmailed', false)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"receipt_no\" className=\"ml-2 block text-sm text-gray-900\">\n                  No\n                </label>\n              </div>\n            </div>\n          </div>\n\n          {/* Amount */}\n          <div>\n            <label htmlFor=\"amount\" className=\"block text-sm font-medium text-gray-700\">\n              Amount *\n            </label>\n            <div className=\"mt-1 relative rounded-md shadow-sm\">\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                <span className=\"text-gray-500 sm:text-sm\">$</span>\n              </div>\n              <input\n                type=\"text\"\n                id=\"amount\"\n                value={formData.amount}\n                onChange={(e) => handleInputChange('amount', e.target.value)}\n                placeholder=\"0.00\"\n                className={`block w-full pl-8 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${\n                  formErrors.amount ? 'border-red-300' : 'border-gray-300'\n                }`}\n              />\n            </div>\n            {formErrors.amount && (\n              <p className=\"mt-1 text-sm text-red-600\">{formErrors.amount}</p>\n            )}\n          </div>\n\n          {/* Tax Rate Presets */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">Tax Rate Preset</label>\n            <div className=\"space-y-2\">\n              {taxPresets.map((preset) => (\n                <div key={preset.id} className=\"flex items-center\">\n                  <input\n                    type=\"radio\"\n                    id={`tax_preset_${preset.id}`}\n                    name=\"taxRatePreset\"\n                    value={preset.id}\n                    checked={taxRatePreset === preset.id}\n                    onChange={(e) => setTaxRatePreset(e.target.value)}\n                    className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                  />\n                  <label htmlFor={`tax_preset_${preset.id}`} className=\"ml-2 block text-sm text-gray-900\">\n                    {preset.name} ({preset.rate.toFixed(2)}%)\n                  </label>\n                </div>\n              ))}\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"tax_preset_other\"\n                  name=\"taxRatePreset\"\n                  value=\"Other\"\n                  checked={taxRatePreset === 'Other'}\n                  onChange={(e) => setTaxRatePreset(e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"tax_preset_other\" className=\"ml-2 block text-sm text-gray-900\">\n                  Other\n                </label>\n              </div>\n            </div>\n            {/* Show selected tax rate for presets */}\n            {taxRatePreset && taxRatePreset !== 'Other' && selectedPresetRate !== undefined && (\n              <div className=\"mt-3 p-3 bg-gray-50 rounded-md\">\n                <p className=\"text-sm text-gray-700\">\n                  <span className=\"font-medium\">Tax Rate:</span> {selectedPresetRate.toFixed(2)}%\n                </p>\n              </div>\n            )}\n          </div>\n\n          {/* Subtotal (shown only for Other) */}\n          {taxRatePreset === 'Other' && (\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Subtotal</label>\n              <div className=\"mt-1 relative rounded-md shadow-sm\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <span className=\"text-gray-500 sm:text-sm\">$</span>\n                </div>\n                <input\n                  type=\"text\"\n                  id=\"subtotal\"\n                  value={subtotal}\n                  onChange={(e) => setSubtotal(e.target.value)}\n                  placeholder=\"0.00\"\n                  className={`block w-full pl-8 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 border-gray-300`}\n                />\n              </div>\n              <p className=\"mt-1 text-sm text-gray-500\">This will be used to calculate the tax rate.</p>\n            </div>\n          )}\n\n          {/* Transaction Date */}\n          <div>\n              <label htmlFor=\"transactionDate\" className=\"block text-sm font-medium text-gray-700\">\n              Transaction Date\n            </label>\n            <input\n              type=\"date\"\n              id=\"transactionDate\"\n              value={formData.transactionDate}\n              onChange={(e) => handleInputChange('transactionDate', e.target.value)}\n              className={`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${\n                formErrors.transactionDate ? 'border-red-300' : 'border-gray-300'\n              }`}\n            />\n            {formErrors.transactionDate && (\n              <p className=\"mt-1 text-sm text-red-600\">{formErrors.transactionDate}</p>\n            )}\n          </div>\n\n          {/* Notes */}\n          <div>\n            <label htmlFor=\"notes\" className=\"block text-sm font-medium text-gray-700\">\n              Notes\n            </label>\n            <textarea\n              id=\"notes\"\n              rows={3}\n              value={formData.notes}\n              onChange={(e) => handleInputChange('notes', e.target.value)}\n              placeholder=\"Additional notes about this transaction...\"\n              className={`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${\n                formErrors.notes ? 'border-red-300' : 'border-gray-300'\n              }`}\n            />\n            {formErrors.notes && (\n              <p className=\"mt-1 text-sm text-red-600\">{formErrors.notes}</p>\n            )}\n          </div>\n\n          {/* Form Actions */}\n          <div className=\"flex justify-end space-x-3 pt-4\">\n            <Link\n              to={backDestination}\n              className=\"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n            >\n              <X className=\"h-4 w-4 mr-2\" />\n              Cancel\n            </Link>\n            <button\n              type=\"submit\"\n              disabled={isSubmitting}\n              className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              <Save className=\"h-4 w-4 mr-2\" />\n              {isSubmitting ? 'Creating...' : 'Create Transaction'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}\n"],"names":["AddBusinessInventoryTransaction","navigate","useNavigate","location","useLocation","currentAccountId","useAccount","user","useAuth","isSubmitting","setIsSubmitting","useState","projects","setProjects","formData","setFormData","today","formErrors","setFormErrors","isCustomSource","setIsCustomSource","taxRatePreset","setTaxRatePreset","subtotal","setSubtotal","taxPresets","setTaxPresets","selectedPresetRate","setSelectedPresetRate","useEffect","TRANSACTION_SOURCES","backDestination","useMemo","returnTo","projectsData","projectService","error","presets","getTaxPresets","preset","p","prev","handleInputChange","field","value","validateForm","errors","_a","handleSubmit","e","projectId","projectName","newTransaction","transactionService","jsxs","jsx","Link","ArrowLeft","project","source","CLIENT_OWES_COMPANY","COMPANY_OWES_CLIENT","Save"],"mappings":"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"}