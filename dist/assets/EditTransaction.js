import{u as ie,d as oe,U as ce,j as e,m as E,f as D,C as O}from"./index.js";import{c as le,b as me,L as de}from"./router.js";import{r as l}from"./vendor.js";import{T as B}from"./transactionSources.js";import{t as M,p as ue,b as ge,u as R}from"./inventoryService.js";import{I as Y}from"./imageService.js";import{I as xe}from"./ImageUpload.js";import{g as he}from"./taxPresetsService.js";import{d as pe,g as ye,b as K,t as z}from"./ui.js";import"./supabase.js";function Te(){const{id:d,transactionId:u}=le(),N=me(),{hasRole:Q}=ie(),{currentAccountId:m}=oe();if(!Q(ce.USER))return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"max-w-md w-full space-y-8 text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-red-100",children:e.jsx(pe,{className:"h-6 w-6 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600",children:"You don't have permission to edit transactions. Please contact an administrator if you need access."}),e.jsx(de,{to:`/project/${d}`,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700",children:"Back to Project"})]})});const[X,G]=l.useState(""),[r,$]=l.useState({transactionDate:"",source:"",transactionType:"Purchase",paymentMethod:"",amount:"",budgetCategory:"Furnishings",notes:"",status:"completed",reimbursementType:"",triggerEvent:"Manual",receiptImages:[],otherImages:[],receiptEmailed:!1}),[g,C]=l.useState(void 0),[A,U]=l.useState(""),[_,H]=l.useState([]),[L,W]=l.useState(void 0),[n,v]=l.useState({}),[f,I]=l.useState(!1),[J,Z]=l.useState(!0),[j,ee]=l.useState(!1),[T,te]=l.useState([]),[F,V]=l.useState([]),[q,S]=l.useState(!1);l.useEffect(()=>{(async()=>{if(m)try{const a=await he(m);H(a)}catch(a){console.error("Error loading tax presets:",a)}})()},[m]),l.useEffect(()=>{if(g&&g!=="Other"){const t=_.find(a=>a.id===g);W(t==null?void 0:t.rate)}else W(void 0)},[g,_]),l.useEffect(()=>{(async()=>{if(!(!d||!u||!m))try{const[a,c]=await Promise.all([M.getTransaction(m,d,u),ue.getProject(m,d)]);if(c&&G(c.name),a){const p=a.source==="Other"||a.source==="",w=p&&c?c.name:a.source,P=!!(w&&!B.includes(w));if($({transactionDate:ge(a.transactionDate)||"",source:w,transactionType:a.transactionType,paymentMethod:a.paymentMethod,amount:a.amount,budgetCategory:a.budgetCategory||"Furnishings",notes:a.notes||"",status:a.status||"completed",reimbursementType:a.reimbursementType||"",triggerEvent:a.triggerEvent||"Manual",receiptImages:[],otherImages:[],receiptEmailed:a.receiptEmailed}),a.taxRatePreset&&C(a.taxRatePreset),U(a.subtotal||""),S(P),p&&c&&d&&u&&m)try{await M.updateTransaction(m,d,u,{source:c.name})}catch(o){console.warn("Failed to auto-correct source to project name:",o)}const k=a.otherImages||[];te(Array.isArray(k)?k:[]);try{const o=await R.getItemsForTransaction(m,d,u);console.log("Loaded transaction items:",o);const x=o.map(s=>s.itemId);console.log("Transaction item IDs:",x);const y=await Promise.all(o.map(async s=>{var h,b;return console.log(`Loaded item ${s.itemId}:`,{id:s.itemId,description:(s==null?void 0:s.description)||"",hasValidFormat:s.itemId.startsWith("I-")&&s.itemId.length>10}),{id:s.itemId,description:(s==null?void 0:s.description)||"",price:((h=s==null?void 0:s.purchasePrice)==null?void 0:h.toString())||"",sku:(s==null?void 0:s.sku)||"",marketValue:((b=s==null?void 0:s.marketValue)==null?void 0:b.toString())||"",notes:(s==null?void 0:s.notes)||"",imageFiles:[],images:(s==null?void 0:s.images)||[]}}));console.log("Loaded transaction items:",o.map(s=>({id:s.itemId,description:s.description,isTempId:s.itemId.startsWith("temp-")}))),V(y)}catch(o){console.error("Error loading transaction items:",o)}}}catch(a){console.error("Error loading transaction:",a)}finally{Z(!1)}})()},[d,u,m]);const se=()=>{var a;const t={};return r.source.trim()||(t.source="Source is required"),(a=r.budgetCategory)!=null&&a.trim()||(t.budgetCategory="Budget category is required"),r.amount.trim()?(isNaN(Number(r.amount))||Number(r.amount)<=0)&&(t.amount="Amount must be a positive number"):t.amount="Amount is required",v(t),Object.keys(t).length===0},ae=async t=>{if(t.preventDefault(),!(!se()||!d||!u||!m)){I(!0);try{if(F.length>0){console.log("All items before processing:",F.map(s=>({id:s.id,description:s.description,price:s.purchasePrice,sku:s.sku,isTempId:s.id.startsWith("temp-"),idFormat:s.id.startsWith("I-")?"database":s.id.startsWith("temp-")?"temp":"unknown"})));const o=[],x=[];F.forEach(s=>{s.id.startsWith("temp-")?x.push(s):s.id.startsWith("I-")&&s.id.length>10?o.push(s):s.id.length>5&&!s.id.includes("_")?(console.warn(`Item with ambiguous ID treated as existing: ${s.id} - ${s.description}`),o.push(s)):(console.warn(`Item with unclear ID format treated as new: ${s.id} - ${s.description}`),x.push(s))}),console.log(`Separated ${o.length} existing items and ${x.length} new items`);for(const s of o)await R.updateItem(m,s.id,{description:s.description,purchasePrice:s.purchasePrice,sku:s.sku,marketValue:s.marketValue,notes:s.notes,transactionId:u});let y=[];x.length>0&&(y=await Promise.all(x.map(async s=>{const h={...s,projectId:d,transactionId:u,dateCreated:r.transactionDate,source:r.source,inventoryStatus:"available",paymentMethod:"Unknown",qrKey:`QR-${Date.now()}-${Math.random().toString(36).substr(2,4)}`,bookmark:!1,sku:s.sku||"",purchasePrice:s.purchasePrice||"",projectPrice:s.projectPrice||"",marketValue:s.marketValue||"",notes:s.notes||"",space:s.space||"",disposition:"keep"};return await R.createItem(m,h)})),console.log("Created new items:",y),V(s=>s.map(h=>{const b=x.findIndex(ne=>ne.id===h.id);return b>=0&&b<y.length?{...h,id:y[b]}:h})))}let a=[...T];if(r.otherImages&&r.otherImages.length>0)try{const o=await Y.uploadMultipleOtherImages(r.otherImages,X,u,re),x=Y.convertFilesToOtherImages(o);a=[...T,...x]}catch(o){console.error("Error uploading other images:",o),v({otherImages:"Failed to upload other images. Please try again."}),I(!1),ee(!1);return}else a=T;const{otherImages:c,receiptImages:p,transactionImages:w,...P}=r,k={...P,otherImages:a,...g?{taxRatePreset:g,subtotal:g==="Other"?A:""}:{subtotal:""}};await M.updateTransaction(m,d,u,k),N(`/project/${d}/transaction/${u}`)}catch(a){console.error("Error updating transaction:",a),v({general:a instanceof Error?a.message:"Failed to update transaction. Please try again."})}finally{I(!1)}}},i=(t,a)=>{$(c=>{const p={...c,[t]:a};return t==="status"&&a==="completed"&&c.reimbursementType?p.reimbursementType="":t==="reimbursementType"&&a&&c.status==="completed"&&(p.status="pending"),p}),n[t]&&v(c=>({...c,[t]:void 0}))},re=(t,a)=>{console.log(`Upload progress for file ${t}: ${a.percentage}%`)};return J?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Loading transaction..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{onClick:()=>N(-1),className:"inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700",children:[e.jsx(ye,{className:"h-4 w-4 mr-1"}),"Back"]})})}),e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Transaction"})}),e.jsxs("form",{onSubmit:ae,className:"space-y-6 p-6",children:[n.general&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("div",{className:"mt-2 text-sm text-red-700",children:e.jsx("p",{children:n.general})})]})})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Source/Vendor *"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mb-3",children:B.map(t=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:`source_${t.toLowerCase().replace(/\s+/g,"_")}`,name:"source",value:t,checked:r.source===t,onChange:a=>{i("source",a.target.value),S(!1)},className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:`source_${t.toLowerCase().replace(/\s+/g,"_")}`,className:"ml-2 block text-sm text-gray-900",children:t})]},t))}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"source_custom",name:"source",value:"custom",checked:q,onChange:()=>{S(!0),i("source","")},className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:"source_custom",className:"ml-2 block text-sm text-gray-900",children:"Other"})]}),q&&e.jsx("input",{type:"text",id:"source_custom_input",value:r.source,onChange:t=>i("source",t.target.value),placeholder:"Enter custom source...",className:`mt-3 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${n.source?"border-red-300":"border-gray-300"}`}),n.source&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.source})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Budget Category *"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"budget_design_fee",name:"budgetCategory",value:"Design Fee",checked:r.budgetCategory==="Design Fee",onChange:t=>i("budgetCategory",t.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:"budget_design_fee",className:"ml-2 block text-sm text-gray-900",children:"Design Fee"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"budget_furnishings",name:"budgetCategory",value:"Furnishings",checked:r.budgetCategory==="Furnishings",onChange:t=>i("budgetCategory",t.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:"budget_furnishings",className:"ml-2 block text-sm text-gray-900",children:"Furnishings"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"budget_property_management",name:"budgetCategory",value:"Property Management",checked:r.budgetCategory==="Property Management",onChange:t=>i("budgetCategory",t.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:"budget_property_management",className:"ml-2 block text-sm text-gray-900",children:"Property Management"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"budget_kitchen",name:"budgetCategory",value:"Kitchen",checked:r.budgetCategory==="Kitchen",onChange:t=>i("budgetCategory",t.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:"budget_kitchen",className:"ml-2 block text-sm text-gray-900",children:"Kitchen"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"budget_install",name:"budgetCategory",value:"Install",checked:r.budgetCategory==="Install",onChange:t=>i("budgetCategory",t.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:"budget_install",className:"ml-2 block text-sm text-gray-900",children:"Install"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"budget_storage_receiving",name:"budgetCategory",value:"Storage & Receiving",checked:r.budgetCategory==="Storage & Receiving",onChange:t=>i("budgetCategory",t.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:"budget_storage_receiving",className:"ml-2 block text-sm text-gray-900",children:"Storage & Receiving"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"budget_fuel",name:"budgetCategory",value:"Fuel",checked:r.budgetCategory==="Fuel",onChange:t=>i("budgetCategory",t.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:"budget_fuel",className:"ml-2 block text-sm text-gray-900",children:"Fuel"})]})]}),n.budgetCategory&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.budgetCategory})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Transaction Type"}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"type_purchase",name:"transactionType",value:"Purchase",checked:r.transactionType==="Purchase",onChange:t=>i("transactionType",t.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:"type_purchase",className:"ml-2 block text-sm text-gray-900",children:"Purchase"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"type_return",name:"transactionType",value:"Return",checked:r.transactionType==="Return",onChange:t=>i("transactionType",t.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:"type_return",className:"ml-2 block text-sm text-gray-900",children:"Return"})]})]}),n.transactionType&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.transactionType})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Status"}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"status_pending",name:"status",value:"pending",checked:r.status==="pending",onChange:t=>i("status",t.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:"status_pending",className:"ml-2 block text-sm text-gray-900",children:"Pending"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"status_completed",name:"status",value:"completed",checked:r.status==="completed",onChange:t=>i("status",t.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:"status_completed",className:"ml-2 block text-sm text-gray-900",children:"Completed"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"status_cancelled",name:"status",value:"canceled",checked:r.status==="canceled",onChange:t=>i("status",t.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:"status_cancelled",className:"ml-2 block text-sm text-gray-900",children:"Canceled"})]})]}),n.status&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Transaction Method"}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"method_client_card",name:"paymentMethod",value:"Client Card",checked:r.paymentMethod==="Client Card",onChange:t=>i("paymentMethod",t.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:"method_client_card",className:"ml-2 block text-sm text-gray-900",children:"Client Card"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"method_1584_card",name:"paymentMethod",value:E,checked:r.paymentMethod===E,onChange:t=>i("paymentMethod",t.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:"method_1584_card",className:"ml-2 block text-sm text-gray-900",children:E})]})]}),n.paymentMethod&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.paymentMethod})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Reimbursement Type"}),e.jsx("p",{className:"mb-3 text-xs text-gray-500",children:"Flags transactions that require reimbursement"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"reimbursement_none",name:"reimbursementType",value:"",checked:!r.reimbursementType,onChange:t=>i("reimbursementType",t.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:"reimbursement_none",className:"ml-2 block text-sm text-gray-900",children:"None"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"reimbursement_client_owes",name:"reimbursementType",value:D,checked:r.reimbursementType===D,onChange:t=>i("reimbursementType",t.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:"reimbursement_client_owes",className:"ml-2 block text-sm text-gray-900",children:D})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"reimbursement_we_owe",name:"reimbursementType",value:O,checked:r.reimbursementType===O,onChange:t=>i("reimbursementType",t.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:"reimbursement_we_owe",className:"ml-2 block text-sm text-gray-900",children:O})]})]}),n.reimbursementType&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.reimbursementType})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Receipt Email Copy"}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"receipt_yes",name:"receiptEmailed",checked:r.receiptEmailed===!0,onChange:()=>i("receiptEmailed",!0),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:"receipt_yes",className:"ml-2 block text-sm text-gray-900",children:"Yes"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"receipt_no",name:"receiptEmailed",checked:r.receiptEmailed===!1,onChange:()=>i("receiptEmailed",!1),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:"receipt_no",className:"ml-2 block text-sm text-gray-900",children:"No"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700",children:"Amount *"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500 sm:text-sm",children:"$"})}),e.jsx("input",{type:"text",id:"amount",value:r.amount,onChange:t=>i("amount",t.target.value),placeholder:"0.00",className:`block w-full pl-8 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${n.amount?"border-red-300":"border-gray-300"}`})]}),n.amount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.amount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Tax Rate Preset"}),e.jsxs("div",{className:"space-y-2",children:[_.map(t=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:`tax_preset_${t.id}`,name:"tax_rate_preset",value:t.id,checked:g===t.id,onChange:a=>C(a.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsxs("label",{htmlFor:`tax_preset_${t.id}`,className:"ml-2 block text-sm text-gray-900",children:[t.name," (",t.rate.toFixed(2),"%)"]})]},t.id)),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"tax_preset_other",name:"tax_rate_preset",value:"Other",checked:g==="Other",onChange:t=>C(t.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsx("label",{htmlFor:"tax_preset_other",className:"ml-2 block text-sm text-gray-900",children:"Other"})]})]}),g&&g!=="Other"&&L!==void 0&&e.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-md",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Tax Rate:"})," ",L.toFixed(2),"%"]})})]}),g==="Other"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subtotal"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500 sm:text-sm",children:"$"})}),e.jsx("input",{type:"text",id:"subtotal",value:A,onChange:t=>U(t.target.value),placeholder:"0.00",className:"block w-full pl-8 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 border-gray-300"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"This will be used to calculate the tax rate."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"transactionDate",className:"block text-sm font-medium text-gray-700",children:"Transaction Date"}),e.jsx("input",{type:"date",id:"transactionDate",value:r.transactionDate,onChange:t=>{i("transactionDate",t.target.value)},className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${n.transactionDate?"border-red-300":"border-gray-300"}`}),n.transactionDate&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.transactionDate})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700",children:"Notes"}),e.jsx("textarea",{id:"notes",rows:3,value:r.notes,onChange:t=>i("notes",t.target.value),placeholder:"Additional notes about this transaction...",className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${n.notes?"border-red-300":"border-gray-300"}`}),n.notes&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.notes})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Other Images"}),e.jsx(xe,{onImagesChange:t=>i("otherImages",t),maxImages:5,maxFileSize:10,disabled:f||j,className:"mb-2"}),n.otherImages&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.otherImages})]}),e.jsxs("div",{className:"hidden sm:flex justify-end sm:space-x-3 pt-4",children:[e.jsxs("button",{onClick:()=>N(-1),className:"inline-flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs("button",{type:"submit",disabled:f||j,className:"inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),f?"Updating...":j?"Uploading Images...":"Update"]})]})]})]}),e.jsx("div",{className:"sm:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 z-50",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>N(-1),className:"flex-1 inline-flex justify-center items-center px-4 py-3 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs("button",{type:"submit",disabled:f||j,onClick:t=>{var c;const a=(c=t.currentTarget.closest(".space-y-6"))==null?void 0:c.querySelector("form");a&&a.requestSubmit()},className:"flex-1 inline-flex justify-center items-center px-4 py-3 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),f?"Updating...":j?"Uploading Images...":"Update"]})]})}),e.jsx("div",{className:"sm:hidden h-20"})]})}export{Te as default};
//# sourceMappingURL=EditTransaction.js.map
