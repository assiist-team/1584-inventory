import{b as d,c as u}from"./taxPresetsService.js";const i=["Homegoods","Amazon","Wayfair","Target","Ross","Arhaus","Pottery Barn","Crate & Barrel","West Elm","Living Spaces","Home Depot","Lowes","Movers","Gas","Inventory"];async function c(o){var a;try{const t=await d(o),e=(a=t==null?void 0:t.presets)==null?void 0:a.vendor_defaults;if(Array.isArray(e)){const r=e.slice();for(;r.length<10;)r.push(null);return{slots:r.slice(0,10).map(l=>typeof l=="string"?{id:l,name:l}:{id:null,name:null})}}const n=i.slice(0,10).map(r=>r);for(;n.length<10;)n.push(null);try{await u(o,{presets:{vendor_defaults:n}})}catch(r){console.warn("Failed to initialize vendor_defaults in account_presets:",r)}return{slots:n.map(r=>r?{id:r,name:r}:{id:null,name:null})}}catch(t){console.error("Error fetching vendor defaults from Postgres:",t);const e=i.slice(0,10).map(s=>s);for(;e.length<10;)e.push(null);return{slots:e.map(s=>s?{id:s,name:s}:{id:null,name:null})}}}async function w(o,a,t,e){if(a<1||a>10)throw new Error("Slot index must be between 1 and 10");try{const s=(await c(o)).slots.map(r=>r.id?r.id:null);s[a-1]=t||null,await f(o,s,e)}catch(n){throw console.error("Error updating vendor slot:",n),n}}async function f(o,a,t){try{if(!Array.isArray(a))throw new Error("Slots must be an array");if(a.length!==10)throw new Error("Must have exactly 10 slots");const e=a.map(n=>{if(typeof n=="string")return n;if(n===null)return null;throw new Error("Slots must be plain strings or null (legacy object formats are not supported)")});await u(o,{presets:{vendor_defaults:e}}),console.log("Vendor defaults updated successfully (account_presets)")}catch(e){throw console.error("Error updating vendor defaults:",e),e}}async function y(o){return(await c(o)).slots.filter(t=>t.id&&t.name).map(t=>t.name)}export{c as a,y as g,w as u};
//# sourceMappingURL=vendorDefaultsService.js.map
