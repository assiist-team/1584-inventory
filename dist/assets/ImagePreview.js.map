{"version":3,"file":"ImagePreview.js","sources":["../../src/components/ui/ImagePreview.tsx"],"sourcesContent":["import React, { useState } from 'react'\nimport { Camera, X, Plus } from 'lucide-react'\nimport { ItemImage } from '@/types'\nimport ImageGallery from './ImageGallery'\n\ninterface ImagePreviewProps {\n  images: ItemImage[]\n  onAddImage?: () => void\n  onRemoveImage?: (imageUrl: string) => void\n  onSetPrimary?: (imageUrl: string) => void\n  maxImages?: number\n  showControls?: boolean\n  size?: 'sm' | 'md' | 'lg'\n  className?: string\n}\n\nexport default function ImagePreview({\n  images,\n  onAddImage,\n  onRemoveImage,\n  onSetPrimary,\n  maxImages = 5,\n  showControls = true,\n  size = 'md',\n  className = ''\n}: ImagePreviewProps) {\n  const [showGallery, setShowGallery] = useState(false)\n  const [galleryInitialIndex, setGalleryInitialIndex] = useState(0)\n\n  const sizeClasses = {\n    sm: 'w-20 h-20 sm:w-16 sm:h-16',\n    md: 'w-24 h-24 sm:w-20 sm:h-20',\n    lg: 'w-28 h-28 sm:w-24 sm:h-24'\n  }\n\n  const handleImageClick = (index: number) => {\n    setGalleryInitialIndex(index)\n    setShowGallery(true)\n  }\n\n  const handleGalleryClose = () => {\n    setShowGallery(false)\n  }\n\n  const handleRemoveImage = (e: React.MouseEvent, imageUrl: string) => {\n    e.stopPropagation()\n    onRemoveImage?.(imageUrl)\n  }\n\n  const handleSetPrimary = (e: React.MouseEvent, imageUrl: string) => {\n    e.stopPropagation()\n    onSetPrimary?.(imageUrl)\n  }\n\n  if (images.length === 0 && !onAddImage) {\n    return null\n  }\n\n  return (\n    <>\n      <div className={`space-y-3 ${className}`}>\n        {/* Images grid */}\n        {images.length > 0 && (\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3 sm:gap-4 md:gap-6\" style={{width: 'fit-content'}}>\n            {images.map((image, index) => (\n              <div\n                key={image.url}\n                className={`${sizeClasses[size]} relative group cursor-pointer rounded-lg overflow-hidden border-2 ${\n                  image.isPrimary ? 'border-primary-500 ring-2 ring-primary-200' : 'border-gray-200'\n                }`}\n                onClick={() => handleImageClick(index)}\n              >\n                <img\n                  src={image.url}\n                  alt={image.alt || image.fileName}\n                  className=\"w-full h-full object-cover transition-transform group-hover:scale-105\"\n                />\n\n                {/* Primary indicator */}\n                {image.isPrimary && (\n                  <div className=\"absolute top-1 left-1 bg-primary-500 text-white text-xs px-1 py-0.5 rounded\">\n                    Primary\n                  </div>\n                )}\n\n                {/* Controls overlay */}\n                {showControls && (\n                  <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center\">\n                    <div className=\"opacity-0 group-hover:opacity-100 flex space-x-1\">\n                      {!image.isPrimary && onSetPrimary && (\n                        <button\n                          onClick={(e) => handleSetPrimary(e, image.url)}\n                          className=\"p-1 bg-white bg-opacity-90 rounded-full text-gray-700 hover:bg-opacity-100 transition-colors\"\n                          title=\"Set as primary\"\n                        >\n                          <Camera className=\"h-3 w-3\" />\n                        </button>\n                      )}\n                      {onRemoveImage && (\n                        <button\n                          onClick={(e) => handleRemoveImage(e, image.url)}\n                          className=\"p-1 bg-red-500 bg-opacity-90 rounded-full text-white hover:bg-opacity-100 transition-colors\"\n                          title=\"Remove image\"\n                        >\n                          <X className=\"h-3 w-3\" />\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                )}\n\n                {/* Image index for non-primary images */}\n                {!image.isPrimary && images.length > 1 && (\n                  <div className=\"absolute bottom-1 right-1 bg-black bg-opacity-70 text-white text-xs px-1 py-0.5 rounded\">\n                    {index + 1}\n                  </div>\n                )}\n              </div>\n            ))}\n\n            {/* Add image button */}\n            {onAddImage && images.length < maxImages && (\n              <button\n                onClick={onAddImage}\n                className={`${sizeClasses[size]} border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center text-gray-400 hover:text-gray-600 hover:border-gray-400 transition-colors`}\n                title=\"Add image\"\n              >\n                <Plus className=\"h-5 w-5\" />\n              </button>\n            )}\n          </div>\n        )}\n\n        {/* Add image button when no images exist */}\n        {!images.length && onAddImage && (\n          <button\n            onClick={onAddImage}\n            className={`${sizeClasses[size]} border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center text-gray-400 hover:text-gray-600 hover:border-gray-400 transition-colors w-full`}\n            title=\"Add image\"\n          >\n            <Plus className=\"h-5 w-5\" />\n          </button>\n        )}\n\n        {/* Image count */}\n        {images.length > 0 && (\n          <p className=\"text-xs text-gray-500\">\n            {images.length} image{images.length !== 1 ? 's' : ''}\n            {maxImages && ` (max ${maxImages})`}\n          </p>\n        )}\n      </div>\n\n      {/* Image gallery modal */}\n      {showGallery && (\n        <ImageGallery\n          images={images}\n          initialIndex={galleryInitialIndex}\n          onClose={handleGalleryClose}\n        />\n      )}\n    </>\n  )\n}\n"],"names":["ImagePreview","images","onAddImage","onRemoveImage","onSetPrimary","maxImages","showControls","size","className","showGallery","setShowGallery","useState","galleryInitialIndex","setGalleryInitialIndex","sizeClasses","handleImageClick","index","handleGalleryClose","handleRemoveImage","e","imageUrl","handleSetPrimary","jsxs","Fragment","image","jsx","Camera","X","Plus","ImageGallery"],"mappings":"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"}