import{j as e,d as W}from"./index.js";import{r as F}from"./vendor.js";import{b as Y,D as B,s as Z,j as D}from"./ui.js";import{u as ee}from"./CategorySelect.js";function oe({onSubmit:w,onCancel:N,isLoading:h=!1,initialData:r}){var P,E,I,$,k,A,V,U,S,z,C,j,X,T;const R=!!(r!=null&&r.name),q=(()=>{if(r!=null&&r.budgetCategories)return(!r.budgetCategories.designFee||r.budgetCategories.designFee===0)&&(r==null?void 0:r.designFee)!==void 0&&r.designFee>0?{...r.budgetCategories,designFee:r.designFee}:r.budgetCategories;if((r==null?void 0:r.designFee)!==void 0)return{designFee:r.designFee,furnishings:0,propertyManagement:0,kitchen:0,install:0,storageReceiving:0,fuel:0}})(),[t,L]=F.useState({name:(r==null?void 0:r.name)||"",description:(r==null?void 0:r.description)||"",clientName:(r==null?void 0:r.clientName)||"",budget:(r==null?void 0:r.budget)||void 0,designFee:(r==null?void 0:r.designFee)||void 0,budgetCategories:q}),[v,K]=F.useState({}),O=()=>t.budgetCategories?Object.values(t.budgetCategories).reduce((n,i)=>n+(i||0),0):0,x=(n,i)=>{if(n==="budgetCategories"&&typeof i=="object")L(c=>({...c,[n]:i}));else{const c=typeof i=="number"&&i===0?void 0:i;L(l=>({...l,[n]:c}))}v[n]&&K(c=>({...c,[n]:""}))},_=()=>{const n={};return t.name.trim()||(n.name="Project name is required"),t.clientName.trim()||(n.clientName="Client name is required"),K(n),Object.keys(n).length===0},G=async n=>{if(n.preventDefault(),console.debug("ProjectForm: submit clicked",{formData:t}),!_()){console.debug("ProjectForm: validation failed",{formData:t});return}try{const c=(l=>{if(l!=null){if(typeof l=="object"){const g=Object.fromEntries(Object.entries(l).filter(([m,u])=>u!==void 0));return Object.keys(g).length>0?g:void 0}return l}})(t);console.debug("ProjectForm: calling onSubmit with",{cleanedData:c}),await w(c),console.debug("ProjectForm: onSubmit resolved")}catch(i){console.error("Error submitting form:",i)}};return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto z-50",children:e.jsx("div",{className:"flex min-h-screen items-start sm:items-center justify-center p-4",children:e.jsx("div",{className:"relative w-full max-w-md mx-auto p-5 border shadow-lg rounded-md bg-white max-h-[calc(100vh-6rem)] overflow-y-auto",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:R?"Edit":"Create"}),e.jsx("button",{onClick:N,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Y,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Project Name *"}),e.jsx("input",{type:"text",id:"name",value:t.name,onChange:n=>x("name",n.target.value),className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm ${v.name?"border-red-300":""}`,placeholder:"Enter project name"}),v.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"clientName",className:"block text-sm font-medium text-gray-700",children:"Client Name *"}),e.jsx("input",{type:"text",id:"clientName",value:t.clientName,onChange:n=>x("clientName",n.target.value),className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm ${v.clientName?"border-red-300":""}`,placeholder:"Enter client name"}),v.clientName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.clientName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{id:"description",value:t.description,onChange:n=>x("description",n.target.value),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:"Enter project description"})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Budget Categories"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Set specific budgets for different project categories. These will be used to track spending by category."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"totalBudget",className:"block text-sm font-medium text-gray-700",children:"Total Budget"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(B,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"text",id:"totalBudget",value:O().toFixed(2),readOnly:!0,className:"block w-full pl-10 rounded-md border-gray-300 shadow-sm bg-gray-50 text-gray-700 sm:text-sm cursor-not-allowed"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Automatically calculated from budget categories"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"budgetCategories.designFee",className:"block text-sm font-medium text-gray-700",children:"Design Fee Budget"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(B,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"number",id:"budgetCategories.designFee",value:((E=(P=t.budgetCategories)==null?void 0:P.designFee)==null?void 0:E.toString())||"",onChange:n=>{var l,g,m,u,s,a;const i=parseFloat(n.target.value)||0,c={designFee:i>0?i:0,furnishings:((l=t.budgetCategories)==null?void 0:l.furnishings)||0,propertyManagement:((g=t.budgetCategories)==null?void 0:g.propertyManagement)||0,kitchen:((m=t.budgetCategories)==null?void 0:m.kitchen)||0,install:((u=t.budgetCategories)==null?void 0:u.install)||0,storageReceiving:((s=t.budgetCategories)==null?void 0:s.storageReceiving)||0,fuel:((a=t.budgetCategories)==null?void 0:a.fuel)||0};x("budgetCategories",c)},className:"block w-full pl-10 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:"0.00",min:"0",step:"0.01"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"budgetCategories.furnishings",className:"block text-sm font-medium text-gray-700",children:"Furnishings Budget"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(B,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"number",id:"budgetCategories.furnishings",value:(($=(I=t.budgetCategories)==null?void 0:I.furnishings)==null?void 0:$.toString())||"",onChange:n=>{var l,g,m,u,s,a;const i=parseFloat(n.target.value)||0,c={designFee:((l=t.budgetCategories)==null?void 0:l.designFee)||0,furnishings:i>0?i:0,propertyManagement:((g=t.budgetCategories)==null?void 0:g.propertyManagement)||0,kitchen:((m=t.budgetCategories)==null?void 0:m.kitchen)||0,install:((u=t.budgetCategories)==null?void 0:u.install)||0,storageReceiving:((s=t.budgetCategories)==null?void 0:s.storageReceiving)||0,fuel:((a=t.budgetCategories)==null?void 0:a.fuel)||0};x("budgetCategories",c)},className:"block w-full pl-10 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:"0.00",min:"0",step:"0.01"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"budgetCategories.propertyManagement",className:"block text-sm font-medium text-gray-700",children:"Property Management Budget"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(B,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"number",id:"budgetCategories.propertyManagement",value:((A=(k=t.budgetCategories)==null?void 0:k.propertyManagement)==null?void 0:A.toString())||"",onChange:n=>{var l,g,m,u,s,a;const i=parseFloat(n.target.value)||0,c={designFee:((l=t.budgetCategories)==null?void 0:l.designFee)||0,furnishings:((g=t.budgetCategories)==null?void 0:g.furnishings)||0,propertyManagement:i>0?i:0,kitchen:((m=t.budgetCategories)==null?void 0:m.kitchen)||0,install:((u=t.budgetCategories)==null?void 0:u.install)||0,storageReceiving:((s=t.budgetCategories)==null?void 0:s.storageReceiving)||0,fuel:((a=t.budgetCategories)==null?void 0:a.fuel)||0};x("budgetCategories",c)},className:"block w-full pl-10 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:"0.00",min:"0",step:"0.01"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"budgetCategories.kitchen",className:"block text-sm font-medium text-gray-700",children:"Kitchen Budget"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(B,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"number",id:"budgetCategories.kitchen",value:((U=(V=t.budgetCategories)==null?void 0:V.kitchen)==null?void 0:U.toString())||"",onChange:n=>{var l,g,m,u,s,a;const i=parseFloat(n.target.value)||0,c={designFee:((l=t.budgetCategories)==null?void 0:l.designFee)||0,furnishings:((g=t.budgetCategories)==null?void 0:g.furnishings)||0,propertyManagement:((m=t.budgetCategories)==null?void 0:m.propertyManagement)||0,kitchen:i>0?i:0,install:((u=t.budgetCategories)==null?void 0:u.install)||0,storageReceiving:((s=t.budgetCategories)==null?void 0:s.storageReceiving)||0,fuel:((a=t.budgetCategories)==null?void 0:a.fuel)||0};x("budgetCategories",c)},className:"block w-full pl-10 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:"0.00",min:"0",step:"0.01"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"budgetCategories.install",className:"block text-sm font-medium text-gray-700",children:"Install Budget"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(B,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"number",id:"budgetCategories.install",value:((z=(S=t.budgetCategories)==null?void 0:S.install)==null?void 0:z.toString())||"",onChange:n=>{var l,g,m,u,s,a;const i=parseFloat(n.target.value)||0,c={designFee:((l=t.budgetCategories)==null?void 0:l.designFee)||0,furnishings:((g=t.budgetCategories)==null?void 0:g.furnishings)||0,propertyManagement:((m=t.budgetCategories)==null?void 0:m.propertyManagement)||0,kitchen:((u=t.budgetCategories)==null?void 0:u.kitchen)||0,install:i>0?i:0,storageReceiving:((s=t.budgetCategories)==null?void 0:s.storageReceiving)||0,fuel:((a=t.budgetCategories)==null?void 0:a.fuel)||0};x("budgetCategories",c)},className:"block w-full pl-10 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:"0.00",min:"0",step:"0.01"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"budgetCategories.storageReceiving",className:"block text-sm font-medium text-gray-700",children:"Storage & Receiving Budget"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(B,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"number",id:"budgetCategories.storageReceiving",value:((j=(C=t.budgetCategories)==null?void 0:C.storageReceiving)==null?void 0:j.toString())||"",onChange:n=>{var l,g,m,u,s,a;const i=parseFloat(n.target.value)||0,c={designFee:((l=t.budgetCategories)==null?void 0:l.designFee)||0,furnishings:((g=t.budgetCategories)==null?void 0:g.furnishings)||0,propertyManagement:((m=t.budgetCategories)==null?void 0:m.propertyManagement)||0,kitchen:((u=t.budgetCategories)==null?void 0:u.kitchen)||0,install:((s=t.budgetCategories)==null?void 0:s.install)||0,storageReceiving:i>0?i:0,fuel:((a=t.budgetCategories)==null?void 0:a.fuel)||0};x("budgetCategories",c)},className:"block w-full pl-10 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:"0.00",min:"0",step:"0.01"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"budgetCategories.fuel",className:"block text-sm font-medium text-gray-700",children:"Fuel Budget"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(B,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"number",id:"budgetCategories.fuel",value:((T=(X=t.budgetCategories)==null?void 0:X.fuel)==null?void 0:T.toString())||"",onChange:n=>{var l,g,m,u,s,a;const i=parseFloat(n.target.value)||0,c={designFee:((l=t.budgetCategories)==null?void 0:l.designFee)||0,furnishings:((g=t.budgetCategories)==null?void 0:g.furnishings)||0,propertyManagement:((m=t.budgetCategories)==null?void 0:m.propertyManagement)||0,kitchen:((u=t.budgetCategories)==null?void 0:u.kitchen)||0,install:((s=t.budgetCategories)==null?void 0:s.install)||0,storageReceiving:((a=t.budgetCategories)==null?void 0:a.storageReceiving)||0,fuel:i>0?i:0};x("budgetCategories",c)},className:"block w-full pl-10 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:"0.00",min:"0",step:"0.01"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",disabled:h,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:h?R?"Updating...":"Creating...":R?"Update Project":"Create Project"})]})]})]})})})})}function ie({budget:w,designFee:N,budgetCategories:h,transactions:r,previewMode:R=!1}){const{currentAccountId:q}=W(),{categories:t,isLoading:L}=ee(!1),[v,K]=F.useState(!1),O=new Map;t.forEach(s=>{O.set(s.id,s.name)});const x=s=>s.toLowerCase().includes("design")&&s.toLowerCase().includes("fee"),_=()=>{let s=0;const a=r.filter(d=>{if((d.status||"").toLowerCase()==="canceled")return!1;if(!d.categoryId)return!0;const o=O.get(d.categoryId);return o&&!x(o)});for(const d of a){const o=parseFloat(d.amount||"0"),b=d.transactionType==="Return"?-1:1,M=o*b;s+=M}return s},G=()=>{const s=[],a=new Map;if(r.forEach(d=>{(d.status||"").toLowerCase()!=="canceled"&&d.categoryId&&(a.has(d.categoryId)||a.set(d.categoryId,[]),a.get(d.categoryId).push(d))}),a.forEach((d,o)=>{const b=O.get(o);if(!b)return;const M=x(b);let p=0;for(const y of d){const H=parseFloat(y.amount||"0"),J=y.transactionType==="Return"?-1:1,Q=H*J;p+=Q}let f=0;if(M)f=N||0;else if(h){const y=b.toLowerCase();y.includes("furnish")?f=h.furnishings||0:y.includes("install")?f=h.install||0:y.includes("fuel")?f=h.fuel||0:y.includes("storage")||y.includes("receiving")?f=h.storageReceiving||0:y.includes("kitchen")?f=h.kitchen||0:(y.includes("property")||y.includes("management"))&&(f=h.propertyManagement||0)}if(f>0||p!==0){const y=f>0?p/f*100:0;s.push({categoryId:o,categoryName:b,budget:f,spent:Math.round(p),percentage:Math.min(y,100),isDesignFee:M})}}),h){const d=[{key:"furnishings",matcher:o=>o.includes("furnish"),displayName:"Furnishings"},{key:"install",matcher:o=>o.includes("install"),displayName:"Install"},{key:"fuel",matcher:o=>o.includes("fuel"),displayName:"Fuel"},{key:"storageReceiving",matcher:o=>o.includes("storage")||o.includes("receiving"),displayName:"Storage & Receiving"},{key:"kitchen",matcher:o=>o.includes("kitchen"),displayName:"Kitchen"},{key:"propertyManagement",matcher:o=>o.includes("property")||o.includes("management"),displayName:"Property Management"}];for(const o of d){const b=h[o.key]||0;if(b>0&&!s.find(p=>o.matcher(p.categoryName.toLowerCase()))){const p=t.find(f=>o.matcher(f.name.toLowerCase()));p?s.push({categoryId:p.id,categoryName:p.name,budget:b,spent:0,percentage:0,isDesignFee:!1}):s.push({categoryId:`legacy-${o.key}`,categoryName:o.displayName,budget:b,spent:0,percentage:0,isDesignFee:!1})}}}return s.sort((d,o)=>d.isDesignFee&&!o.isDesignFee?1:!d.isDesignFee&&o.isDesignFee?-1:d.categoryName.localeCompare(o.categoryName)),s},[P,E]=F.useState(0),[I,$]=F.useState(0),[k,A]=F.useState([]),[V,U]=F.useState(!0),[S,z]=F.useState(w||0);F.useEffect(()=>{if(L||!q)return;(()=>{U(!0);try{const a=_(),d=G(),o=d.filter(p=>!p.isDesignFee).reduce((p,f)=>p+f.budget,0),b=Math.round(a),M=o>0?b/o*100:0;E(b),$(M),A(d),z(o)}catch(a){console.error("Error calculating budget data:",a),E(0),$(0),A([])}finally{U(!1)}})()},[w,N,h,r,t,L,q]);let C=k,j=null;if(R){const s=k.find(a=>a.categoryName.toLowerCase().includes("furnish"));s?C=[s]:S>0&&(j={categoryId:"overall",categoryName:"Overall Budget",budget:S,spent:P,percentage:I,isDesignFee:!1})}else{const s=k.find(d=>d.categoryName.toLowerCase().includes("furnish"));v?C=k:C=s?[s]:[],j=S>0&&v?{categoryId:"overall",categoryName:"Overall Budget",budget:S,spent:P,percentage:I,isDesignFee:!1}:null}const X=(()=>{const s=[...C||[]];return j&&s.push(j),s})(),T=s=>s>=100||s>=75?"bg-red-500":s>=50?"bg-yellow-500":"bg-green-500",n=s=>s>=100||s>=75?"text-red-600":s>=50?"text-yellow-600":"text-green-600",i=s=>s>=100||s>=75?"bg-green-500":s>=50?"bg-yellow-500":"bg-red-500",c=s=>s>=100||s>=75?"text-green-600":s>=50?"text-yellow-600":"text-red-600",l=s=>s.toLowerCase().includes("design")&&s.toLowerCase().includes("fee")||s==="Overall Budget"?s:`${s} Budget`,g=S>0,m=N!=null&&N>0,u=h&&Object.values(h).some(s=>s>0);return V?e.jsx("div",{children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-2 bg-gray-200 rounded mb-4"})]})}):!g&&!m&&!u?null:R?e.jsxs("div",{children:[(C.length>0||j)&&e.jsx("div",{children:e.jsx("div",{className:"space-y-4",children:[...C,...j?[j]:[]].map(s=>e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"flex items-center justify-between mb-1",children:e.jsx("span",{className:"text-base font-medium text-gray-900",children:l(s.categoryName)})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["$",Math.round(s.spent).toLocaleString("en-US")," ",s.isDesignFee?"received":"spent"]}),e.jsxs("span",{className:`text-sm ${s.isDesignFee?c(s.percentage):n(s.percentage)}`,children:[e.jsxs("span",{className:"font-bold",children:["$",Math.round((s.budget||0)-s.spent).toLocaleString("en-US")]})," remaining"]})]})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-1",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${s.isDesignFee?i(s.percentage):T(s.percentage)}`,style:{width:`${Math.min(s.percentage,100)}%`}})})})]},s.categoryId))})}),!w&&!N&&(!h||Object.values(h).every(s=>s===0))&&e.jsx("div",{className:"text-center py-4 text-gray-500",children:e.jsx("p",{children:"No budgets configured for this project."})})]}):e.jsxs("div",{children:[(C.length>0||j)&&e.jsxs("div",{children:[e.jsx("div",{className:"space-y-4",children:X.map(s=>e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"flex items-center justify-between mb-1",children:e.jsx("span",{className:"text-base font-medium text-gray-900",children:l(s.categoryName)})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["$",Math.round(s.spent).toLocaleString("en-US")," ",s.isDesignFee?"received":"spent"]}),e.jsxs("span",{className:`text-sm ${s.isDesignFee?c(s.percentage):n(s.percentage)}`,children:[e.jsxs("span",{className:"font-bold",children:["$",Math.round((s.budget||0)-s.spent).toLocaleString("en-US")]})," remaining"]})]})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-1",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${s.isDesignFee?i(s.percentage):T(s.percentage)}`,style:{width:`${Math.min(s.percentage,100)}%`}})})})]},s.categoryId))}),(k.some(s=>!s.categoryName.toLowerCase().includes("furnish")&&!s.isDesignFee)||w!=null&&w>0)&&e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>K(!v),className:"inline-flex items-center text-sm font-medium text-primary-600 hover:text-primary-800 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",children:v?e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-4 w-4 mr-1"}),"Show Less"]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"h-4 w-4 mr-1"}),"Show All Budget Categories"]})})})]}),!w&&!N&&(!h||Object.values(h).every(s=>s===0))&&e.jsx("div",{className:"text-center py-4 text-gray-500",children:e.jsx("p",{children:"No budgets configured for this project."})})]})}export{ie as B,oe as P};
//# sourceMappingURL=BudgetProgress.js.map
