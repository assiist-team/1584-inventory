{"version":3,"file":"AddTransaction.js","sources":["../../src/components/TransactionItemsList.tsx","../../src/pages/AddTransaction.tsx"],"sourcesContent":["import { useState } from 'react'\nimport { Edit, X, Plus } from 'lucide-react'\nimport { TransactionItemFormData } from '@/types'\nimport TransactionItemForm from './TransactionItemForm'\n\ninterface TransactionItemsListProps {\n  items: TransactionItemFormData[]\n  onItemsChange: (items: TransactionItemFormData[]) => void\n  projectId?: string\n  projectName?: string\n  onImageFilesChange?: (itemId: string, imageFiles: File[]) => void\n}\n\nexport default function TransactionItemsList({ items, onItemsChange, projectId, projectName, onImageFilesChange }: TransactionItemsListProps) {\n  const [isAddingItem, setIsAddingItem] = useState(false)\n  const [editingItemId, setEditingItemId] = useState<string | null>(null)\n\n  const handleSaveItem = (item: TransactionItemFormData) => {\n    if (editingItemId) {\n      // Update existing item\n      const updatedItems = items.map(existingItem =>\n        existingItem.id === editingItemId ? item : existingItem\n      )\n      onItemsChange(updatedItems)\n    } else {\n      // Add new item\n      onItemsChange([...items, item])\n    }\n\n    // Handle image files if they exist\n    if (item.imageFiles && item.imageFiles.length > 0 && onImageFilesChange) {\n      onImageFilesChange(item.id, item.imageFiles)\n    }\n\n    setIsAddingItem(false)\n    setEditingItemId(null)\n  }\n\n  const handleCancelItem = () => {\n    setIsAddingItem(false)\n    setEditingItemId(null)\n  }\n\n  const handleEditItem = (itemId: string) => {\n    setEditingItemId(itemId)\n    setIsAddingItem(false)\n  }\n\n  const handleDeleteItem = (itemId: string) => {\n    const updatedItems = items.filter(item => item.id !== itemId)\n    onItemsChange(updatedItems)\n  }\n\n  const getItemToEdit = () => {\n    if (!editingItemId) return null\n    return items.find(item => item.id === editingItemId) || null\n  }\n\n  const formatCurrency = (amount: string) => {\n    const num = parseFloat(amount)\n    return isNaN(num) ? '$0.00' : `$${num.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`\n  }\n\n  if (isAddingItem || editingItemId) {\n    const itemToEdit = getItemToEdit()\n    return (\n      <TransactionItemForm\n        item={itemToEdit || undefined}\n        onSave={handleSaveItem}\n        onCancel={handleCancelItem}\n        isEditing={!!itemToEdit}\n        projectId={projectId}\n        projectName={projectName}\n        onImageFilesChange={onImageFilesChange}\n      />\n    )\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-lg font-medium text-gray-900\">Transaction Items</h3>\n      </div>\n\n      <div className=\"space-y-3\">\n        {items.map((item, index) => (\n          <div key={item.id} className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n            <div className=\"flex items-start justify-between\">\n              <div className=\"flex-1\">\n                <div className=\"flex items-center space-x-4 mb-2\">\n                  <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800\">\n                    Item {index + 1}\n                  </span>\n                  <span className=\"text-sm text-gray-500\">\n                    {formatCurrency(item.projectPrice || item.purchasePrice || '')}\n                  </span>\n                </div>\n\n                <h4 className=\"text-sm font-medium text-gray-900 mb-1\">\n                  {item.description || 'No description'}\n                </h4>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600\">\n                  {item.sku && (\n                    <div>\n                      <span className=\"font-medium\">SKU:</span> {item.sku}\n                    </div>\n                  )}\n                  {item.marketValue && (\n                    <div>\n                      <span className=\"font-medium\">Market Value:</span> ${item.marketValue}\n                    </div>\n                  )}\n                </div>\n\n                {item.notes && (\n                  <div className=\"mt-2 text-sm text-gray-600\">\n                    <span className=\"font-medium\">Notes:</span> {item.notes}\n                  </div>\n                )}\n              </div>\n\n              <div className=\"flex items-center space-x-2 ml-4\">\n                <button\n                  onClick={(e) => {\n                    e.preventDefault()\n                    e.stopPropagation()\n                    handleEditItem(item.id)\n                  }}\n                  className=\"text-primary-600 hover:text-primary-900 p-1\"\n                  title=\"Edit item\"\n                >\n                  <Edit className=\"h-4 w-4\" />\n                </button>\n                <button\n                  onClick={(e) => {\n                    e.preventDefault()\n                    e.stopPropagation()\n                    handleDeleteItem(item.id)\n                  }}\n                  className=\"text-red-600 hover:text-red-900 p-1\"\n                  title=\"Delete item\"\n                >\n                  <X className=\"h-4 w-4\" />\n                </button>\n              </div>\n            </div>\n          </div>\n        ))}\n\n        {/* Add Item Button - Always visible */}\n        <div className=\"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg\">\n          <button\n            onClick={() => setIsAddingItem(true)}\n            className=\"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n            title=\"Add new item\"\n          >\n            <Plus className=\"h-4 w-4 mr-2\" />\n            Add Item\n          </button>\n        </div>\n\n        {items.length > 0 && (\n          <div className=\"flex justify-between items-center pt-4 border-t border-gray-200\">\n            <div className=\"text-sm text-gray-600\">\n              Total Items: {items.length}\n            </div>\n            <div className=\"text-lg font-semibold text-gray-900\">\n              Total: {formatCurrency(\n                items.reduce((sum, item) => sum + (parseFloat(item.projectPrice || item.purchasePrice || '0') || 0), 0).toString()\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n","import { ArrowLeft, Save, X } from 'lucide-react'\nimport { Link, useParams, useNavigate } from 'react-router-dom'\nimport { useState, FormEvent, useEffect } from 'react'\nimport { TransactionFormData, TransactionValidationErrors, TransactionItemFormData, ItemImage, TaxPreset } from '@/types'\nimport { TRANSACTION_SOURCES } from '@/constants/transactionSources'\nimport { COMPANY_NAME, CLIENT_OWES_COMPANY, COMPANY_OWES_CLIENT } from '@/constants/company'\nimport { transactionService, projectService } from '@/services/inventoryService'\nimport { unifiedItemsService } from '@/services/inventoryService'\nimport { ImageUploadService, UploadProgress } from '@/services/imageService'\nimport ImageUpload from '@/components/ui/ImageUpload'\nimport TransactionItemsList from '@/components/TransactionItemsList'\nimport { useAuth } from '../contexts/AuthContext'\nimport { useAccount } from '../contexts/AccountContext'\nimport { Shield } from 'lucide-react'\nimport { getTaxPresets } from '@/services/taxPresetsService'\n\nexport default function AddTransaction() {\n  const { id: projectId } = useParams<{ id: string }>()\n  const navigate = useNavigate()\n  const { user, isOwner } = useAuth()\n  const { currentAccountId } = useAccount()\n\n  // Check if user has permission to add transactions\n  // Users must belong to an account (have currentAccountId) or be a system owner\n  if (!currentAccountId && !isOwner()) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"max-w-md w-full space-y-8 text-center\">\n          <div className=\"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-red-100\">\n            <Shield className=\"h-6 w-6 text-red-600\" />\n          </div>\n          <h2 className=\"text-2xl font-bold text-gray-900\">Access Denied</h2>\n          <p className=\"text-gray-600\">\n            You don't have permission to add transactions. Please contact an administrator if you need access.\n          </p>\n          <Link\n            to={`/project/${projectId}`}\n            className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700\"\n          >\n            Back to Project\n          </Link>\n        </div>\n      </div>\n    )\n  }\n\n  const [projectName, setProjectName] = useState<string>('')\n\n  // Fetch project name\n  useEffect(() => {\n    const fetchProject = async () => {\n      if (projectId && currentAccountId) {\n        try {\n          const project = await projectService.getProject(currentAccountId, projectId)\n          if (project) {\n            setProjectName(project.name)\n          }\n        } catch (error) {\n          console.error('Failed to fetch project:', error)\n        }\n      }\n    }\n\n    fetchProject()\n  }, [projectId, currentAccountId])\n\n  const [formData, setFormData] = useState<TransactionFormData>({\n    transactionDate: (() => {\n      const today = new Date()\n      return `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`\n    })(), // YYYY-MM-DD format\n    source: '',\n    transactionType: 'Purchase',\n    paymentMethod: '',\n    amount: '',\n    budgetCategory: 'Furnishings',\n    notes: '',\n    status: 'completed',\n    reimbursementType: '',\n    triggerEvent: 'Manual',\n    transactionImages: [], // Legacy field for backward compatibility\n    receiptImages: [],\n    otherImages: [],\n    items: []\n  })\n\n  // Tax form state\n  const [taxRatePreset, setTaxRatePreset] = useState<string | undefined>(undefined)\n  const [subtotal, setSubtotal] = useState<string>('')\n  const [taxPresets, setTaxPresets] = useState<TaxPreset[]>([])\n  const [selectedPresetRate, setSelectedPresetRate] = useState<number | undefined>(undefined)\n\n  const [items, setItems] = useState<TransactionItemFormData[]>([])\n  const [imageFilesMap, setImageFilesMap] = useState<Map<string, File[]>>(new Map())\n\n  const [isCustomSource, setIsCustomSource] = useState(false)\n\n  // Initialize custom source state based on initial form data\n  useEffect(() => {\n    if (formData.source && !TRANSACTION_SOURCES.includes(formData.source as any)) {\n      setIsCustomSource(true)\n    } else if (formData.source && TRANSACTION_SOURCES.includes(formData.source as any)) {\n      setIsCustomSource(false)\n    }\n  }, [formData.source])\n\n  // Load tax presets on mount\n  useEffect(() => {\n    const loadPresets = async () => {\n      if (!currentAccountId) return\n      try {\n        const presets = await getTaxPresets(currentAccountId)\n        setTaxPresets(presets)\n      } catch (error) {\n        console.error('Error loading tax presets:', error)\n      }\n    }\n    loadPresets()\n  }, [currentAccountId])\n\n  // Update selected preset rate when preset changes\n  useEffect(() => {\n    if (taxRatePreset && taxRatePreset !== 'Other') {\n      const preset = taxPresets.find(p => p.id === taxRatePreset)\n      setSelectedPresetRate(preset?.rate)\n    } else {\n      setSelectedPresetRate(undefined)\n    }\n  }, [taxRatePreset, taxPresets])\n\n  const [errors, setErrors] = useState<TransactionValidationErrors>({})\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [isUploadingImages, setIsUploadingImages] = useState(false)\n\n  // Validation function\n  const validateForm = (): boolean => {\n    const newErrors: TransactionValidationErrors = {}\n\n    if (!formData.source.trim()) {\n      newErrors.source = 'Source is required'\n    }\n\n    // Transaction type is optional\n    // Payment method is optional\n\n    if (!formData.budgetCategory?.trim()) {\n      newErrors.budgetCategory = 'Budget category is required'\n    }\n\n    if (!formData.amount.trim()) {\n      newErrors.amount = 'Amount is required'\n    } else if (isNaN(Number(formData.amount)) || Number(formData.amount) <= 0) {\n      newErrors.amount = 'Amount must be a positive number'\n    }\n\n    // Tax validation for Other\n    if (taxRatePreset === 'Other') {\n      if (!subtotal.trim() || isNaN(Number(subtotal)) || Number(subtotal) <= 0) {\n        newErrors.general = 'Subtotal must be provided and greater than 0 when Tax Rate Preset is Other.'\n      } else if (Number(formData.amount) < Number(subtotal)) {\n        newErrors.general = 'Subtotal cannot exceed the total amount.'\n      }\n    }\n\n    // Items are now optional - no validation required\n    // Transaction date is optional\n\n    setErrors(newErrors)\n    return Object.keys(newErrors).length === 0\n  }\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault()\n\n    if (!validateForm() || !projectId || !currentAccountId) return\n\n    setIsSubmitting(true)\n\n    try {\n      // Create transaction data, excluding image File objects from formData since they contain File objects\n      const { transactionImages, receiptImages, otherImages, ...formDataWithoutImages } = formData\n\n      if (!user?.id) {\n        throw new Error('User must be authenticated to create transactions')\n      }\n\n      const transactionData = {\n        ...formDataWithoutImages,\n        projectId: projectId,\n        projectName: projectName,\n        createdBy: user.id,\n        taxRatePreset: taxRatePreset,\n        receiptEmailed: formData.receiptEmailed ?? false,\n        subtotal: taxRatePreset === 'Other' ? subtotal : ''\n      }\n\n      console.log('Attempting to create transaction with data:', transactionData)\n      console.log('Transaction date value:', transactionData.transactionDate)\n      console.log('Transaction date type:', typeof transactionData.transactionDate)\n      console.log('Transaction items:', items)\n\n      // Create transaction with items first to get the real transaction ID\n      const transactionId = await transactionService.createTransaction(currentAccountId, projectId, transactionData, items)\n\n      // Now upload receipt images using the real transaction ID\n      if (formData.receiptImages && formData.receiptImages.length > 0) {\n        setIsUploadingImages(true)\n\n        try {\n          const uploadResults = await ImageUploadService.uploadMultipleReceiptImages(\n            formData.receiptImages,\n            projectName,\n            transactionId,\n            handleImageUploadProgress\n          )\n\n          // Convert to TransactionImage format\n          const receiptImages = ImageUploadService.convertFilesToReceiptImages(uploadResults)\n          console.log('Receipt images uploaded successfully:', receiptImages.length, 'images')\n          console.log('Receipt images to save:', receiptImages)\n\n          // Update the transaction with the uploaded receipt images\n          if (receiptImages && receiptImages.length > 0) {\n            console.log('Updating transaction with receipt images...')\n            try {\n              await transactionService.updateTransaction(currentAccountId, projectId, transactionId, {\n                receiptImages: receiptImages\n              })\n              console.log('Transaction updated successfully with receipt images')\n            } catch (updateError) {\n              console.error('Failed to update transaction with receipt images:', updateError)\n              // Don't fail the entire transaction if image update fails\n            }\n          }\n\n          // Small delay to ensure the update is processed before continuing\n          await new Promise(resolve => setTimeout(resolve, 500))\n        } catch (error: any) {\n          console.error('Error uploading receipt images:', error)\n\n          // Provide specific error messages based on error type\n          let errorMessage = 'Failed to upload receipt images. Please try again.'\n          if (error.message?.includes('Storage service is not available')) {\n            errorMessage = 'Storage service is unavailable. Please check your internet connection.'\n          } else if (error.message?.includes('Network error') || error.message?.includes('offline')) {\n            errorMessage = 'Network connection issue. Please check your internet and try again.'\n          } else if (error.message?.includes('quota exceeded')) {\n            errorMessage = 'Storage quota exceeded. Please contact support.'\n          } else if (error.message?.includes('Unauthorized')) {\n            errorMessage = 'Permission denied. Please check your account permissions.'\n          } else if (error.message?.includes('CORS') || error.message?.includes('Access-Control') || error.message?.includes('ERR_FAILED') || error.message?.includes('preflight')) {\n            errorMessage = 'Upload blocked by browser security policy. Please check Supabase Storage configuration or try refreshing the page.'\n          }\n\n          setErrors({ receiptImages: errorMessage })\n          setIsSubmitting(false)\n          setIsUploadingImages(false)\n          return\n        }\n\n        setIsUploadingImages(false)\n      }\n\n      // Now upload other images using the real transaction ID\n      if (formData.otherImages && formData.otherImages.length > 0) {\n        setIsUploadingImages(true)\n\n        try {\n          const uploadResults = await ImageUploadService.uploadMultipleOtherImages(\n            formData.otherImages,\n            projectName,\n            transactionId,\n            handleImageUploadProgress\n          )\n\n          // Convert to TransactionImage format\n          const otherImages = ImageUploadService.convertFilesToOtherImages(uploadResults)\n          console.log('Other images uploaded successfully:', otherImages.length, 'images')\n          console.log('Other images to save:', otherImages)\n\n          // Update the transaction with the uploaded other images\n          if (otherImages && otherImages.length > 0) {\n            console.log('Updating transaction with other images...')\n            try {\n              await transactionService.updateTransaction(currentAccountId, projectId, transactionId, {\n                otherImages: otherImages\n              })\n              console.log('Transaction updated successfully with other images')\n            } catch (updateError) {\n              console.error('Failed to update transaction with other images:', updateError)\n              // Don't fail the entire transaction if image update fails\n            }\n          }\n\n          // Small delay to ensure the update is processed before continuing\n          await new Promise(resolve => setTimeout(resolve, 500))\n        } catch (error: any) {\n          console.error('Error uploading other images:', error)\n\n          // Provide specific error messages based on error type\n          let errorMessage = 'Failed to upload other images. Please try again.'\n          if (error.message?.includes('Storage service is not available')) {\n            errorMessage = 'Storage service is unavailable. Please check your internet connection.'\n          } else if (error.message?.includes('Network error') || error.message?.includes('offline')) {\n            errorMessage = 'Network connection issue. Please check your internet and try again.'\n          } else if (error.message?.includes('quota exceeded')) {\n            errorMessage = 'Storage quota exceeded. Please contact support.'\n          } else if (error.message?.includes('Unauthorized')) {\n            errorMessage = 'Permission denied. Please check your account permissions.'\n          } else if (error.message?.includes('CORS') || error.message?.includes('Access-Control') || error.message?.includes('ERR_FAILED') || error.message?.includes('preflight')) {\n            errorMessage = 'Upload blocked by browser security policy. Please check Supabase Storage configuration or try refreshing the page.'\n          }\n\n          setErrors({ otherImages: errorMessage })\n          setIsSubmitting(false)\n          setIsUploadingImages(false)\n          return\n        }\n\n        setIsUploadingImages(false)\n      }\n\n      // Upload item images with the correct item IDs\n      if (imageFilesMap.size > 0) {\n        try {\n          console.log('Starting image upload process...')\n          // Get the created items and extract their IDs\n          const createdItems = await unifiedItemsService.getItemsForTransaction(currentAccountId, projectId, transactionId)\n          const createdItemIds = createdItems.map(item => item.itemId)\n          console.log('Created item IDs:', createdItemIds)\n\n          // Upload images for each item\n          for (let i = 0; i < items.length && i < createdItemIds.length; i++) {\n            const item = items[i]\n            const itemId = createdItemIds[i]\n            const imageFiles = imageFilesMap.get(item.id)\n\n            if (imageFiles && imageFiles.length > 0) {\n              console.log(`Uploading ${imageFiles.length} images for item ${itemId}`)\n\n              // Upload each image file with the final item ID\n              const uploadPromises = imageFiles.map(async (file, fileIndex) => {\n                try {\n                  console.log(`Uploading file ${fileIndex + 1}/${imageFiles.length}: ${file.name}`)\n                  const uploadResult = await ImageUploadService.uploadItemImage(\n                    file,\n                    projectName,\n                    itemId\n                  )\n                  console.log(`Upload successful for ${file.name}:`, uploadResult)\n                  console.log(`Upload result URL: ${uploadResult.url}`)\n\n                  const uploadedImage: ItemImage = {\n                    url: uploadResult.url,\n                    alt: file.name,\n                    isPrimary: item.images?.find(img => img.fileName === file.name)?.isPrimary || false,\n                    uploadedAt: new Date(),\n                    fileName: file.name,\n                    size: file.size,\n                    mimeType: file.type\n                  }\n                  console.log('Created ItemImage object:', uploadedImage)\n                  return uploadedImage\n                } catch (uploadError) {\n                  console.error(`Failed to upload ${file.name}:`, uploadError)\n                  // Return a placeholder image object so the process continues\n                  return {\n                    url: '',\n                    alt: file.name,\n                    isPrimary: false,\n                    uploadedAt: new Date(),\n                    fileName: file.name,\n                    size: file.size,\n                    mimeType: file.type\n                  } as ItemImage\n                }\n              })\n\n              const uploadedImages = await Promise.all(uploadPromises)\n              console.log('All uploads completed, updating item with images:', uploadedImages)\n\n              // Filter out any failed uploads (empty URLs)\n              const validImages = uploadedImages.filter(img => img.url && img.url.trim() !== '')\n              console.log(`Valid images to save: ${validImages.length}/${uploadedImages.length}`)\n\n              if (validImages.length > 0) {\n                // Update the item with the uploaded images\n                await unifiedItemsService.updateItem(currentAccountId, itemId, { images: validImages })\n                console.log(`Successfully updated item ${itemId} with ${validImages.length} images`)\n              }\n            }\n          }\n        } catch (imageError) {\n          console.error('Error in image upload process:', imageError)\n          // Don't fail the transaction if image upload fails - just log the error\n          // The transaction was successfully created, items just won't have images\n        }\n      }\n\n      navigate(`/project/${projectId}?tab=transactions`)\n    } catch (error) {\n      console.error('Error creating transaction:', error)\n      setErrors({ general: error instanceof Error ? error.message : 'Failed to create transaction. Please try again.' })\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  const handleInputChange = (field: Exclude<keyof TransactionFormData, 'taxRatePreset' | 'subtotal'>, value: string | boolean | File[]) => {\n    setFormData(prev => ({ ...prev, [field]: value }))\n\n    // Clear error when user starts typing\n    if (errors[field]) {\n      setErrors(prev => ({ ...prev, [field]: undefined }))\n    }\n  }\n\n  const handleReceiptImagesChange = (files: File[]) => {\n    setFormData(prev => ({ ...prev, receiptImages: files }))\n    // Clear any existing image errors\n    if (errors.receiptImages) {\n      setErrors(prev => ({ ...prev, receiptImages: undefined }))\n    }\n  }\n\n  const handleOtherImagesChange = (files: File[]) => {\n    setFormData(prev => ({ ...prev, otherImages: files }))\n    // Clear any existing image errors\n    if (errors.otherImages) {\n      setErrors(prev => ({ ...prev, otherImages: undefined }))\n    }\n  }\n\n  const handleImageFilesChange = (itemId: string, imageFiles: File[]) => {\n    // Update the imageFilesMap\n    setImageFilesMap(prev => {\n      const newMap = new Map(prev)\n      newMap.set(itemId, imageFiles)\n      return newMap\n    })\n\n    // Also update the item in the items array with the imageFiles\n    setItems(prevItems => prevItems.map(item =>\n      item.id === itemId\n        ? { ...item, imageFiles }\n        : item\n    ))\n  }\n\n  const handleImageUploadProgress = (fileIndex: number, progress: UploadProgress) => {\n    // Progress tracking removed to fix TypeScript errors\n    console.log(`Upload progress for file ${fileIndex}: ${progress.percentage}%`)\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"space-y-4\">\n        {/* Back button row */}\n        <div className=\"flex items-center justify-between\">\n          <Link\n            to={`/project/${projectId}?tab=transactions`}\n            className=\"inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-1\" />\n            Back\n          </Link>\n        </div>\n\n      </div>\n\n      {/* Form */}\n      <div className=\"bg-white shadow rounded-lg\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h1 className=\"text-2xl font-bold text-gray-900\">Add Transaction</h1>\n        </div>\n        <form onSubmit={handleSubmit} className=\"space-y-8 p-8\">\n          {/* General Error Display */}\n          {errors.general && (\n            <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\n              <div className=\"flex\">\n                <div className=\"ml-3\">\n                  <h3 className=\"text-sm font-medium text-red-800\">Error</h3>\n                  <div className=\"mt-2 text-sm text-red-700\">\n                    <p>{errors.general}</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Transaction Source */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n              Transaction Source *\n            </label>\n            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3 mb-3\">\n              {TRANSACTION_SOURCES.map((source) => (\n                <div key={source} className=\"flex items-center\">\n                  <input\n                    type=\"radio\"\n                    id={`source_${source.toLowerCase().replace(/\\s+/g, '_')}`}\n                    name=\"source\"\n                    value={source}\n                    checked={formData.source === source}\n                    onChange={(e) => {\n                      handleInputChange('source', e.target.value)\n                      setIsCustomSource(false)\n                    }}\n                    className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                  />\n                  <label htmlFor={`source_${source.toLowerCase().replace(/\\s+/g, '_')}`} className=\"ml-2 block text-sm text-gray-900\">\n                    {source}\n                  </label>\n                </div>\n              ))}\n            </div>\n            <div className=\"flex items-center\">\n              <input\n                type=\"radio\"\n                id=\"source_custom\"\n                name=\"source\"\n                value=\"custom\"\n                checked={isCustomSource}\n                onChange={() => {\n                  setIsCustomSource(true)\n                  handleInputChange('source', '')\n                }}\n                className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n              />\n              <label htmlFor=\"source_custom\" className=\"ml-2 block text-sm text-gray-900\">\n                Other\n              </label>\n            </div>\n            {isCustomSource && (\n              <input\n                type=\"text\"\n                id=\"source_custom_input\"\n                value={formData.source}\n                onChange={(e) => handleInputChange('source', e.target.value)}\n                placeholder=\"Enter custom source...\"\n                className={`mt-3 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${\n                  errors.source ? 'border-red-300' : 'border-gray-300'\n                }`}\n              />\n            )}\n            {errors.source && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.source}</p>\n            )}\n          </div>\n\n          {/* Budget Category */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n              Budget Category *\n            </label>\n            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"budget_design_fee\"\n                  name=\"budgetCategory\"\n                  value=\"Design Fee\"\n                  checked={formData.budgetCategory === 'Design Fee'}\n                  onChange={(e) => handleInputChange('budgetCategory', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"budget_design_fee\" className=\"ml-2 block text-sm text-gray-900\">\n                  Design Fee\n                </label>\n              </div>\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"budget_furnishings\"\n                  name=\"budgetCategory\"\n                  value=\"Furnishings\"\n                  checked={formData.budgetCategory === 'Furnishings'}\n                  onChange={(e) => handleInputChange('budgetCategory', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"budget_furnishings\" className=\"ml-2 block text-sm text-gray-900\">\n                  Furnishings\n                </label>\n              </div>\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"budget_property_management\"\n                  name=\"budgetCategory\"\n                  value=\"Property Management\"\n                  checked={formData.budgetCategory === 'Property Management'}\n                  onChange={(e) => handleInputChange('budgetCategory', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"budget_property_management\" className=\"ml-2 block text-sm text-gray-900\">\n                  Property Management\n                </label>\n              </div>\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"budget_kitchen\"\n                  name=\"budgetCategory\"\n                  value=\"Kitchen\"\n                  checked={formData.budgetCategory === 'Kitchen'}\n                  onChange={(e) => handleInputChange('budgetCategory', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"budget_kitchen\" className=\"ml-2 block text-sm text-gray-900\">\n                  Kitchen\n                </label>\n              </div>\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"budget_install\"\n                  name=\"budgetCategory\"\n                  value=\"Install\"\n                  checked={formData.budgetCategory === 'Install'}\n                  onChange={(e) => handleInputChange('budgetCategory', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"budget_install\" className=\"ml-2 block text-sm text-gray-900\">\n                  Install\n                </label>\n              </div>\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"budget_storage_receiving\"\n                  name=\"budgetCategory\"\n                  value=\"Storage & Receiving\"\n                  checked={formData.budgetCategory === 'Storage & Receiving'}\n                  onChange={(e) => handleInputChange('budgetCategory', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"budget_storage_receiving\" className=\"ml-2 block text-sm text-gray-900\">\n                  Storage & Receiving\n                </label>\n              </div>\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"budget_fuel\"\n                  name=\"budgetCategory\"\n                  value=\"Fuel\"\n                  checked={formData.budgetCategory === 'Fuel'}\n                  onChange={(e) => handleInputChange('budgetCategory', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"budget_fuel\" className=\"ml-2 block text-sm text-gray-900\">\n                  Fuel\n                </label>\n              </div>\n            </div>\n            {errors.budgetCategory && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.budgetCategory}</p>\n            )}\n          </div>\n\n          {/* Transaction Type */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n              Transaction Type\n            </label>\n            <div className=\"flex items-center space-x-6\">\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"type_purchase\"\n                  name=\"transactionType\"\n                  value=\"Purchase\"\n                  checked={formData.transactionType === 'Purchase'}\n                  onChange={(e) => handleInputChange('transactionType', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"type_purchase\" className=\"ml-2 block text-sm text-gray-900\">\n                  Purchase\n                </label>\n              </div>\n              {/* 'To Inventory' option removed */}\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"type_return\"\n                  name=\"transactionType\"\n                  value=\"Return\"\n                  checked={formData.transactionType === 'Return'}\n                  onChange={(e) => handleInputChange('transactionType', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"type_return\" className=\"ml-2 block text-sm text-gray-900\">\n                  Return\n                </label>\n              </div>\n            </div>\n            {errors.transactionType && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.transactionType}</p>\n            )}\n          </div>\n\n          {/* Transaction Method */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n              Transaction Method\n            </label>\n            <div className=\"flex items-center space-x-6\">\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"method_client_card\"\n                  name=\"paymentMethod\"\n                  value=\"Client Card\"\n                  checked={formData.paymentMethod === 'Client Card'}\n                  onChange={(e) => handleInputChange('paymentMethod', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"method_client_card\" className=\"ml-2 block text-sm text-gray-900\">\n                  Client Card\n                </label>\n              </div>\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"method_1584_card\"\n                  name=\"paymentMethod\"\n                  value={COMPANY_NAME}\n                  checked={formData.paymentMethod === COMPANY_NAME}\n                  onChange={(e) => handleInputChange('paymentMethod', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"method_1584_card\" className=\"ml-2 block text-sm text-gray-900\">\n                  {COMPANY_NAME}\n                </label>\n              </div>\n            </div>\n            {errors.paymentMethod && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.paymentMethod}</p>\n            )}\n          </div>\n\n          {/* Reimbursement Type */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n              Reimbursement Type\n            </label>\n            <p className=\"mb-3 text-xs text-gray-500\">Flags transactions that require reimbursement</p>\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"reimbursement_none\"\n                  name=\"reimbursementType\"\n                  value=\"\"\n                  checked={!formData.reimbursementType}\n                  onChange={(e) => handleInputChange('reimbursementType', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"reimbursement_none\" className=\"ml-2 block text-sm text-gray-900\">\n                  None\n                </label>\n              </div>\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"reimbursement_client_owes\"\n                  name=\"reimbursementType\"\n                  value={CLIENT_OWES_COMPANY}\n                  checked={formData.reimbursementType === CLIENT_OWES_COMPANY}\n                  onChange={(e) => handleInputChange('reimbursementType', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"reimbursement_client_owes\" className=\"ml-2 block text-sm text-gray-900\">\n                  {CLIENT_OWES_COMPANY}\n                </label>\n              </div>\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"reimbursement_we_owe\"\n                  name=\"reimbursementType\"\n                  value={COMPANY_OWES_CLIENT}\n                  checked={formData.reimbursementType === COMPANY_OWES_CLIENT}\n                  onChange={(e) => handleInputChange('reimbursementType', e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"reimbursement_we_owe\" className=\"ml-2 block text-sm text-gray-900\">\n                  {COMPANY_OWES_CLIENT}\n                </label>\n              </div>\n            </div>\n            {errors.reimbursementType && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.reimbursementType}</p>\n            )}\n          </div>\n\n          {/* Receipt Email Copy */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n              Receipt Email Copy\n            </label>\n            <div className=\"flex items-center space-x-6\">\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"receipt_yes\"\n                  name=\"receiptEmailed\"\n                  checked={formData.receiptEmailed === true}\n                  onChange={() => handleInputChange('receiptEmailed', true)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"receipt_yes\" className=\"ml-2 block text-sm text-gray-900\">\n                  Yes\n                </label>\n              </div>\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"receipt_no\"\n                  name=\"receiptEmailed\"\n                  checked={formData.receiptEmailed === false}\n                  onChange={() => handleInputChange('receiptEmailed', false)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"receipt_no\" className=\"ml-2 block text-sm text-gray-900\">\n                  No\n                </label>\n              </div>\n            </div>\n          </div>\n\n          {/* Amount */}\n          <div>\n            <label htmlFor=\"amount\" className=\"block text-sm font-medium text-gray-700\">\n              Amount *\n            </label>\n            <div className=\"mt-1 relative rounded-md shadow-sm\">\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                <span className=\"text-gray-500 sm:text-sm\">$</span>\n              </div>\n              <input\n                type=\"text\"\n                id=\"amount\"\n                value={formData.amount}\n                onChange={(e) => handleInputChange('amount', e.target.value)}\n                placeholder=\"0.00\"\n                className={`block w-full pl-8 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${\n                  errors.amount ? 'border-red-300' : 'border-gray-300'\n                }`}\n              />\n            </div>\n            {errors.amount && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.amount}</p>\n            )}\n          </div>\n\n          {/* Tax Rate Presets */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">Tax Rate Preset</label>\n            <div className=\"space-y-2\">\n              {taxPresets.map((preset) => (\n                <div key={preset.id} className=\"flex items-center\">\n                  <input\n                    type=\"radio\"\n                    id={`tax_preset_${preset.id}`}\n                    name=\"taxRatePreset\"\n                    value={preset.id}\n                    checked={taxRatePreset === preset.id}\n                    onChange={(e) => setTaxRatePreset(e.target.value)}\n                    className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                  />\n                  <label htmlFor={`tax_preset_${preset.id}`} className=\"ml-2 block text-sm text-gray-900\">\n                    {preset.name} ({preset.rate.toFixed(2)}%)\n                  </label>\n                </div>\n              ))}\n              <div className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  id=\"tax_preset_other\"\n                  name=\"tax_rate_preset\"\n                  value=\"Other\"\n                  checked={taxRatePreset === 'Other'}\n                  onChange={(e) => setTaxRatePreset(e.target.value)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300\"\n                />\n                <label htmlFor=\"tax_preset_other\" className=\"ml-2 block text-sm text-gray-900\">\n                  Other\n                </label>\n              </div>\n            </div>\n            {/* Show selected tax rate for presets */}\n            {taxRatePreset && taxRatePreset !== 'Other' && selectedPresetRate !== undefined && (\n              <div className=\"mt-3 p-3 bg-gray-50 rounded-md\">\n                <p className=\"text-sm text-gray-700\">\n                  <span className=\"font-medium\">Tax Rate:</span> {selectedPresetRate.toFixed(2)}%\n                </p>\n              </div>\n            )}\n          </div>\n\n          {/* Subtotal (shown only for Other) */}\n          {taxRatePreset === 'Other' && (\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Subtotal</label>\n              <div className=\"mt-1 relative rounded-md shadow-sm\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <span className=\"text-gray-500 sm:text-sm\">$</span>\n                </div>\n                <input\n                  type=\"text\"\n                  id=\"subtotal\"\n                  value={subtotal}\n                  onChange={(e) => setSubtotal(e.target.value)}\n                  placeholder=\"0.00\"\n                  className={`block w-full pl-8 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 border-gray-300`}\n                />\n              </div>\n              <p className=\"mt-1 text-sm text-gray-500\">This will be used to calculate the tax rate.</p>\n            </div>\n          )}\n\n          {/* Transaction Date */}\n          <div>\n            <label htmlFor=\"transactionDate\" className=\"block text-sm font-medium text-gray-700\">\n              Transaction Date\n            </label>\n            <input\n              type=\"date\"\n              id=\"transactionDate\"\n              value={formData.transactionDate}\n              onChange={(e) => {\n                // Use the date value directly (YYYY-MM-DD format)\n                handleInputChange('transactionDate', e.target.value)\n              }}\n              className={`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${\n                errors.transactionDate ? 'border-red-300' : 'border-gray-300'\n              }`}\n            />\n            {errors.transactionDate && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.transactionDate}</p>\n            )}\n          </div>\n\n          {/* Notes */}\n          <div>\n            <label htmlFor=\"notes\" className=\"block text-sm font-medium text-gray-700\">\n              Notes\n            </label>\n            <textarea\n              id=\"notes\"\n              rows={3}\n              value={formData.notes}\n              onChange={(e) => handleInputChange('notes', e.target.value)}\n              placeholder=\"Additional notes about this transaction...\"\n              className={`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${\n                errors.notes ? 'border-red-300' : 'border-gray-300'\n              }`}\n            />\n            {errors.notes && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.notes}</p>\n            )}\n          </div>\n\n          {/* Transaction Items */}\n          <div>\n            <TransactionItemsList\n              items={items}\n              onItemsChange={(newItems) => {\n                setItems(newItems)\n                // Clear items error if items are added\n                if (errors.items && newItems.length > 0) {\n                  setErrors(prev => ({ ...prev, items: undefined }))\n                }\n              }}\n              projectId={projectId}\n              projectName={projectName}\n              onImageFilesChange={handleImageFilesChange}\n            />\n            {errors.items && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.items}</p>\n            )}\n          </div>\n\n          {/* Receipt Images */}\n          <div>\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n              Receipt Images\n            </h3>\n            <ImageUpload\n              onImagesChange={handleReceiptImagesChange}\n              maxImages={5}\n              maxFileSize={10}\n              disabled={isSubmitting || isUploadingImages}\n              className=\"mb-2\"\n            />\n            {errors.receiptImages && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.receiptImages}</p>\n            )}\n          </div>\n\n          {/* Other Images */}\n          <div>\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n              Other Images\n            </h3>\n            <ImageUpload\n              onImagesChange={handleOtherImagesChange}\n              maxImages={5}\n              maxFileSize={10}\n              disabled={isSubmitting || isUploadingImages}\n              className=\"mb-2\"\n            />\n            {errors.otherImages && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.otherImages}</p>\n            )}\n          </div>\n\n          {/* Form Actions */}\n          <div className=\"flex justify-end space-x-3 pt-4\">\n            <Link\n              to={`/project/${projectId}?tab=transactions`}\n              className=\"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n            >\n              <X className=\"h-4 w-4 mr-2\" />\n              Cancel\n            </Link>\n            <button\n              type=\"submit\"\n              disabled={isSubmitting || isUploadingImages}\n              className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              <Save className=\"h-4 w-4 mr-2\" />\n              {isSubmitting ? 'Creating...' : isUploadingImages ? 'Uploading Images...' : 'Create Transaction'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}\n"],"names":["TransactionItemsList","items","onItemsChange","projectId","projectName","onImageFilesChange","isAddingItem","setIsAddingItem","useState","editingItemId","setEditingItemId","handleSaveItem","item","updatedItems","existingItem","handleCancelItem","handleEditItem","itemId","handleDeleteItem","getItemToEdit","formatCurrency","amount","num","itemToEdit","jsx","TransactionItemForm","jsxs","index","e","Edit","X","Plus","sum","AddTransaction","useParams","navigate","useNavigate","user","isOwner","useAuth","currentAccountId","useAccount","Shield","Link","setProjectName","useEffect","project","projectService","error","formData","setFormData","today","taxRatePreset","setTaxRatePreset","subtotal","setSubtotal","taxPresets","setTaxPresets","selectedPresetRate","setSelectedPresetRate","setItems","imageFilesMap","setImageFilesMap","isCustomSource","setIsCustomSource","TRANSACTION_SOURCES","presets","getTaxPresets","preset","p","errors","setErrors","isSubmitting","setIsSubmitting","isUploadingImages","setIsUploadingImages","validateForm","newErrors","_a","handleSubmit","transactionImages","receiptImages","otherImages","formDataWithoutImages","transactionData","transactionId","transactionService","uploadResults","ImageUploadService","handleImageUploadProgress","updateError","resolve","errorMessage","_b","_c","_d","_e","_f","_g","_h","_i","_j","_k","_l","_m","_n","_o","_p","_q","_r","createdItemIds","unifiedItemsService","i","imageFiles","uploadPromises","file","fileIndex","uploadResult","uploadedImage","img","uploadError","uploadedImages","validImages","imageError","handleInputChange","field","value","prev","handleReceiptImagesChange","files","handleOtherImagesChange","handleImageFilesChange","newMap","prevItems","progress","ArrowLeft","source","COMPANY_NAME","CLIENT_OWES_COMPANY","COMPANY_OWES_CLIENT","newItems","ImageUpload","Save"],"mappings":"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"}