{"version":3,"file":"BudgetProgress.js","sources":["../../src/components/ProjectForm.tsx","../../src/components/ui/BudgetProgress.tsx"],"sourcesContent":["import { useState } from 'react'\nimport { X, DollarSign } from 'lucide-react'\nimport { ProjectBudgetCategories } from '@/types'\n\ninterface ProjectFormData {\n  name: string;\n  description: string;\n  clientName: string;\n  budget?: number;\n  designFee?: number;\n  budgetCategories?: ProjectBudgetCategories;\n}\n\ninterface ProjectFormProps {\n  onSubmit: (data: ProjectFormData) => Promise<void>;\n  onCancel: () => void;\n  isLoading?: boolean;\n  initialData?: Partial<ProjectFormData>;\n}\n\nexport default function ProjectForm({ onSubmit, onCancel, isLoading = false, initialData }: ProjectFormProps) {\n  const isEditing = Boolean(initialData?.name)\n\n  // Migrate designFee to budgetCategories if it exists and budgetCategories doesn't have it\n  const migratedBudgetCategories = (() => {\n    if (initialData?.budgetCategories) {\n      // If budgetCategories exists but designFee is 0/undefined and old designFee exists, merge it\n      if ((!initialData.budgetCategories.designFee || initialData.budgetCategories.designFee === 0) \n          && initialData?.designFee !== undefined && initialData.designFee > 0) {\n        return {\n          ...initialData.budgetCategories,\n          designFee: initialData.designFee\n        }\n      }\n      return initialData.budgetCategories\n    }\n    if (initialData?.designFee !== undefined) {\n      return {\n        designFee: initialData.designFee,\n        furnishings: 0,\n        propertyManagement: 0,\n        kitchen: 0,\n        install: 0,\n        storageReceiving: 0,\n        fuel: 0\n      }\n    }\n    return undefined\n  })()\n\n  const [formData, setFormData] = useState<ProjectFormData>({\n    name: initialData?.name || '',\n    description: initialData?.description || '',\n    clientName: initialData?.clientName || '',\n    budget: initialData?.budget || undefined,\n    designFee: initialData?.designFee || undefined,\n    budgetCategories: migratedBudgetCategories,\n  })\n\n  const [errors, setErrors] = useState<Record<string, string>>({})\n\n  // Calculate total budget from all budget categories\n  const calculateTotalBudget = (): number => {\n    if (!formData.budgetCategories) return 0\n    return Object.values(formData.budgetCategories).reduce((sum, value) => sum + (value || 0), 0)\n  }\n\n  const handleChange = (field: keyof ProjectFormData, value: string | number | ProjectBudgetCategories | undefined) => {\n    if (field === 'budgetCategories' && typeof value === 'object') {\n      setFormData(prev => ({ ...prev, [field]: value }))\n    } else {\n      const processedValue = typeof value === 'number' && value === 0 ? undefined : value\n      setFormData(prev => ({ ...prev, [field]: processedValue }))\n    }\n    // Clear error when user starts typing\n    if (errors[field]) {\n      setErrors(prev => ({ ...prev, [field]: '' }))\n    }\n  }\n\n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {}\n\n    if (!formData.name.trim()) {\n      newErrors.name = 'Project name is required'\n    }\n\n    if (!formData.clientName.trim()) {\n      newErrors.clientName = 'Client name is required'\n    }\n\n    // Budget categories validation is handled in the individual fields\n\n    setErrors(newErrors)\n    return Object.keys(newErrors).length === 0\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    console.debug('ProjectForm: submit clicked', { formData })\n\n    if (!validateForm()) {\n      console.debug('ProjectForm: validation failed', { formData })\n      return\n    }\n\n    try {\n      // Filter out undefined values before submitting\n      const cleanObject = (obj: any): any => {\n        if (obj === null || obj === undefined) return undefined\n        if (typeof obj === 'object') {\n          const cleaned = Object.fromEntries(\n            Object.entries(obj).filter(([_, value]) => value !== undefined)\n          )\n          return Object.keys(cleaned).length > 0 ? cleaned : undefined\n        }\n        return obj\n      }\n\n      const cleanedData = cleanObject(formData) as ProjectFormData\n      console.debug('ProjectForm: calling onSubmit with', { cleanedData })\n      await onSubmit(cleanedData)\n      console.debug('ProjectForm: onSubmit resolved')\n    } catch (error) {\n      console.error('Error submitting form:', error)\n    }\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto z-50\">\n      <div className=\"flex min-h-screen items-start sm:items-center justify-center p-4\">\n        <div className=\"relative w-full max-w-md mx-auto p-5 border shadow-lg rounded-md bg-white max-h-[calc(100vh-6rem)] overflow-y-auto\">\n          <div className=\"mt-3\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-medium text-gray-900\">\n              {isEditing ? 'Edit' : 'Create'}\n            </h3>\n            <button\n              onClick={onCancel}\n              className=\"text-gray-400 hover:text-gray-600\"\n            >\n              <X className=\"h-5 w-5\" />\n            </button>\n          </div>\n\n          {/* Form */}\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            {/* Project Name */}\n            <div>\n              <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700\">\n                Project Name *\n              </label>\n              <input\n                type=\"text\"\n                id=\"name\"\n                value={formData.name}\n                onChange={(e) => handleChange('name', e.target.value)}\n                className={`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm ${\n                  errors.name ? 'border-red-300' : ''\n                }`}\n                placeholder=\"Enter project name\"\n              />\n              {errors.name && <p className=\"mt-1 text-sm text-red-600\">{errors.name}</p>}\n            </div>\n\n            {/* Client Name */}\n            <div>\n              <label htmlFor=\"clientName\" className=\"block text-sm font-medium text-gray-700\">\n                Client Name *\n              </label>\n              <input\n                type=\"text\"\n                id=\"clientName\"\n                value={formData.clientName}\n                onChange={(e) => handleChange('clientName', e.target.value)}\n                className={`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm ${\n                  errors.clientName ? 'border-red-300' : ''\n                }`}\n                placeholder=\"Enter client name\"\n              />\n              {errors.clientName && <p className=\"mt-1 text-sm text-red-600\">{errors.clientName}</p>}\n            </div>\n\n            {/* Description */}\n            <div>\n              <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700\">\n                Description\n              </label>\n              <textarea\n                id=\"description\"\n                value={formData.description}\n                onChange={(e) => handleChange('description', e.target.value)}\n                rows={3}\n                className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\n                placeholder=\"Enter project description\"\n              />\n            </div>\n\n            {/* Default Transaction Category moved to account-level presets (Settings → Presets → Budget Categories) */}\n\n            {/* Budget Categories Section */}\n            <div className=\"border-t border-gray-200 pt-4\">\n              <h4 className=\"text-md font-medium text-gray-900 mb-3\">Budget Categories</h4>\n              <p className=\"text-sm text-gray-500 mb-4\">Set specific budgets for different project categories. These will be used to track spending by category.</p>\n\n              {/* Total Budget (Read-only) */}\n              <div className=\"mb-4\">\n                <label htmlFor=\"totalBudget\" className=\"block text-sm font-medium text-gray-700\">\n                  Total Budget\n                </label>\n                <div className=\"mt-1 relative rounded-md shadow-sm\">\n                  <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                    <DollarSign className=\"h-4 w-4 text-gray-400\" />\n                  </div>\n                  <input\n                    type=\"text\"\n                    id=\"totalBudget\"\n                    value={calculateTotalBudget().toFixed(2)}\n                    readOnly\n                    className=\"block w-full pl-10 rounded-md border-gray-300 shadow-sm bg-gray-50 text-gray-700 sm:text-sm cursor-not-allowed\"\n                  />\n                </div>\n                <p className=\"mt-1 text-xs text-gray-500\">Automatically calculated from budget categories</p>\n              </div>\n\n              {/* Design Fee */}\n              <div className=\"mb-4\">\n                <label htmlFor=\"budgetCategories.designFee\" className=\"block text-sm font-medium text-gray-700\">\n                  Design Fee Budget\n                </label>\n                <div className=\"mt-1 relative rounded-md shadow-sm\">\n                  <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                    <DollarSign className=\"h-4 w-4 text-gray-400\" />\n                  </div>\n                  <input\n                    type=\"number\"\n                    id=\"budgetCategories.designFee\"\n                    value={formData.budgetCategories?.designFee?.toString() || ''}\n                    onChange={(e) => {\n                      const value = parseFloat(e.target.value) || 0\n                      const newBudgetCategories: ProjectBudgetCategories = {\n                        designFee: value > 0 ? value : 0,\n                        furnishings: formData.budgetCategories?.furnishings || 0,\n                        propertyManagement: formData.budgetCategories?.propertyManagement || 0,\n                        kitchen: formData.budgetCategories?.kitchen || 0,\n                        install: formData.budgetCategories?.install || 0,\n                        storageReceiving: formData.budgetCategories?.storageReceiving || 0,\n                        fuel: formData.budgetCategories?.fuel || 0\n                      }\n                      handleChange('budgetCategories', newBudgetCategories)\n                    }}\n                    className=\"block w-full pl-10 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\n                    placeholder=\"0.00\"\n                    min=\"0\"\n                    step=\"0.01\"\n                  />\n                </div>\n              </div>\n\n              {/* Furnishings */}\n              <div className=\"mb-4\">\n                <label htmlFor=\"budgetCategories.furnishings\" className=\"block text-sm font-medium text-gray-700\">\n                  Furnishings Budget\n                </label>\n                <div className=\"mt-1 relative rounded-md shadow-sm\">\n                  <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                    <DollarSign className=\"h-4 w-4 text-gray-400\" />\n                  </div>\n                  <input\n                    type=\"number\"\n                    id=\"budgetCategories.furnishings\"\n                    value={formData.budgetCategories?.furnishings?.toString() || ''}\n                    onChange={(e) => {\n                      const value = parseFloat(e.target.value) || 0\n                      const newBudgetCategories: ProjectBudgetCategories = {\n                        designFee: formData.budgetCategories?.designFee || 0,\n                        furnishings: value > 0 ? value : 0,\n                        propertyManagement: formData.budgetCategories?.propertyManagement || 0,\n                        kitchen: formData.budgetCategories?.kitchen || 0,\n                        install: formData.budgetCategories?.install || 0,\n                        storageReceiving: formData.budgetCategories?.storageReceiving || 0,\n                        fuel: formData.budgetCategories?.fuel || 0\n                      }\n                      handleChange('budgetCategories', newBudgetCategories)\n                    }}\n                    className=\"block w-full pl-10 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\n                    placeholder=\"0.00\"\n                    min=\"0\"\n                    step=\"0.01\"\n                  />\n                </div>\n              </div>\n\n              {/* Property Management */}\n              <div className=\"mb-4\">\n                <label htmlFor=\"budgetCategories.propertyManagement\" className=\"block text-sm font-medium text-gray-700\">\n                  Property Management Budget\n                </label>\n                <div className=\"mt-1 relative rounded-md shadow-sm\">\n                  <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                    <DollarSign className=\"h-4 w-4 text-gray-400\" />\n                  </div>\n                  <input\n                    type=\"number\"\n                    id=\"budgetCategories.propertyManagement\"\n                    value={formData.budgetCategories?.propertyManagement?.toString() || ''}\n                    onChange={(e) => {\n                      const value = parseFloat(e.target.value) || 0\n                      const newBudgetCategories: ProjectBudgetCategories = {\n                        designFee: formData.budgetCategories?.designFee || 0,\n                        furnishings: formData.budgetCategories?.furnishings || 0,\n                        propertyManagement: value > 0 ? value : 0,\n                        kitchen: formData.budgetCategories?.kitchen || 0,\n                        install: formData.budgetCategories?.install || 0,\n                        storageReceiving: formData.budgetCategories?.storageReceiving || 0,\n                        fuel: formData.budgetCategories?.fuel || 0\n                      }\n                      handleChange('budgetCategories', newBudgetCategories)\n                    }}\n                    className=\"block w-full pl-10 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\n                    placeholder=\"0.00\"\n                    min=\"0\"\n                    step=\"0.01\"\n                  />\n                </div>\n              </div>\n\n              {/* Kitchen */}\n              <div className=\"mb-4\">\n                <label htmlFor=\"budgetCategories.kitchen\" className=\"block text-sm font-medium text-gray-700\">\n                  Kitchen Budget\n                </label>\n                <div className=\"mt-1 relative rounded-md shadow-sm\">\n                  <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                    <DollarSign className=\"h-4 w-4 text-gray-400\" />\n                  </div>\n                  <input\n                    type=\"number\"\n                    id=\"budgetCategories.kitchen\"\n                    value={formData.budgetCategories?.kitchen?.toString() || ''}\n                    onChange={(e) => {\n                      const value = parseFloat(e.target.value) || 0\n                      const newBudgetCategories: ProjectBudgetCategories = {\n                        designFee: formData.budgetCategories?.designFee || 0,\n                        furnishings: formData.budgetCategories?.furnishings || 0,\n                        propertyManagement: formData.budgetCategories?.propertyManagement || 0,\n                        kitchen: value > 0 ? value : 0,\n                        install: formData.budgetCategories?.install || 0,\n                        storageReceiving: formData.budgetCategories?.storageReceiving || 0,\n                        fuel: formData.budgetCategories?.fuel || 0\n                      }\n                      handleChange('budgetCategories', newBudgetCategories)\n                    }}\n                    className=\"block w-full pl-10 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\n                    placeholder=\"0.00\"\n                    min=\"0\"\n                    step=\"0.01\"\n                  />\n                </div>\n              </div>\n\n              {/* Install */}\n              <div className=\"mb-4\">\n                <label htmlFor=\"budgetCategories.install\" className=\"block text-sm font-medium text-gray-700\">\n                  Install Budget\n                </label>\n                <div className=\"mt-1 relative rounded-md shadow-sm\">\n                  <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                    <DollarSign className=\"h-4 w-4 text-gray-400\" />\n                  </div>\n                  <input\n                    type=\"number\"\n                    id=\"budgetCategories.install\"\n                    value={formData.budgetCategories?.install?.toString() || ''}\n                    onChange={(e) => {\n                      const value = parseFloat(e.target.value) || 0\n                      const newBudgetCategories: ProjectBudgetCategories = {\n                        designFee: formData.budgetCategories?.designFee || 0,\n                        furnishings: formData.budgetCategories?.furnishings || 0,\n                        propertyManagement: formData.budgetCategories?.propertyManagement || 0,\n                        kitchen: formData.budgetCategories?.kitchen || 0,\n                        install: value > 0 ? value : 0,\n                        storageReceiving: formData.budgetCategories?.storageReceiving || 0,\n                        fuel: formData.budgetCategories?.fuel || 0\n                      }\n                      handleChange('budgetCategories', newBudgetCategories)\n                    }}\n                    className=\"block w-full pl-10 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\n                    placeholder=\"0.00\"\n                    min=\"0\"\n                    step=\"0.01\"\n                  />\n                </div>\n              </div>\n\n              {/* Storage & Receiving */}\n              <div className=\"mb-4\">\n                <label htmlFor=\"budgetCategories.storageReceiving\" className=\"block text-sm font-medium text-gray-700\">\n                  Storage & Receiving Budget\n                </label>\n                <div className=\"mt-1 relative rounded-md shadow-sm\">\n                  <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                    <DollarSign className=\"h-4 w-4 text-gray-400\" />\n                  </div>\n                  <input\n                    type=\"number\"\n                    id=\"budgetCategories.storageReceiving\"\n                    value={formData.budgetCategories?.storageReceiving?.toString() || ''}\n                    onChange={(e) => {\n                      const value = parseFloat(e.target.value) || 0\n                      const newBudgetCategories: ProjectBudgetCategories = {\n                        designFee: formData.budgetCategories?.designFee || 0,\n                        furnishings: formData.budgetCategories?.furnishings || 0,\n                        propertyManagement: formData.budgetCategories?.propertyManagement || 0,\n                        kitchen: formData.budgetCategories?.kitchen || 0,\n                        install: formData.budgetCategories?.install || 0,\n                        storageReceiving: value > 0 ? value : 0,\n                        fuel: formData.budgetCategories?.fuel || 0\n                      }\n                      handleChange('budgetCategories', newBudgetCategories)\n                    }}\n                    className=\"block w-full pl-10 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\n                    placeholder=\"0.00\"\n                    min=\"0\"\n                    step=\"0.01\"\n                  />\n                </div>\n              </div>\n\n              {/* Fuel */}\n              <div className=\"mb-4\">\n                <label htmlFor=\"budgetCategories.fuel\" className=\"block text-sm font-medium text-gray-700\">\n                  Fuel Budget\n                </label>\n                <div className=\"mt-1 relative rounded-md shadow-sm\">\n                  <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                    <DollarSign className=\"h-4 w-4 text-gray-400\" />\n                  </div>\n                  <input\n                    type=\"number\"\n                    id=\"budgetCategories.fuel\"\n                    value={formData.budgetCategories?.fuel?.toString() || ''}\n                    onChange={(e) => {\n                      const value = parseFloat(e.target.value) || 0\n                      const newBudgetCategories: ProjectBudgetCategories = {\n                        designFee: formData.budgetCategories?.designFee || 0,\n                        furnishings: formData.budgetCategories?.furnishings || 0,\n                        propertyManagement: formData.budgetCategories?.propertyManagement || 0,\n                        kitchen: formData.budgetCategories?.kitchen || 0,\n                        install: formData.budgetCategories?.install || 0,\n                        storageReceiving: formData.budgetCategories?.storageReceiving || 0,\n                        fuel: value > 0 ? value : 0\n                      }\n                      handleChange('budgetCategories', newBudgetCategories)\n                    }}\n                    className=\"block w-full pl-10 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\n                    placeholder=\"0.00\"\n                    min=\"0\"\n                    step=\"0.01\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            {/* Buttons */}\n            <div className=\"flex justify-end space-x-3 pt-4\">\n              <button\n                type=\"button\"\n                onClick={onCancel}\n                className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500\"\n                disabled={isLoading}\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                disabled={isLoading}\n                className=\"px-4 py-2 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50\"\n              >\n                {isLoading\n                  ? (isEditing ? 'Updating...' : 'Creating...')\n                  : (isEditing ? 'Update Project' : 'Create Project')\n                }\n              </button>\n            </div>\n          </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import { useState, useEffect } from 'react'\nimport { Transaction, ProjectBudgetCategories } from '@/types'\nimport { ChevronDown, ChevronUp } from 'lucide-react'\nimport { useCategories } from '@/components/CategorySelect'\nimport { useAccount } from '@/contexts/AccountContext'\n\ninterface BudgetProgressProps {\n  budget?: number\n  designFee?: number\n  budgetCategories?: ProjectBudgetCategories\n  transactions: Transaction[]\n  previewMode?: boolean // If true, only show primary budget (furnishings or overall) without toggle\n}\n\ninterface CategoryBudgetData {\n  categoryId: string\n  categoryName: string\n  budget: number\n  spent: number\n  percentage: number\n  isDesignFee: boolean\n}\n\n\nexport default function BudgetProgress({ budget, designFee, budgetCategories, transactions, previewMode = false }: BudgetProgressProps) {\n  const { currentAccountId } = useAccount()\n  const { categories: accountCategories, isLoading: categoriesLoading } = useCategories(false)\n  const [showAllCategories, setShowAllCategories] = useState(false)\n\n  // Create a map of categoryId -> category name for quick lookup\n  const categoryMap = new Map<string, string>()\n  accountCategories.forEach(cat => {\n    categoryMap.set(cat.id, cat.name)\n  })\n\n  // Helper to check if a category is \"Design Fee\" by name (for backward compatibility)\n  const isDesignFeeCategory = (categoryName: string): boolean => {\n    return categoryName.toLowerCase().includes('design') && categoryName.toLowerCase().includes('fee')\n  }\n\n  // Calculate total spent for overall budget (exclude Design Fee transactions)\n  const calculateSpent = (): number => {\n    // Sum all transactions (purchases add, returns subtract), excluding canceled and design fee transactions\n    let totalAmount = 0\n\n    const activeTransactions = transactions.filter(t => {\n      if ((t.status || '').toLowerCase() === 'canceled') return false\n      if (!t.categoryId) return true // Include uncategorized transactions in overall\n      const categoryName = categoryMap.get(t.categoryId)\n      return categoryName && !isDesignFeeCategory(categoryName)\n    })\n\n    for (const transaction of activeTransactions) {\n      const transactionAmount = parseFloat(transaction.amount || '0')\n      const multiplier = transaction.transactionType === 'Return' ? -1 : 1\n      const finalAmount = transactionAmount * multiplier\n      totalAmount += finalAmount\n    }\n\n    return totalAmount\n  }\n\n  // Calculate spending for each budget category using categoryId\n  const calculateCategoryBudgetData = (): CategoryBudgetData[] => {\n    const categoryData: CategoryBudgetData[] = []\n\n    // Group transactions by categoryId\n    const transactionsByCategoryId = new Map<string, Transaction[]>()\n    transactions.forEach(transaction => {\n      if ((transaction.status || '').toLowerCase() === 'canceled') return\n      if (!transaction.categoryId) return // Skip uncategorized transactions for category breakdown\n      \n      if (!transactionsByCategoryId.has(transaction.categoryId)) {\n        transactionsByCategoryId.set(transaction.categoryId, [])\n      }\n      transactionsByCategoryId.get(transaction.categoryId)!.push(transaction)\n    })\n\n    // Process each category that has transactions or a budget set\n    transactionsByCategoryId.forEach((categoryTransactions, categoryId) => {\n      const categoryName = categoryMap.get(categoryId)\n      if (!categoryName) return // Skip if category not found\n\n      const isDesignFee = isDesignFeeCategory(categoryName)\n      \n      // Calculate spent for this category\n      let categorySpent = 0\n      for (const transaction of categoryTransactions) {\n        const transactionAmount = parseFloat(transaction.amount || '0')\n        const multiplier = transaction.transactionType === 'Return' ? -1 : 1\n        const finalAmount = transactionAmount * multiplier\n        categorySpent += finalAmount\n      }\n\n      // Determine budget for this category\n      let categoryBudget = 0\n      if (isDesignFee) {\n        // Use designFee prop for design fee category\n        categoryBudget = designFee || 0\n      } else {\n        // Try to match category name to legacy budgetCategories structure\n        // This is a fallback for backward compatibility\n        if (budgetCategories) {\n          // Map category names to legacy keys (approximate matching)\n          const nameLower = categoryName.toLowerCase()\n          if (nameLower.includes('furnish')) {\n            categoryBudget = budgetCategories.furnishings || 0\n          } else if (nameLower.includes('install')) {\n            categoryBudget = budgetCategories.install || 0\n          } else if (nameLower.includes('fuel')) {\n            categoryBudget = budgetCategories.fuel || 0\n          } else if (nameLower.includes('storage') || nameLower.includes('receiving')) {\n            categoryBudget = budgetCategories.storageReceiving || 0\n          } else if (nameLower.includes('kitchen')) {\n            categoryBudget = budgetCategories.kitchen || 0\n          } else if (nameLower.includes('property') || nameLower.includes('management')) {\n            categoryBudget = budgetCategories.propertyManagement || 0\n          }\n        }\n      }\n\n      // Show category if it has a budget set or has transactions\n      const shouldShowCategory = categoryBudget > 0 || categorySpent !== 0\n\n      if (shouldShowCategory) {\n        const percentage = categoryBudget > 0 ? (categorySpent / categoryBudget) * 100 : 0\n\n        categoryData.push({\n          categoryId,\n          categoryName,\n          budget: categoryBudget,\n          spent: Math.round(categorySpent),\n          percentage: Math.min(percentage, 100), // Cap at 100%\n          isDesignFee\n        })\n      }\n    })\n\n    // Also include categories from budgetCategories that might not have transactions yet\n    if (budgetCategories) {\n      // Legacy mapping of project budget keys to matchers and display names\n      const legacyMappings: Array<{ key: keyof ProjectBudgetCategories; matcher: (name: string) => boolean; displayName: string }> = [\n        { key: 'furnishings', matcher: n => n.includes('furnish'), displayName: 'Furnishings' },\n        { key: 'install', matcher: n => n.includes('install'), displayName: 'Install' },\n        { key: 'fuel', matcher: n => n.includes('fuel'), displayName: 'Fuel' },\n        { key: 'storageReceiving', matcher: n => n.includes('storage') || n.includes('receiving'), displayName: 'Storage & Receiving' },\n        { key: 'kitchen', matcher: n => n.includes('kitchen'), displayName: 'Kitchen' },\n        { key: 'propertyManagement', matcher: n => n.includes('property') || n.includes('management'), displayName: 'Property Management' }\n      ]\n\n      for (const mapping of legacyMappings) {\n        const value = (budgetCategories as any)[mapping.key] || 0\n        if (value > 0) {\n          const alreadyPresent = categoryData.find(cat => mapping.matcher(cat.categoryName.toLowerCase()))\n          if (!alreadyPresent) {\n            // Prefer matching an account-level category if it exists\n            const accountCat = accountCategories.find(cat => mapping.matcher(cat.name.toLowerCase()))\n            if (accountCat) {\n              categoryData.push({\n                categoryId: accountCat.id,\n                categoryName: accountCat.name,\n                budget: value,\n                spent: 0,\n                percentage: 0,\n                isDesignFee: false\n              })\n            } else {\n              // Fallback placeholder when no account-level category exists\n              categoryData.push({\n                categoryId: `legacy-${mapping.key}`,\n                categoryName: mapping.displayName,\n                budget: value,\n                spent: 0,\n                percentage: 0,\n                isDesignFee: false\n              })\n            }\n          }\n        }\n      }\n    }\n\n    // Sort: Design Fee last, then by name\n    categoryData.sort((a, b) => {\n      if (a.isDesignFee && !b.isDesignFee) return 1\n      if (!a.isDesignFee && b.isDesignFee) return -1\n      return a.categoryName.localeCompare(b.categoryName)\n    })\n\n    return categoryData\n  }\n\n  const [spent, setSpent] = useState(0)\n  const [percentage, setPercentage] = useState(0)\n  const [allCategoryData, setAllCategoryData] = useState<CategoryBudgetData[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [computedOverallBudget, setComputedOverallBudget] = useState<number>(budget || 0)\n\n  // Calculate budget data when component mounts or when props change\n  useEffect(() => {\n    // Wait for categories to load\n    if (categoriesLoading || !currentAccountId) {\n      return\n    }\n\n    const calculateBudgetData = () => {\n      setIsLoading(true)\n\n      try {\n        const spentAmount = calculateSpent()\n        const categoryData = calculateCategoryBudgetData()\n\n        // Compute overall budget as the sum of category budgets (exclude design fee)\n        const overallFromCategories = categoryData\n          .filter(cat => !cat.isDesignFee)\n          .reduce((sum, cat) => sum + cat.budget, 0)\n\n        const spentRounded = Math.round(spentAmount)\n        const percentageValue = overallFromCategories > 0 ? (spentRounded / overallFromCategories) * 100 : 0\n\n        setSpent(spentRounded)\n        setPercentage(percentageValue)\n        setAllCategoryData(categoryData)\n        setComputedOverallBudget(overallFromCategories)\n      } catch (error) {\n        console.error('Error calculating budget data:', error)\n        setSpent(0)\n        setPercentage(0)\n        setAllCategoryData([])\n      } finally {\n        setIsLoading(false)\n      }\n    }\n\n    calculateBudgetData()\n  }, [budget, designFee, budgetCategories, transactions, accountCategories, categoriesLoading, currentAccountId])\n\n  // In preview mode, determine what to show: furnishings budget if it exists, otherwise overall furnishings-only budget\n  let categoryData = allCategoryData\n  let overallBudgetCategory: CategoryBudgetData | null = null\n\n  if (previewMode) {\n    // In preview mode, show only the primary budget (furnishings if set, otherwise overall)\n    const furnishingsCategory = allCategoryData.find(cat => \n      cat.categoryName.toLowerCase().includes('furnish')\n    )\n    if (furnishingsCategory) {\n      // Show only furnishings budget category\n      categoryData = [furnishingsCategory]\n    } else if (computedOverallBudget > 0) {\n      // No category budgets set, show overall budget (sum of categories, excluding design fee)\n      overallBudgetCategory = {\n        categoryId: 'overall',\n        categoryName: 'Overall Budget',\n        budget: computedOverallBudget,\n        spent: spent,\n        percentage: percentage,\n        isDesignFee: false\n      }\n    }\n  } else {\n    // Full mode: Filter categories based on toggle state - show only furnishings by default, others when expanded\n    const furnishingsCategory = allCategoryData.find(cat => \n      cat.categoryName.toLowerCase().includes('furnish')\n    )\n    \n    if (showAllCategories) {\n      categoryData = allCategoryData\n    } else {\n      // Show only furnishings if it exists\n      categoryData = furnishingsCategory ? [furnishingsCategory] : []\n    }\n\n    // Add overall budget as a category if it exists and should be shown\n    // Show overall budget only when the toggle is expanded (showAllCategories === true)\n    const shouldShowOverallBudget = computedOverallBudget > 0 && showAllCategories\n\n    overallBudgetCategory = shouldShowOverallBudget ? {\n      categoryId: 'overall',\n      categoryName: 'Overall Budget',\n      budget: computedOverallBudget,\n      spent: spent,\n      percentage: percentage,\n      isDesignFee: false\n    } : null\n  }\n\n  // Build the final render list and append overall budget at the very bottom (below Design Fee)\n  const renderCategories: CategoryBudgetData[] = (() => {\n    const cats: CategoryBudgetData[] = [...(categoryData || [])]\n    if (overallBudgetCategory) {\n      // Always append overall budget at the end of the list\n      cats.push(overallBudgetCategory)\n    }\n    return cats\n  })()\n\n\n  const getProgressColor = (percentage: number) => {\n    if (percentage >= 100) return 'bg-red-500'\n    if (percentage >= 75) return 'bg-red-500' // 75%+ spent = bad (red)\n    if (percentage >= 50) return 'bg-yellow-500' // 50-74% spent = warning (yellow)\n    return 'bg-green-500' // Less than 50% spent = good (green)\n  }\n\n  // Color logic for remaining amounts (green when plenty left, yellow when warning, red when over)\n  const getRemainingColor = (percentage: number) => {\n    if (percentage >= 100) return 'text-red-600' // Over budget = red\n    if (percentage >= 75) return 'text-red-600' // 75%+ spent = bad (red)\n    if (percentage >= 50) return 'text-yellow-600' // 50-74% spent = warning (yellow)\n    return 'text-green-600' // Less than 50% spent = good (green)\n  }\n\n  // Reversed color logic for design fee (green when received, red when not received)\n  const getDesignFeeProgressColor = (percentage: number) => {\n    if (percentage >= 100) return 'bg-green-500' // Fully received = good (green)\n    if (percentage >= 75) return 'bg-green-500' // 75%+ received = good (green)\n    if (percentage >= 50) return 'bg-yellow-500' // 50%+ received = warning (yellow)\n    return 'bg-red-500' // Less than 50% received = bad (red)\n  }\n\n  // Reversed color logic for design fee remaining amounts\n  const getDesignFeeRemainingColor = (percentage: number) => {\n    if (percentage >= 100) return 'text-green-600' // Fully received = good (green)\n    if (percentage >= 75) return 'text-green-600' // 75%+ received = good (green)\n    if (percentage >= 50) return 'text-yellow-600' // 50%+ received = warning (yellow)\n    return 'text-red-600' // Less than 50% received = bad (red)\n  }\n\n  // Format category names to include \"Budget\" suffix\n  const formatCategoryName = (categoryName: string) => {\n    // Don't add \"Budget\" to Design Fee or Overall Budget as they're already clear\n    if (categoryName.toLowerCase().includes('design') && categoryName.toLowerCase().includes('fee')) {\n      return categoryName\n    }\n    if (categoryName === 'Overall Budget') {\n      return categoryName\n    }\n    return `${categoryName} Budget`\n  }\n\n  // If no budget or categories are set, don't show anything\n  const hasOverallBudget = computedOverallBudget > 0\n  const hasDesignFee = designFee !== null && designFee !== undefined && designFee > 0\n  const hasCategoryBudgets = budgetCategories && Object.values(budgetCategories).some(v => v > 0)\n\n  // Show loading state while calculating\n  if (isLoading) {\n    return (\n      <div>\n        <div className=\"animate-pulse\">\n          <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\n          <div className=\"h-2 bg-gray-200 rounded mb-4\"></div>\n        </div>\n      </div>\n    )\n  }\n\n  if (!hasOverallBudget && !hasDesignFee && !hasCategoryBudgets) {\n    return null\n  }\n\n  // In preview mode, use same format as full mode but without toggle and only showing primary budget\n  if (previewMode) {\n    return (\n      <div>\n        {/* Category Budget Progress */}\n        {(categoryData.length > 0 || overallBudgetCategory) && (\n          <div>\n\n            <div className=\"space-y-4\">\n              {[...categoryData, ...(overallBudgetCategory ? [overallBudgetCategory] : [])].map((category) => {\n                return (\n                  <div key={category.categoryId}>\n                    <div className=\"mb-2\">\n                      <div className=\"flex items-center justify-between mb-1\">\n                        <span className=\"text-base font-medium text-gray-900\">{formatCategoryName(category.categoryName)}</span>\n                      </div>\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"text-sm text-gray-500\">\n                          ${Math.round(category.spent).toLocaleString('en-US')} {category.isDesignFee ? 'received' : 'spent'}\n                        </span>\n                        <span className={`text-sm ${category.isDesignFee ? getDesignFeeRemainingColor(category.percentage) : getRemainingColor(category.percentage)}`}>\n                          <span className=\"font-bold\">${Math.round((category.budget || 0) - category.spent).toLocaleString('en-US')}</span> remaining\n                        </span>\n                      </div>\n                    </div>\n\n                    {/* Progress Bar */}\n                    <div className=\"relative\">\n                      <div className=\"w-full bg-gray-200 rounded-full h-2 mb-1\">\n                        <div\n                          className={`h-2 rounded-full transition-all duration-300 ${\n                            category.isDesignFee ? getDesignFeeProgressColor(category.percentage) : getProgressColor(category.percentage)\n                          }`}\n                          style={{ width: `${Math.min(category.percentage, 100)}%` }}\n                        />\n                      </div>\n\n                    </div>\n                  </div>\n                )\n              })}\n            </div>\n\n          </div>\n        )}\n\n        {/* Show message if no budgets are configured */}\n        {!budget && !designFee && (!budgetCategories || Object.values(budgetCategories).every(v => v === 0)) && (\n          <div className=\"text-center py-4 text-gray-500\">\n            <p>No budgets configured for this project.</p>\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  // Full mode with toggle functionality\n  return (\n    <div>\n      {/* Category Budget Progress */}\n      {(categoryData.length > 0 || overallBudgetCategory) && (\n        <div>\n\n          <div className=\"space-y-4\">\n            {renderCategories.map((category) => {\n              return (\n                <div key={category.categoryId}>\n                  <div className=\"mb-2\">\n                    <div className=\"flex items-center justify-between mb-1\">\n                      <span className=\"text-base font-medium text-gray-900\">{formatCategoryName(category.categoryName)}</span>\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm text-gray-500\">\n                        ${Math.round(category.spent).toLocaleString('en-US')} {category.isDesignFee ? 'received' : 'spent'}\n                      </span>\n                      <span className={`text-sm ${category.isDesignFee ? getDesignFeeRemainingColor(category.percentage) : getRemainingColor(category.percentage)}`}>\n                        <span className=\"font-bold\">${Math.round((category.budget || 0) - category.spent).toLocaleString('en-US')}</span> remaining\n                      </span>\n                    </div>\n                  </div>\n\n                  {/* Progress Bar */}\n                  <div className=\"relative\">\n                    <div className=\"w-full bg-gray-200 rounded-full h-2 mb-1\">\n                      <div\n                        className={`h-2 rounded-full transition-all duration-300 ${\n                          category.isDesignFee ? getDesignFeeProgressColor(category.percentage) : getProgressColor(category.percentage)\n                        }`}\n                        style={{ width: `${Math.min(category.percentage, 100)}%` }}\n                      />\n                    </div>\n\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n\n          {/* Show All Categories Toggle - positioned at bottom */}\n          {(allCategoryData.some(cat => {\n            const nameLower = cat.categoryName.toLowerCase()\n            return !nameLower.includes('furnish') && !cat.isDesignFee\n          }) || (budget !== null && budget !== undefined && budget > 0)) && (\n            <div className=\"mt-4\">\n              <button\n                onClick={() => setShowAllCategories(!showAllCategories)}\n                className=\"inline-flex items-center text-sm font-medium text-primary-600 hover:text-primary-800 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2\"\n              >\n                {showAllCategories ? (\n                  <>\n                    <ChevronUp className=\"h-4 w-4 mr-1\" />\n                    Show Less\n                  </>\n                ) : (\n                  <>\n                    <ChevronDown className=\"h-4 w-4 mr-1\" />\n                    Show All Budget Categories\n                  </>\n                )}\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Show message if no budgets are configured */}\n      {!budget && !designFee && (!budgetCategories || Object.values(budgetCategories).every(v => v === 0)) && (\n        <div className=\"text-center py-4 text-gray-500\">\n          <p>No budgets configured for this project.</p>\n        </div>\n      )}\n    </div>\n  )\n}\n\n"],"names":["ProjectForm","onSubmit","onCancel","isLoading","initialData","isEditing","migratedBudgetCategories","formData","setFormData","useState","errors","setErrors","calculateTotalBudget","sum","value","handleChange","field","prev","processedValue","validateForm","newErrors","handleSubmit","e","cleanedData","obj","cleaned","_","error","jsx","jsxs","X","DollarSign","_b","_a","newBudgetCategories","_c","_d","_e","_f","_h","_g","_j","_i","_l","_k","_n","_m","BudgetProgress","budget","designFee","budgetCategories","transactions","previewMode","currentAccountId","useAccount","accountCategories","categoriesLoading","useCategories","showAllCategories","setShowAllCategories","categoryMap","cat","isDesignFeeCategory","categoryName","calculateSpent","totalAmount","activeTransactions","t","transaction","transactionAmount","multiplier","finalAmount","calculateCategoryBudgetData","categoryData","transactionsByCategoryId","categoryTransactions","categoryId","isDesignFee","categorySpent","categoryBudget","nameLower","percentage","legacyMappings","n","mapping","accountCat","a","b","spent","setSpent","setPercentage","allCategoryData","setAllCategoryData","setIsLoading","computedOverallBudget","setComputedOverallBudget","useEffect","spentAmount","overallFromCategories","spentRounded","percentageValue","overallBudgetCategory","furnishingsCategory","renderCategories","cats","getProgressColor","getRemainingColor","getDesignFeeProgressColor","getDesignFeeRemainingColor","formatCategoryName","hasOverallBudget","hasDesignFee","hasCategoryBudgets","v","category","Fragment","ChevronUp","ChevronDown"],"mappings":"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"}