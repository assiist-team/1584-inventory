{"version":3,"file":"useStackedNavigate.js","sources":["../../src/hooks/useStackedNavigate.ts"],"sourcesContent":["import { useCallback } from 'react'\nimport { useNavigate, useLocation, To, NavigateOptions } from 'react-router-dom'\nimport { useNavigationStack } from '../contexts/NavigationStackContext'\n\n// A small wrapper around react-router's navigate that records the current\n// location on the navigation stack before navigating (so Back behaves natively).\nexport function useStackedNavigate() {\n  const navigate = useNavigate()\n  const location = useLocation()\n  const navigationStack = useNavigationStack()\n\n  const stackedNavigate = useCallback(\n    (to: To, options?: NavigateOptions) => {\n      try {\n        // Don't record a navigation entry when performing a history jump (e.g. navigate(-1))\n        // because that would push the current location onto the stack right before going back,\n        // which causes the previous page to treat the back destination as the page we just left,\n        // creating an endless back/forward loop.\n        // Only push for non-numeric navigations or forward numeric jumps.\n        if (typeof to !== 'number' || to > 0) {\n          navigationStack.push(location.pathname + location.search)\n        }\n      } catch {\n        // ignore if stack not available\n      }\n\n      navigate(to, options)\n    },\n    [navigate, navigationStack, location.pathname, location.search]\n  )\n\n  return stackedNavigate\n}\n\n\n"],"names":["useStackedNavigate","navigate","useNavigate","location","useLocation","navigationStack","useNavigationStack","useCallback","to","options"],"mappings":"sGAMO,SAASA,GAAqB,CACnC,MAAMC,EAAWC,EAAA,EACXC,EAAWC,EAAA,EACXC,EAAkBC,EAAA,EAsBxB,OApBwBC,EAAAA,YACtB,CAACC,EAAQC,IAA8B,CACrC,GAAI,EAME,OAAOD,GAAO,UAAYA,EAAK,IACjCH,EAAgB,KAAKF,EAAS,SAAWA,EAAS,MAAM,CAE5D,MAAQ,CAER,CAEAF,EAASO,EAAIC,CAAO,CACtB,EACA,CAACR,EAAUI,EAAiBF,EAAS,SAAUA,EAAS,MAAM,CAAA,CAIlE"}