import{a as H,j as e}from"./index.js";import{L as j,u as V,b as Y,c as Z}from"./router.js";import{r as o}from"./vendor.js";import{i as P,t as F,p as I}from"./inventoryService.js";import{I as G}from"./imageService.js";import{P as X,l as ee,m as se,Q as te,T as J,R as re,B as ae,e as K,n as ne,o as oe,d as W,h as ie,p as le}from"./ui.js";import{a as ce,f as de}from"./dateUtils.js";import{B as me,P as xe}from"./BudgetProgress.js";import"./firebase.js";function ue({projectId:n,projectName:u}){const[d,h]=o.useState(""),[a,p]=o.useState(new Set),[m,i]=o.useState([]),[x,k]=o.useState(!0),[N,f]=o.useState(null),[_,w]=o.useState(new Set),[C,v]=o.useState(null),[y,T]=o.useState("all"),[S,b]=o.useState(!1),{showSuccess:$,showError:E}=H();o.useEffect(()=>{(async()=>{try{k(!0),f(null),console.log("Fetching items for project:",n);const r=await P.getItems(n);console.log("Fetched items:",r.length,r),i(r)}catch(r){console.error("Failed to fetch items:",r),f("Failed to load inventory items. Please try again.")}finally{k(!1)}})();const t=P.subscribeToItems(n,r=>{console.log("Real-time items update:",r.length,r),i(r)});return()=>{t()}},[n]),o.useEffect(()=>()=>{w(new Set)},[]),o.useEffect(()=>{const s=t=>{if(C&&!t.target)return;const r=t.target;!r.closest(".disposition-menu")&&!r.closest(".disposition-badge")&&v(null),S&&!r.closest(".filter-menu")&&!r.closest(".filter-button")&&b(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[C,S]);const A=s=>{p(s?new Set(m.map(t=>t.item_id)):new Set)},z=(s,t)=>{const r=new Set(a);t?r.add(s):r.delete(s),p(r)},B=async s=>{try{const t=m.find(l=>l.item_id===s);if(!t)return;const r=!t.bookmark;await P.updateItem(n,s,{bookmark:r}),i(m.map(l=>l.item_id===s?{...l,bookmark:r}:l))}catch(t){console.error("Failed to update bookmark:",t),f("Failed to update bookmark. Please try again.")}},R=async(s,t)=>{try{if(!m.find(l=>l.item_id===s))return;await P.updateItem(n,s,{disposition:t}),i(m.map(l=>l.item_id===s?{...l,disposition:t}:l)),v(null)}catch(r){console.error("Failed to update disposition:",r),f("Failed to update item disposition. Please try again.")}},M=s=>{v(C===s?null:s)},D=s=>{const t="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium cursor-pointer transition-colors hover:opacity-80";switch(s){case"keep":return`${t} bg-green-100 text-green-800`;case"to return":case"return":return`${t} bg-red-100 text-red-700`;case"returned":return`${t} bg-red-800 text-red-100`;case"inventory":return`${t} bg-blue-100 text-blue-800`;default:return`${t} bg-gray-100 text-gray-800`}},U=async s=>{var t,r;try{w(g=>new Set(g).add(s));const l=await G.selectFromGallery();if(l.length>0)for(let g=0;g<l.length;g++){const Q=l[g];await O(s,Q,l)}}catch(l){if(console.error("Error adding image:",l),(t=l.message)!=null&&t.includes("timeout")||(r=l.message)!=null&&r.includes("canceled")){console.log("User canceled image selection or selection timed out");return}E("Failed to add image. Please try again.")}finally{w(l=>{const g=new Set(l);return g.delete(s),g})}},O=async(s,t,r)=>{const g={url:(await G.uploadItemImage(t,u,s)).url,alt:t.name,isPrimary:!0,uploadedAt:new Date,fileName:t.name,size:t.size,mimeType:t.type};if(await P.addItemImage(n,s,g),r&&r.indexOf(t)===r.length-1){const Q=r.length>1?`${r.length} images uploaded successfully!`:"Image uploaded successfully!";$(Q)}},L=async()=>{if(a.size===0)return;const s=`Are you sure you want to delete ${a.size} item(s)? This action cannot be undone.`;if(confirm(s))try{const t=Array.from(a).map(r=>P.deleteItem(n,r));await Promise.all(t),p(new Set),f(null)}catch(t){console.error("Failed to delete items:",t),f("Failed to delete some items. Please try again.")}},c=m.filter(s=>{const t=s.description.toLowerCase().includes(d.toLowerCase())||s.source.toLowerCase().includes(d.toLowerCase())||s.sku.toLowerCase().includes(d.toLowerCase())||s.payment_method.toLowerCase().includes(d.toLowerCase()),r=y==="all"||y==="bookmarked"&&s.bookmark;return t&&r});return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:e.jsxs(j,{to:`/project/${n}/item/add`,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 transition-colors duration-200 w-full sm:w-auto",children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Add Item"]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ee,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-base",placeholder:"Search items...",value:d,onChange:s=>h(s.target.value)})]}),e.jsxs("div",{className:"flex items-center justify-between gap-4 p-3 rounded-lg",children:[e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 h-4 w-4",onChange:s=>A(s.target.checked),checked:a.size===m.length&&m.length>0}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Select all"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[a.size>0&&e.jsxs("span",{className:"text-sm text-gray-500",children:[a.size," of ",m.length," selected"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>b(!S),className:`filter-button inline-flex items-center justify-center px-3 py-2 border text-sm font-medium rounded-md transition-colors duration-200 ${y==="all"?"border-gray-300 text-gray-700 bg-white hover:bg-gray-50":"border-primary-500 text-primary-600 bg-primary-50 hover:bg-primary-100"}`,title:"Filter items",children:e.jsx(se,{className:"h-4 w-4"})}),S&&e.jsx("div",{className:"filter-menu absolute top-full left-0 mt-1 w-40 bg-white border border-gray-200 rounded-md shadow-lg z-10",children:e.jsxs("div",{className:"py-1",children:[e.jsx("button",{onClick:()=>{T("all"),b(!1)},className:`block w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${y==="all"?"bg-primary-50 text-primary-600":"text-gray-700"}`,children:"All Items"}),e.jsx("button",{onClick:()=>{T("bookmarked"),b(!1)},className:`block w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${y==="bookmarked"?"bg-primary-50 text-primary-600":"text-gray-700"}`,children:"Bookmarked Only"})]})})]}),e.jsx("button",{className:"inline-flex items-center justify-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 transition-colors duration-200",disabled:a.size===0,title:"Generate QR Codes",children:e.jsx(te,{className:"h-4 w-4"})}),e.jsx("button",{onClick:L,className:"inline-flex items-center justify-center px-3 py-2 border border-red-300 text-sm font-medium rounded-md text-red-700 bg-red-50 hover:bg-red-100 disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200",disabled:a.size===0,title:"Delete All",children:e.jsx(J,{className:"h-4 w-4"})})]})]})]})]}),x&&e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx("div",{className:"mx-auto h-16 w-16 text-gray-400 animate-spin mb-4",children:e.jsxs("svg",{fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading inventory..."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Fetching your project items."})]}),N&&e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx("div",{className:"mx-auto h-16 w-16 text-red-400 mb-4",children:"⚠️"}),e.jsx("h3",{className:"text-lg font-medium text-red-900 mb-2",children:"Error loading inventory"}),e.jsx("p",{className:"text-sm text-red-500 mb-6 max-w-sm mx-auto",children:N}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-red-600 hover:bg-red-700 transition-colors duration-200 w-full sm:w-auto max-w-xs",children:[e.jsx(re,{className:"h-5 w-5 mr-2"}),"Retry"]})]}),!x&&!N&&c.length===0?e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx("div",{className:"mx-auto h-16 w-16 text-gray-400 -mb-1",children:"📦"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No items yet"})]}):!x&&!N&&e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:c.map(s=>e.jsx("li",{className:"relative",children:e.jsx("div",{className:"block bg-gray-50 transition-colors duration-200 hover:bg-gray-100 active:bg-gray-200",children:e.jsxs("div",{className:"px-4 py-4 sm:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 h-4 w-4 flex-shrink-0",checked:a.has(s.item_id),onChange:t=>z(s.item_id,t.target.checked)})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),B(s.item_id)},className:`p-1 rounded border-gray-300 transition-colors ${s.bookmark?"text-red-600 bg-red-50":"text-gray-400 hover:text-gray-600 hover:bg-gray-200"}`,children:e.jsx(ae,{className:"h-4 w-4",fill:s.bookmark?"currentColor":"none"})}),e.jsx(j,{to:`/project/${n}/edit-item/${s.item_id}`,onClick:t=>t.stopPropagation(),className:"p-1 rounded border-gray-300 text-gray-400 hover:text-gray-600 hover:bg-gray-200 transition-colors",title:"Edit item",children:e.jsx(K,{className:"h-4 w-4"})}),e.jsxs("div",{className:"relative",children:[e.jsxs("span",{onClick:t=>{t.preventDefault(),t.stopPropagation(),M(s.item_id)},className:`disposition-badge ${D(s.disposition)}`,children:[s.disposition==="to return"?"To Return":s.disposition.charAt(0).toUpperCase()+s.disposition.slice(1),e.jsx(ne,{className:"h-3 w-3 ml-1"})]}),C===s.item_id&&e.jsx("div",{className:"disposition-menu absolute top-full left-0 mt-1 w-32 bg-white border border-gray-200 rounded-md shadow-lg z-10",children:e.jsx("div",{className:"py-1",children:["keep","to return","returned","inventory"].map(t=>e.jsx("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),R(s.item_id,t)},className:`block w-full text-left px-3 py-2 text-xs hover:bg-gray-50 ${s.disposition===t||t==="to return"&&s.disposition==="return"?"bg-gray-100 text-gray-900":"text-gray-700"}`,children:t==="to return"?"To Return":t.charAt(0).toUpperCase()+t.slice(1)},t))})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 py-3",children:[e.jsx("div",{className:"flex-shrink-0",children:s.images&&s.images.length>0?(()=>{const t=s.images.find(r=>r.isPrimary)||s.images[0];return e.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden border-2 border-gray-200",children:e.jsx("img",{src:t.url,alt:t.alt||"Item image",className:"w-full h-full object-cover"})})})():e.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),U(s.item_id)},disabled:_.has(s.item_id),className:"w-16 h-16 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:border-gray-400 transition-colors disabled:opacity-50",title:"Add image (camera or gallery)",children:e.jsx(oe,{className:"h-6 w-6"})})}),e.jsx("div",{className:"flex-1 min-w-0 flex items-center",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 line-clamp-2 break-words",children:s.description}),s.space&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.space})]})})]}),e.jsx(j,{to:`/item/${s.item_id}?project=${n}`,className:"block",children:e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-gray-500",children:[s.price&&e.jsxs("span",{className:"font-medium text-gray-700",children:["$",s.price]}),s.source&&e.jsxs(e.Fragment,{children:[s.price&&e.jsx("span",{className:"hidden sm:inline",children:"•"}),e.jsx("span",{className:"font-medium text-gray-700",children:s.source})]}),s.sku&&e.jsxs(e.Fragment,{children:[(s.price||s.source)&&e.jsx("span",{className:"hidden sm:inline",children:"•"}),e.jsx("span",{className:"font-medium text-gray-700",children:s.sku})]})]})})})]})})},s.item_id))})})]})}const q=()=>{document.querySelectorAll(".no-icon").forEach(u=>{Array.from(u.childNodes).forEach(h=>{h.nodeType!==Node.TEXT_NODE&&u.removeChild(h)})})};function he({projectId:n}){const{id:u}=V(),d=n||u,[h,a]=o.useState([]),[p,m]=o.useState(!0);return o.useEffect(()=>{(async()=>{if(!d){m(!1);return}try{const x=await F.getTransactions(d);a(x)}catch(x){console.error("Error loading transactions:",x),a([])}finally{m(!1)}})()},[d]),o.useEffect(()=>d?F.subscribeToTransactions(d,x=>{a(x)}):void 0,[d]),o.useEffect(()=>{q();const i=setTimeout(q,100),x=setTimeout(q,500);return()=>{clearTimeout(i),clearTimeout(x)}},[h]),p?e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:e.jsxs(j,{to:`/project/${d}/transaction/add`,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 transition-colors duration-200 w-full sm:w-auto",children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Add Transaction"]})}),h.length===0?e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx("div",{className:"mx-auto h-16 w-16 text-gray-400 -mb-1",children:"🧾"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No transactions yet"})]}):e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:h.map(i=>e.jsx("li",{className:"relative",children:e.jsx(j,{to:`/project/${d}/transaction/${i.transaction_id}`,className:"block bg-gray-50 transition-colors duration-200 hover:bg-gray-100 active:bg-gray-200",children:e.jsxs("div",{className:"px-4 py-4 sm:px-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900",children:i.source}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium no-icon ${i.transaction_type==="Purchase"?"bg-green-100 text-green-800":i.transaction_type==="Return"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:i.transaction_type})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-1 text-sm text-gray-500",children:[e.jsx("span",{className:"font-medium text-gray-700",children:ce(i.amount)}),e.jsx("span",{className:"hidden sm:inline",children:"•"}),e.jsx("span",{className:"font-medium text-gray-700 capitalize",children:i.payment_method}),e.jsx("span",{className:"hidden sm:inline",children:"•"}),e.jsx("span",{className:"font-medium text-gray-700",children:de(i.transaction_date)})]}),i.notes&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:i.notes})]})]})})},i.transaction_id))})})]})}function ke(){var L;const{id:n}=V(),u=Y(),[d,h]=Z(),[a,p]=o.useState(null),[m,i]=o.useState([]),[x,k]=o.useState(!0),[N,f]=o.useState(null),[_,w]=o.useState(!1),[C,v]=o.useState(!1),[y,T]=o.useState(!1),{showError:S}=H(),b=d.get("tab")||"transactions",$=c=>{const s=new URLSearchParams(d);s.set("tab",c),h(s)},E=async()=>{if(!n){console.warn("No project ID provided, redirecting to projects"),u("/projects");return}k(!0);try{console.log("Loading project data for ID:",n);const c=await I.getProject(n);if(c){console.log("Project loaded successfully:",c.name),p(c);const s=await F.getTransactions(n);console.log("Transactions loaded:",s.length),i(s)}else console.warn("Project not found:",n),u("/projects")}catch(c){console.error("Error loading project:",c),f("Failed to load project. Please try again."),k(!1)}finally{k(!1)}};o.useEffect(()=>{E()},[n,u]);const A=()=>{f(null),E()};o.useEffect(()=>n?F.subscribeToTransactions(n,s=>{i(s)}):void 0,[n]);const z=async c=>{if(!(!a||!n))try{await I.updateProject(n,c);const s=await I.getProject(n);p(s),w(!1)}catch(s){throw console.error("Error updating project:",s),s}},B=()=>{w(!0)},R=()=>{w(!1)},M=()=>{v(!0)},D=()=>{v(!1)},U=async()=>{if(n){T(!0);try{await I.deleteProject(n),u("/projects")}catch(c){console.error("Error deleting project:",c),T(!1),v(!1),S("Failed to delete project. Please try again.")}}},O=[{id:"transactions",name:"Transactions",icon:ie},{id:"inventory",name:"Inventory",icon:le}];return x?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Loading project..."})]})}):N?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto h-12 w-12 text-red-400",children:"⚠️"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Error Loading Project"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:N}),e.jsxs("div",{className:"mt-6 flex justify-center space-x-3",children:[e.jsx("button",{onClick:A,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700",children:"Try Again"}),e.jsxs(j,{to:"/projects",className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Back to Projects"]})]})]}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(j,{to:"/projects",className:"inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700",children:[e.jsx(W,{className:"h-4 w-4 mr-1"}),"Back"]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:B,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs("button",{onClick:M,className:"inline-flex items-center px-3 py-2 border border-red-300 shadow-sm text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:a.name}),a.clientName&&e.jsx("p",{className:"text-lg text-gray-600 mb-4",children:a.clientName})]}),e.jsx("div",{className:"border-t border-gray-200 my-6"}),a&&e.jsx(me,{budget:a.budget,designFee:a.designFee,budgetCategories:a.budgetCategories,transactions:m})]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8 px-6",children:O.map(c=>{const s=c.icon;return e.jsxs("button",{onClick:()=>$(c.id),className:`py-4 px-1 border-b-2 font-medium text-base flex items-center ${b===c.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(s,{className:"h-4 w-4 mr-2"}),c.name]},c.id)})})}),e.jsxs("div",{className:"px-6 py-6",children:[b==="inventory"&&e.jsx(ue,{projectId:a.id,projectName:a.name}),b==="transactions"&&e.jsx(he,{projectId:a.id})]})]}),_&&a&&e.jsx(xe,{initialData:{name:a.name,description:a.description,clientName:a.clientName,budget:a.budget,designFee:a.designFee,budgetCategories:a.budgetCategories},onSubmit:z,onCancel:R}),C&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Delete"}),e.jsx("button",{onClick:D,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Are you sure you want to delete the project ",e.jsxs("strong",{children:['"',a==null?void 0:a.name,'"']}),"? This action cannot be undone and will permanently delete the project and all associated data."]}),a&&((L=a.metadata)==null?void 0:L.totalItems)&&a.metadata.totalItems>0&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-3 mb-4",children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"ml-3",children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"Warning"}),e.jsx("div",{className:"mt-1 text-sm text-yellow-700",children:e.jsxs("p",{children:["This project contains ",a.metadata.totalItems," item(s). Deleting the project will permanently remove all associated data."]})})]})})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:D,disabled:y,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:U,disabled:y,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:y?"Deleting...":"Delete"})]})]})]})})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto h-12 w-12 text-gray-400",children:"📁"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Project not found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"The project you're looking for doesn't exist."}),e.jsx("div",{className:"mt-6",children:e.jsxs(j,{to:"/projects",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Back to Projects"]})})]})}export{ke as default};
//# sourceMappingURL=ProjectDetail.js.map
