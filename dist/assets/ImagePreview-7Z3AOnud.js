import{j as e}from"./index-DRwKqTma.js";import{r as u}from"./vendor-Gm9i_4Ku.js";import{a as w,m as k,n as C,o as D,i as L,P as j}from"./ui-DKDhksGx.js";function P({images:t,initialIndex:h=0,onClose:i}){const[c,n]=u.useState(h),[m,d]=u.useState(!1);u.useEffect(()=>{const s=a=>{switch(a.key){case"Escape":i();break;case"ArrowLeft":a.preventDefault(),n(o=>o>0?o-1:t.length-1);break;case"ArrowRight":a.preventDefault(),n(o=>o<t.length-1?o+1:0);break}};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[i,t.length]),u.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]);const l=t[c],p=()=>{n(s=>s>0?s-1:t.length-1),d(!1)},f=()=>{n(s=>s<t.length-1?s+1:0),d(!1)},g=s=>{if(s===0)return"0 Bytes";const a=1024,o=["Bytes","KB","MB","GB"],b=Math.floor(Math.log(s)/Math.log(a));return(s/Math.pow(a,b)).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+" "+o[b]};return e.jsxs("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center p-4",children:[e.jsx("button",{onClick:i,className:"absolute top-4 right-4 z-10 p-2 text-white hover:text-gray-300 transition-colors","aria-label":"Close gallery",children:e.jsx(w,{className:"h-6 w-6"})}),t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:p,className:"absolute left-4 top-1/2 transform -translate-y-1/2 z-10 p-2 text-white hover:text-gray-300 transition-colors","aria-label":"Previous image",children:e.jsx(k,{className:"h-8 w-8"})}),e.jsx("button",{onClick:f,className:"absolute right-4 top-1/2 transform -translate-y-1/2 z-10 p-2 text-white hover:text-gray-300 transition-colors","aria-label":"Next image",children:e.jsx(C,{className:"h-8 w-8"})})]}),e.jsxs("div",{className:"relative max-w-full max-h-full flex items-center justify-center",children:[e.jsx("img",{src:l.url,alt:l.alt||l.fileName,className:"max-w-full max-h-full object-contain",onLoad:()=>d(!0),style:{opacity:m?1:0,transition:"opacity 0.3s ease"}}),!m&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium truncate",children:l.alt||l.fileName}),l.caption&&e.jsx("p",{className:"text-xs text-gray-300 mt-1",children:l.caption}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-xs text-gray-400",children:[e.jsxs("span",{children:[c+1," of ",t.length]}),e.jsx("span",{children:g(l.size)}),e.jsx("span",{children:(()=>{try{return new Date(l.uploadedAt).toLocaleDateString()}catch(s){return console.warn("Invalid date for image:",l.uploadedAt,s),"Unknown date"}})()})]})]}),e.jsx("button",{onClick:()=>window.open(l.url,"_blank"),className:"p-2 text-white hover:text-gray-300 transition-colors ml-4","aria-label":"Download image",children:e.jsx(D,{className:"h-4 w-4"})})]})}),t.length>1&&e.jsx("div",{className:"absolute bottom-20 left-1/2 transform -translate-x-1/2 flex space-x-2",children:t.map((s,a)=>e.jsx("button",{onClick:()=>{n(a),d(!1)},className:`w-2 h-2 rounded-full transition-colors ${a===c?"bg-white":"bg-white bg-opacity-50"}`,"aria-label":`Go to image ${a+1}`},a))})]})}function z({images:t,onAddImage:h,onRemoveImage:i,onSetPrimary:c,maxImages:n=5,showControls:m=!0,size:d="md",className:l=""}){const[p,f]=u.useState(!1),[g,s]=u.useState(0),a={sm:"w-20 h-20 sm:w-16 sm:h-16",md:"w-24 h-24 sm:w-20 sm:h-20",lg:"w-28 h-28 sm:w-24 sm:h-24"},o=r=>{s(r),f(!0)},b=()=>{f(!1)},N=(r,x)=>{r.stopPropagation(),i==null||i(x)},v=(r,x)=>{r.stopPropagation(),c==null||c(x)};return t.length===0&&!h?null:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`space-y-3 ${l}`,children:[t.length>0&&e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3 sm:gap-4 md:gap-6",style:{width:"fit-content"},children:[t.map((r,x)=>e.jsxs("div",{className:`${a[d]} relative group cursor-pointer rounded-lg overflow-hidden border-2 ${r.isPrimary?"border-primary-500 ring-2 ring-primary-200":"border-gray-200"}`,onClick:()=>o(x),children:[e.jsx("img",{src:r.url,alt:r.alt||r.fileName,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}),r.isPrimary&&e.jsx("div",{className:"absolute top-1 left-1 bg-primary-500 text-white text-xs px-1 py-0.5 rounded",children:"Primary"}),m&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center",children:e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 flex space-x-1",children:[!r.isPrimary&&c&&e.jsx("button",{onClick:y=>v(y,r.url),className:"p-1 bg-white bg-opacity-90 rounded-full text-gray-700 hover:bg-opacity-100 transition-colors",title:"Set as primary",children:e.jsx(L,{className:"h-3 w-3"})}),i&&e.jsx("button",{onClick:y=>N(y,r.url),className:"p-1 bg-red-500 bg-opacity-90 rounded-full text-white hover:bg-opacity-100 transition-colors",title:"Remove image",children:e.jsx(w,{className:"h-3 w-3"})})]})}),!r.isPrimary&&t.length>1&&e.jsx("div",{className:"absolute bottom-1 right-1 bg-black bg-opacity-70 text-white text-xs px-1 py-0.5 rounded",children:x+1})]},r.url)),h&&t.length<n&&e.jsx("button",{onClick:h,className:`${a[d]} border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center text-gray-400 hover:text-gray-600 hover:border-gray-400 transition-colors`,title:"Add image",children:e.jsx(j,{className:"h-5 w-5"})})]}),!t.length&&h&&e.jsx("button",{onClick:h,className:`${a[d]} border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center text-gray-400 hover:text-gray-600 hover:border-gray-400 transition-colors w-full`,title:"Add image",children:e.jsx(j,{className:"h-5 w-5"})}),t.length>0&&e.jsxs("p",{className:"text-xs text-gray-500",children:[t.length," image",t.length!==1?"s":"",n&&` (max ${n})`]})]}),p&&e.jsx(P,{images:t,initialIndex:g,onClose:b})]})}export{z as I};
//# sourceMappingURL=ImagePreview-7Z3AOnud.js.map
