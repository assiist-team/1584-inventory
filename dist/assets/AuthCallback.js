import{j as n,s as c,c as l}from"./index.js";import{r as m}from"./vendor.js";import{u as d}from"./useStackedNavigate.js";import"./router.js";import"./supabase.js";import"./ui.js";function x(){const a=d();return m.useEffect(()=>{(async()=>{try{let i=0,r=null;for(;i<20;){const{data:{session:e},error:t}=await c.auth.getSession();if(t){console.error("Auth callback error:",t),a("/");return}if(e!=null&&e.user){r=e;break}i++,await new Promise(s=>setTimeout(s,100))}if(r!=null&&r.user){const e=localStorage.getItem("pendingInvitationToken");if(e){try{const t=await l(e);t&&localStorage.setItem("pendingInvitationData",JSON.stringify({invitationId:t.invitationId,accountId:t.accountId,role:t.role}))}catch(t){console.error("Error checking invitation token:",t)}localStorage.removeItem("pendingInvitationToken")}a("/")}else a("/")}catch(o){console.error("Error handling auth callback:",o),a("/")}})()},[a]),n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Completing sign in..."})]})})}export{x as default};
//# sourceMappingURL=AuthCallback.js.map
